import{S as $e,i as Ee,s as ke,D as me,Z as ge,_ as be,m as E,h as c,n as S,$ as Fe,b as D,a0 as v,K as Ke,a1 as O,M as Se,Q as Te,q,r as j,u as ae,e as ce,N as Dt,o as ji,T as $r,k as N,l as T,p as Mt,w as Ue,y as P,z as L,A as F,W as al,g as b,d as w,B as R,R as nt,C as Ft,a as U,c as Q,a7 as He,G as Pe,ae as Er,a8 as et,H as Rt,I as Ht,J as Lt,L as dt,O as Ae,v as ie,f as re,ab as Ne,E as Et,F as se,X as Ui,Y as Qi,U as Xe,V as xe,a2 as tt,P as yr,a3 as Yi,a4 as Wt,a9 as il,x as yt,a6 as Dl,ad as Ir}from"../chunks/index.6d58eddb.js";import{g as ol}from"../chunks/navigation.aea35273.js";import{O as Sr,a as kt,P as Dr}from"../chunks/Page.a0832e69.js";import{K as mt,O as Nr,h as Le,P as lt,R as fl,U as Tr,V as Me,W as ul,X as at,Y as Jt,t as pt,C as gt,Z as Xt,_ as cl,d as it,$ as Vr,a0 as Cr,a1 as ot,a2 as Nt,a3 as bt,a4 as Gi,a5 as _t,a6 as ht,a7 as zt,a8 as vt,a9 as Wi,a as xt,aa as dl,N as Ji,B as ml,ab as Ki,l as Nl,ac as Zi,ad as _l,ae as Tt,af as Xi,ag as Mr,ah as wt,ai as Yt,aj as xi,ak as zr,al as Ot,am as er,an as Ar,f as Br,ao as Pr,ap as Fr,aq as Gt,ar as Rr,as as Hr,E as Lr,at as Or,au as tr,av as el,aw as At,ax as qr,ay as jr,az as It,aA as lr,aB as Kt,aC as rl,aD as nr,i as Ur,aE as hl,aF as Qr,aG as St,z as pl,e as Yr,aH as Gr,aI as Wr,aJ as Jr,M as gl,F as bl,G as vl,n as Kr,aK as Zr,H as Xr,I as ir,J as sl,aL as xr,aM as wl,T as es,aN as ts,aO as ls,y as rr,aP as sr,aQ as ns,c as is,aR as rs,aS as ss,aT as as,aU as os,aV as fs}from"../chunks/Commands.f21feee1.js";import{w as us}from"../chunks/index.fcc110a5.js";import{M as kl}from"../chunks/ToastNotification.0ea457ce.js";import{C as cs,b as ar,I as Tl,a as ds,T as ms,S as _s}from"../chunks/ConceptView.85d12124.js";import{E as Vl,R as or,A as hs,D as ps,T as gs}from"../chunks/DatasetSettingsFields.eb88d2cc.js";import{L as bs,a as vs,b as ws,c as ks,C as fr}from"../chunks/ComboBox.fb0d815b.js";import{E as ur,S as $s}from"../chunks/StringSpanHighlight.548230dd.js";import{g as Es}from"../chunks/settingsStore.3abd8af5.js";import{S as ys}from"../chunks/Search.5f4df38b.js";import{C as Is}from"../chunks/ChevronUp.d4050376.js";import{s as Zt,f as Ss}from"../chunks/notificationsStore.a58b8b24.js";import{T as cr}from"../chunks/TextArea.b1aacf82.js";import{S as Ds}from"../chunks/Settings.5397201f.js";import{R as Ns,a as Ts}from"../chunks/RadioButtonGroup.b8f63d91.js";import{E as Vs}from"../chunks/DatasetFieldEmbeddingSelector.5b207ebd.js";function Cl(i){let e,l;return{c(){e=ge("title"),l=q(i[1])},l(t){e=be(t,"title",{});var n=E(e);l=j(n,i[1]),n.forEach(c)},m(t,n){D(t,e,n),v(e,l)},p(t,n){n&2&&ae(l,t[1])},d(t){t&&c(e)}}}function Cs(i){let e,l,t=i[1]&&Cl(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],a={};for(let r=0;r<n.length;r+=1)a=me(a,n[r]);return{c(){e=ge("svg"),t&&t.c(),l=ge("path"),this.h()},l(r){e=be(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=E(e);t&&t.l(s),l=be(s,"path",{d:!0}),E(l).forEach(c),s.forEach(c),this.h()},h(){S(l,"d","M10 16L20 6 21.4 7.4 12.8 16 21.4 24.6 20 26z"),Fe(e,a)},m(r,s){D(r,e,s),t&&t.m(e,null),v(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=Cl(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Fe(e,a=Ke(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:O,o:O,d(r){r&&c(e),t&&t.d()}}}function Ms(i,e,l){let t,n;const a=["size","title"];let r=Se(e,a),{size:s=16}=e,{title:o=void 0}=e;return i.$$set=f=>{l(5,e=me(me({},e),Te(f))),l(3,r=Se(e,a)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,o=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||o),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Te(e),[s,o,n,r,t]}class dr extends $e{constructor(e){super(),Ee(this,e,Ms,Cs,ke,{size:0,title:1})}}function Ml(i){let e,l;return{c(){e=ge("title"),l=q(i[1])},l(t){e=be(t,"title",{});var n=E(e);l=j(n,i[1]),n.forEach(c)},m(t,n){D(t,e,n),v(e,l)},p(t,n){n&2&&ae(l,t[1])},d(t){t&&c(e)}}}function zs(i){let e,l,t=i[1]&&Ml(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],a={};for(let r=0;r<n.length;r+=1)a=me(a,n[r]);return{c(){e=ge("svg"),t&&t.c(),l=ge("path"),this.h()},l(r){e=be(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=E(e);t&&t.l(s),l=be(s,"path",{d:!0}),E(l).forEach(c),s.forEach(c),this.h()},h(){S(l,"d","M22 16L12 26 10.6 24.6 19.2 16 10.6 7.4 12 6z"),Fe(e,a)},m(r,s){D(r,e,s),t&&t.m(e,null),v(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=Ml(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Fe(e,a=Ke(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:O,o:O,d(r){r&&c(e),t&&t.d()}}}function As(i,e,l){let t,n;const a=["size","title"];let r=Se(e,a),{size:s=16}=e,{title:o=void 0}=e;return i.$$set=f=>{l(5,e=me(me({},e),Te(f))),l(3,r=Se(e,a)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,o=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||o),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Te(e),[s,o,n,r,t]}class mr extends $e{constructor(e){super(),Ee(this,e,As,zs,ke,{size:0,title:1})}}function zl(i){let e,l;return{c(){e=ge("title"),l=q(i[1])},l(t){e=be(t,"title",{});var n=E(e);l=j(n,i[1]),n.forEach(c)},m(t,n){D(t,e,n),v(e,l)},p(t,n){n&2&&ae(l,t[1])},d(t){t&&c(e)}}}function Bs(i){let e,l,t=i[1]&&zl(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],a={};for(let r=0;r<n.length;r+=1)a=me(a,n[r]);return{c(){e=ge("svg"),t&&t.c(),l=ge("path"),this.h()},l(r){e=be(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=E(e);t&&t.l(s),l=be(s,"path",{d:!0}),E(l).forEach(c),s.forEach(c),this.h()},h(){S(l,"d","M26 24v4H6V24H4v4H4a2 2 0 002 2H26a2 2 0 002-2h0V24zM26 14L24.59 12.59 17 20.17 17 2 15 2 15 20.17 7.41 12.59 6 14 16 24 26 14z"),Fe(e,a)},m(r,s){D(r,e,s),t&&t.m(e,null),v(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=zl(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Fe(e,a=Ke(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:O,o:O,d(r){r&&c(e),t&&t.d()}}}function Ps(i,e,l){let t,n;const a=["size","title"];let r=Se(e,a),{size:s=16}=e,{title:o=void 0}=e;return i.$$set=f=>{l(5,e=me(me({},e),Te(f))),l(3,r=Se(e,a)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,o=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||o),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Te(e),[s,o,n,r,t]}class Fs extends $e{constructor(e){super(),Ee(this,e,Ps,Bs,ke,{size:0,title:1})}}function Al(i){let e,l;return{c(){e=ge("title"),l=q(i[1])},l(t){e=be(t,"title",{});var n=E(e);l=j(n,i[1]),n.forEach(c)},m(t,n){D(t,e,n),v(e,l)},p(t,n){n&2&&ae(l,t[1])},d(t){t&&c(e)}}}function Rs(i){let e,l,t=i[1]&&Al(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],a={};for(let r=0;r<n.length;r+=1)a=me(a,n[r]);return{c(){e=ge("svg"),t&&t.c(),l=ge("path"),this.h()},l(r){e=be(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=E(e);t&&t.l(s),l=be(s,"path",{d:!0}),E(l).forEach(c),s.forEach(c),this.h()},h(){S(l,"d","M16 7a3 3 0 113-3A3.0033 3.0033 0 0116 7zm0-4a1 1 0 101 1A1.001 1.001 0 0016 3zM11 30a3 3 0 113-3A3.0033 3.0033 0 0111 30zm0-4a1 1 0 101 1A1.001 1.001 0 0011 26zM7 11a3 3 0 113-3A3.0033 3.0033 0 017 11zM7 7A1 1 0 108 8 1.001 1.001 0 007 7zM21 30a3 3 0 113-3A3.0033 3.0033 0 0121 30zm0-4a1 1 0 101 1A1.001 1.001 0 0021 26zM25 11a3 3 0 113-3A3.0033 3.0033 0 0125 11zm0-4a1 1 0 101 1A1.001 1.001 0 0025 7zM4 21a3 3 0 113-3A3.0033 3.0033 0 014 21zm0-4a1 1 0 101 1A1.001 1.001 0 004 17zM28 21a3 3 0 113-3A3.0033 3.0033 0 0128 21zm0-4a1 1 0 101 1A1.001 1.001 0 0028 17zM16 22a6 6 0 116-6A6.0069 6.0069 0 0116 22zm0-10a4 4 0 104 4A4.0045 4.0045 0 0016 12z"),Fe(e,a)},m(r,s){D(r,e,s),t&&t.m(e,null),v(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=Al(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Fe(e,a=Ke(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:O,o:O,d(r){r&&c(e),t&&t.d()}}}function Hs(i,e,l){let t,n;const a=["size","title"];let r=Se(e,a),{size:s=16}=e,{title:o=void 0}=e;return i.$$set=f=>{l(5,e=me(me({},e),Te(f))),l(3,r=Se(e,a)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,o=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||o),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Te(e),[s,o,n,r,t]}class Ls extends $e{constructor(e){super(),Ee(this,e,Hs,Rs,ke,{size:0,title:1})}}function Bl(i){let e,l;return{c(){e=ge("title"),l=q(i[1])},l(t){e=be(t,"title",{});var n=E(e);l=j(n,i[1]),n.forEach(c)},m(t,n){D(t,e,n),v(e,l)},p(t,n){n&2&&ae(l,t[1])},d(t){t&&c(e)}}}function Os(i){let e,l,t=i[1]&&Bl(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],a={};for(let r=0;r<n.length;r+=1)a=me(a,n[r]);return{c(){e=ge("svg"),t&&t.c(),l=ge("path"),this.h()},l(r){e=be(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=E(e);t&&t.l(s),l=be(s,"path",{d:!0}),E(l).forEach(c),s.forEach(c),this.h()},h(){S(l,"d","M26 24v4H6V24H4v4l.0076-.0049A1.9977 1.9977 0 006 30H26a2 2 0 002-2h0V24zM6 12L7.411 13.405 15 5.825 15 24 17 24 17 5.825 24.591 13.405 26 12 16 2 6 12z"),Fe(e,a)},m(r,s){D(r,e,s),t&&t.m(e,null),v(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=Bl(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Fe(e,a=Ke(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:O,o:O,d(r){r&&c(e),t&&t.d()}}}function qs(i,e,l){let t,n;const a=["size","title"];let r=Se(e,a),{size:s=16}=e,{title:o=void 0}=e;return i.$$set=f=>{l(5,e=me(me({},e),Te(f))),l(3,r=Se(e,a)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,o=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||o),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Te(e),[s,o,n,r,t]}class js extends $e{constructor(e){super(),Ee(this,e,qs,Os,ke,{size:0,title:1})}}function Pl(i){let e,l;return{c(){e=ge("title"),l=q(i[1])},l(t){e=be(t,"title",{});var n=E(e);l=j(n,i[1]),n.forEach(c)},m(t,n){D(t,e,n),v(e,l)},p(t,n){n&2&&ae(l,t[1])},d(t){t&&c(e)}}}function Us(i){let e,l,t=i[1]&&Pl(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],a={};for(let r=0;r<n.length;r+=1)a=me(a,n[r]);return{c(){e=ge("svg"),t&&t.c(),l=ge("path"),this.h()},l(r){e=be(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=E(e);t&&t.l(s),l=be(s,"path",{d:!0}),E(l).forEach(c),s.forEach(c),this.h()},h(){S(l,"d","M18,28H14a2,2,0,0,1-2-2V18.41L4.59,11A2,2,0,0,1,4,9.59V6A2,2,0,0,1,6,4H26a2,2,0,0,1,2,2V9.59A2,2,0,0,1,27.41,11L20,18.41V26A2,2,0,0,1,18,28ZM6,6V9.59l8,8V26h4V17.59l8-8V6Z"),Fe(e,a)},m(r,s){D(r,e,s),t&&t.m(e,null),v(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=Pl(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Fe(e,a=Ke(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:O,o:O,d(r){r&&c(e),t&&t.d()}}}function Qs(i,e,l){let t,n;const a=["size","title"];let r=Se(e,a),{size:s=16}=e,{title:o=void 0}=e;return i.$$set=f=>{l(5,e=me(me({},e),Te(f))),l(3,r=Se(e,a)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,o=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||o),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Te(e),[s,o,n,r,t]}class Ys extends $e{constructor(e){super(),Ee(this,e,Qs,Us,ke,{size:0,title:1})}}function Fl(i){let e,l;return{c(){e=ge("title"),l=q(i[1])},l(t){e=be(t,"title",{});var n=E(e);l=j(n,i[1]),n.forEach(c)},m(t,n){D(t,e,n),v(e,l)},p(t,n){n&2&&ae(l,t[1])},d(t){t&&c(e)}}}function Gs(i){let e,l,t=i[1]&&Fl(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],a={};for(let r=0;r<n.length;r+=1)a=me(a,n[r]);return{c(){e=ge("svg"),t&&t.c(),l=ge("path"),this.h()},l(r){e=be(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=E(e);t&&t.l(s),l=be(s,"path",{d:!0}),E(l).forEach(c),s.forEach(c),this.h()},h(){S(l,"d","M11.17,6l3.42,3.41.58.59H28V26H4V6h7.17m0-2H4A2,2,0,0,0,2,6V26a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2H16L12.59,4.59A2,2,0,0,0,11.17,4Z"),Fe(e,a)},m(r,s){D(r,e,s),t&&t.m(e,null),v(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=Fl(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Fe(e,a=Ke(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:O,o:O,d(r){r&&c(e),t&&t.d()}}}function Ws(i,e,l){let t,n;const a=["size","title"];let r=Se(e,a),{size:s=16}=e,{title:o=void 0}=e;return i.$$set=f=>{l(5,e=me(me({},e),Te(f))),l(3,r=Se(e,a)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,o=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||o),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Te(e),[s,o,n,r,t]}class Js extends $e{constructor(e){super(),Ee(this,e,Ws,Gs,ke,{size:0,title:1})}}function Rl(i){let e,l;return{c(){e=ge("title"),l=q(i[1])},l(t){e=be(t,"title",{});var n=E(e);l=j(n,i[1]),n.forEach(c)},m(t,n){D(t,e,n),v(e,l)},p(t,n){n&2&&ae(l,t[1])},d(t){t&&c(e)}}}function Ks(i){let e,l,t,n,a,r,s,o,f,u=i[1]&&Rl(i),p=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],m={};for(let d=0;d<p.length;d+=1)m=me(m,p[d]);return{c(){e=ge("svg"),u&&u.c(),l=ge("path"),t=ge("circle"),n=ge("path"),a=ge("circle"),r=ge("path"),s=ge("circle"),o=ge("path"),f=ge("path"),this.h()},l(d){e=be(d,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var _=E(e);u&&u.l(_),l=be(_,"path",{d:!0}),E(l).forEach(c),t=be(_,"circle",{cx:!0,cy:!0,r:!0}),E(t).forEach(c),n=be(_,"path",{d:!0}),E(n).forEach(c),a=be(_,"circle",{cx:!0,cy:!0,r:!0}),E(a).forEach(c),r=be(_,"path",{d:!0}),E(r).forEach(c),s=be(_,"circle",{cx:!0,cy:!0,r:!0}),E(s).forEach(c),o=be(_,"path",{d:!0}),E(o).forEach(c),f=be(_,"path",{d:!0}),E(f).forEach(c),_.forEach(c),this.h()},h(){S(l,"d","M20 25H27V27H20zM22 29H25V31H22zM27 23h-2c0-1.1.4-2 1.2-2.8l.5-.5c.8-.8 1.3-2 1.3-3.2 0-2.5-2-4.5-4.5-4.5S19 14 19 16.5c0 1.2.5 2.3 1.3 3.2l.5.5C21.6 21 22 21.9 22 23h-2c0-.5-.2-1-.6-1.4l-.5-.5c-1.2-1.2-1.9-2.9-1.9-4.6 0-3.6 2.9-6.5 6.5-6.5s6.5 2.9 6.5 6.5c0 1.7-.7 3.4-1.9 4.6l-.5.5C27.2 22 27 22.5 27 23zM6 22H14V24H6z"),S(t,"cx","12"),S(t,"cy","19"),S(t,"r","1"),S(n,"d","M6 18H9V20H6zM6 14H13V16H6zM10 10H17V12H10z"),S(a,"cx","7"),S(a,"cy","11"),S(a,"r","1"),S(r,"d","M16 6H20V8H16z"),S(s,"cx","13"),S(s,"cy","7"),S(s,"r","1"),S(o,"d","M6 6H10V8H6z"),S(f,"d","M18,28H4V4l18,0v4h2V4c0-1.1-0.9-2-2-2H4C2.9,2,2,2.9,2,4v24c0,1.1,0.9,2,2,2h14V28z"),Fe(e,m)},m(d,_){D(d,e,_),u&&u.m(e,null),v(e,l),v(e,t),v(e,n),v(e,a),v(e,r),v(e,s),v(e,o),v(e,f)},p(d,[_]){d[1]?u?u.p(d,_):(u=Rl(d),u.c(),u.m(e,l)):u&&(u.d(1),u=null),Fe(e,m=Ke(p,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},_&1&&{width:d[0]},_&1&&{height:d[0]},_&4&&d[2],_&8&&d[3]]))},i:O,o:O,d(d){d&&c(e),u&&u.d()}}}function Zs(i,e,l){let t,n;const a=["size","title"];let r=Se(e,a),{size:s=16}=e,{title:o=void 0}=e;return i.$$set=f=>{l(5,e=me(me({},e),Te(f))),l(3,r=Se(e,a)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,o=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||o),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Te(e),[s,o,n,r,t]}class Xs extends $e{constructor(e){super(),Ee(this,e,Zs,Ks,ke,{size:0,title:1})}}function Hl(i){let e,l;return{c(){e=ge("title"),l=q(i[1])},l(t){e=be(t,"title",{});var n=E(e);l=j(n,i[1]),n.forEach(c)},m(t,n){D(t,e,n),v(e,l)},p(t,n){n&2&&ae(l,t[1])},d(t){t&&c(e)}}}function xs(i){let e,l,t,n=i[1]&&Hl(i),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],r={};for(let s=0;s<a.length;s+=1)r=me(r,a[s]);return{c(){e=ge("svg"),n&&n.c(),l=ge("path"),t=ge("path"),this.h()},l(s){e=be(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var o=E(e);n&&n.l(o),l=be(o,"path",{d:!0}),E(l).forEach(c),t=be(o,"path",{d:!0}),E(t).forEach(c),o.forEach(c),this.h()},h(){S(l,"d","M17 22L17 14 13 14 13 16 15 16 15 22 12 22 12 24 20 24 20 22 17 22zM16 8a1.5 1.5 0 101.5 1.5A1.5 1.5 0 0016 8z"),S(t,"d","M16,30A14,14,0,1,1,30,16,14,14,0,0,1,16,30ZM16,4A12,12,0,1,0,28,16,12,12,0,0,0,16,4Z"),Fe(e,r)},m(s,o){D(s,e,o),n&&n.m(e,null),v(e,l),v(e,t)},p(s,[o]){s[1]?n?n.p(s,o):(n=Hl(s),n.c(),n.m(e,l)):n&&(n.d(1),n=null),Fe(e,r=Ke(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},o&1&&{width:s[0]},o&1&&{height:s[0]},o&4&&s[2],o&8&&s[3]]))},i:O,o:O,d(s){s&&c(e),n&&n.d()}}}function ea(i,e,l){let t,n;const a=["size","title"];let r=Se(e,a),{size:s=16}=e,{title:o=void 0}=e;return i.$$set=f=>{l(5,e=me(me({},e),Te(f))),l(3,r=Se(e,a)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,o=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||o),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Te(e),[s,o,n,r,t]}class Bt extends $e{constructor(e){super(),Ee(this,e,ea,xs,ke,{size:0,title:1})}}function Ll(i){let e,l;return{c(){e=ge("title"),l=q(i[1])},l(t){e=be(t,"title",{});var n=E(e);l=j(n,i[1]),n.forEach(c)},m(t,n){D(t,e,n),v(e,l)},p(t,n){n&2&&ae(l,t[1])},d(t){t&&c(e)}}}function ta(i){let e,l,t=i[1]&&Ll(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],a={};for(let r=0;r<n.length;r+=1)a=me(a,n[r]);return{c(){e=ge("svg"),t&&t.c(),l=ge("path"),this.h()},l(r){e=be(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=E(e);t&&t.l(s),l=be(s,"path",{d:!0}),E(l).forEach(c),s.forEach(c),this.h()},h(){S(l,"d","M30 6L26 6 26 2 24 2 24 6 20 6 20 8 24 8 24 12 26 12 26 8 30 8 30 6zM24 28.5859l-5.9751-5.9751a9.0234 9.0234 0 10-1.4141 1.4141L22.5859 30zM4 17a7 7 0 117 7A7.0078 7.0078 0 014 17z"),Fe(e,a)},m(r,s){D(r,e,s),t&&t.m(e,null),v(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=Ll(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Fe(e,a=Ke(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:O,o:O,d(r){r&&c(e),t&&t.d()}}}function la(i,e,l){let t,n;const a=["size","title"];let r=Se(e,a),{size:s=16}=e,{title:o=void 0}=e;return i.$$set=f=>{l(5,e=me(me({},e),Te(f))),l(3,r=Se(e,a)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,o=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||o),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Te(e),[s,o,n,r,t]}class _r extends $e{constructor(e){super(),Ee(this,e,la,ta,ke,{size:0,title:1})}}function Ol(i){let e,l;return{c(){e=ge("title"),l=q(i[1])},l(t){e=be(t,"title",{});var n=E(e);l=j(n,i[1]),n.forEach(c)},m(t,n){D(t,e,n),v(e,l)},p(t,n){n&2&&ae(l,t[1])},d(t){t&&c(e)}}}function na(i){let e,l,t=i[1]&&Ol(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],a={};for(let r=0;r<n.length;r+=1)a=me(a,n[r]);return{c(){e=ge("svg"),t&&t.c(),l=ge("path"),this.h()},l(r){e=be(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=E(e);t&&t.l(s),l=be(s,"path",{d:!0}),E(l).forEach(c),s.forEach(c),this.h()},h(){S(l,"d","M18 22L19.414 20.586 23 24.172 23 4 25 4 25 24.172 28.586 20.586 30 22 24 28 18 22zM2 18H16V20H2zM6 12H16V14H6zM10 6H16V8H10z"),Fe(e,a)},m(r,s){D(r,e,s),t&&t.m(e,null),v(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=Ol(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Fe(e,a=Ke(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:O,o:O,d(r){r&&c(e),t&&t.d()}}}function ia(i,e,l){let t,n;const a=["size","title"];let r=Se(e,a),{size:s=16}=e,{title:o=void 0}=e;return i.$$set=f=>{l(5,e=me(me({},e),Te(f))),l(3,r=Se(e,a)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,o=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||o),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Te(e),[s,o,n,r,t]}class hr extends $e{constructor(e){super(),Ee(this,e,ia,na,ke,{size:0,title:1})}}function ql(i){let e,l;return{c(){e=ge("title"),l=q(i[1])},l(t){e=be(t,"title",{});var n=E(e);l=j(n,i[1]),n.forEach(c)},m(t,n){D(t,e,n),v(e,l)},p(t,n){n&2&&ae(l,t[1])},d(t){t&&c(e)}}}function ra(i){let e,l,t=i[1]&&ql(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],a={};for(let r=0;r<n.length;r+=1)a=me(a,n[r]);return{c(){e=ge("svg"),t&&t.c(),l=ge("path"),this.h()},l(r){e=be(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=E(e);t&&t.l(s),l=be(s,"path",{d:!0}),E(l).forEach(c),s.forEach(c),this.h()},h(){S(l,"d","M18 22L19.414 20.586 23 24.172 23 4 25 4 25 24.172 28.586 20.586 30 22 24 28 18 22zM2 6H16V8H2zM6 12H16V14H6zM10 18H16V20H10z"),Fe(e,a)},m(r,s){D(r,e,s),t&&t.m(e,null),v(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=ql(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Fe(e,a=Ke(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:O,o:O,d(r){r&&c(e),t&&t.d()}}}function sa(i,e,l){let t,n;const a=["size","title"];let r=Se(e,a),{size:s=16}=e,{title:o=void 0}=e;return i.$$set=f=>{l(5,e=me(me({},e),Te(f))),l(3,r=Se(e,a)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,o=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||o),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Te(e),[s,o,n,r,t]}class pr extends $e{constructor(e){super(),Ee(this,e,sa,ra,ke,{size:0,title:1})}}function jl(i){let e,l;return{c(){e=ge("title"),l=q(i[1])},l(t){e=be(t,"title",{});var n=E(e);l=j(n,i[1]),n.forEach(c)},m(t,n){D(t,e,n),v(e,l)},p(t,n){n&2&&ae(l,t[1])},d(t){t&&c(e)}}}function aa(i){let e,l,t=i[1]&&jl(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],a={};for(let r=0;r<n.length;r+=1)a=me(a,n[r]);return{c(){e=ge("svg"),t&&t.c(),l=ge("path"),this.h()},l(r){e=be(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=E(e);t&&t.l(s),l=be(s,"path",{d:!0}),E(l).forEach(c),s.forEach(c),this.h()},h(){S(l,"d","M4 6H22V8H4zM4 12H22V14H4zM4 18H22V20H4zM4 24H22V26H4zM26 6H28V8H26zM26 12H28V14H26zM26 18H28V20H26zM26 24H28V26H26z"),Fe(e,a)},m(r,s){D(r,e,s),t&&t.m(e,null),v(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=jl(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Fe(e,a=Ke(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:O,o:O,d(r){r&&c(e),t&&t.d()}}}function oa(i,e,l){let t,n;const a=["size","title"];let r=Se(e,a),{size:s=16}=e,{title:o=void 0}=e;return i.$$set=f=>{l(5,e=me(me({},e),Te(f))),l(3,r=Se(e,a)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,o=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||o),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Te(e),[s,o,n,r,t]}class fa extends $e{constructor(e){super(),Ee(this,e,oa,aa,ke,{size:0,title:1})}}function Ul(i){let e,l;return{c(){e=ge("title"),l=q(i[1])},l(t){e=be(t,"title",{});var n=E(e);l=j(n,i[1]),n.forEach(c)},m(t,n){D(t,e,n),v(e,l)},p(t,n){n&2&&ae(l,t[1])},d(t){t&&c(e)}}}function ua(i){let e,l,t,n,a=i[1]&&Ul(i),r=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],s={};for(let o=0;o<r.length;o+=1)s=me(s,r[o]);return{c(){e=ge("svg"),a&&a.c(),l=ge("circle"),t=ge("path"),n=ge("path"),this.h()},l(o){e=be(o,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var f=E(e);a&&a.l(f),l=be(f,"circle",{cx:!0,cy:!0,r:!0}),E(l).forEach(c),t=be(f,"path",{d:!0}),E(t).forEach(c),n=be(f,"path",{d:!0}),E(n).forEach(c),f.forEach(c),this.h()},h(){S(l,"cx","10"),S(l,"cy","14"),S(l,"r","2"),S(t,"d","M16,30a1,1,0,0,1-.71-.29L4.59,19A2,2,0,0,1,4,17.59V10A2,2,0,0,1,6,8h7.59A2,2,0,0,1,15,8.59l10.71,10.7a1,1,0,0,1,0,1.42l-9,9A1,1,0,0,1,16,30ZM6,10v7.59l10,10L23.59,20l-10-10Z"),S(n,"d","M27.71,13.29,17,2.59A2,2,0,0,0,15.59,2H8A2,2,0,0,0,6,4V6H8V4h7.59l10,10-1.3,1.29,1.42,1.42,2-2A1,1,0,0,0,27.71,13.29Z"),Fe(e,s)},m(o,f){D(o,e,f),a&&a.m(e,null),v(e,l),v(e,t),v(e,n)},p(o,[f]){o[1]?a?a.p(o,f):(a=Ul(o),a.c(),a.m(e,l)):a&&(a.d(1),a=null),Fe(e,s=Ke(r,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},f&1&&{width:o[0]},f&1&&{height:o[0]},f&4&&o[2],f&8&&o[3]]))},i:O,o:O,d(o){o&&c(e),a&&a.d()}}}function ca(i,e,l){let t,n;const a=["size","title"];let r=Se(e,a),{size:s=16}=e,{title:o=void 0}=e;return i.$$set=f=>{l(5,e=me(me({},e),Te(f))),l(3,r=Se(e,a)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,o=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||o),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Te(e),[s,o,n,r,t]}class da extends $e{constructor(e){super(),Ee(this,e,ca,ua,ke,{size:0,title:1})}}function Ql(i){let e,l;return{c(){e=ge("title"),l=q(i[1])},l(t){e=be(t,"title",{});var n=E(e);l=j(n,i[1]),n.forEach(c)},m(t,n){D(t,e,n),v(e,l)},p(t,n){n&2&&ae(l,t[1])},d(t){t&&c(e)}}}function ma(i){let e,l,t,n=i[1]&&Ql(i),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],r={};for(let s=0;s<a.length;s+=1)r=me(r,a[s]);return{c(){e=ge("svg"),n&&n.c(),l=ge("path"),t=ge("path"),this.h()},l(s){e=be(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var o=E(e);n&&n.l(o),l=be(o,"path",{d:!0}),E(l).forEach(c),t=be(o,"path",{d:!0}),E(t).forEach(c),o.forEach(c),this.h()},h(){S(l,"d","M23.092 10.3218L30 3.4141 28.5859 2 2 28.5859 3.4141 30l6.9077-6.9077 6.3218 6.3223a2.001 2.001 0 002.8286 0l9.9424-9.9424a2.001 2.001 0 000-2.8286zM18.0579 28l-6.3218-6.3223 9.9419-9.9419L28 18.0576zM10 14a4 4 0 114-4A4.0045 4.0045 0 0110 14zm0-6a2 2 0 101.998 2.0044A2.002 2.002 0 0010 8z"),S(t,"d","M7.4927,20.2627l1.414-1.4141L4,13.9414V4h9.9417l4.9069,4.9067,1.4141-1.414L15.3555,2.5859A2,2,0,0,0,13.9414,2H4A2,2,0,0,0,2,4v9.9414a2,2,0,0,0,.5857,1.4141Z"),Fe(e,r)},m(s,o){D(s,e,o),n&&n.m(e,null),v(e,l),v(e,t)},p(s,[o]){s[1]?n?n.p(s,o):(n=Ql(s),n.c(),n.m(e,l)):n&&(n.d(1),n=null),Fe(e,r=Ke(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},o&1&&{width:s[0]},o&1&&{height:s[0]},o&4&&s[2],o&8&&s[3]]))},i:O,o:O,d(s){s&&c(e),n&&n.d()}}}function _a(i,e,l){let t,n;const a=["size","title"];let r=Se(e,a),{size:s=16}=e,{title:o=void 0}=e;return i.$$set=f=>{l(5,e=me(me({},e),Te(f))),l(3,r=Se(e,a)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,o=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||o),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Te(e),[s,o,n,r,t]}class ha extends $e{constructor(e){super(),Ee(this,e,_a,ma,ke,{size:0,title:1})}}function Yl(i){let e;return{c(){e=N("div"),this.h()},l(l){e=T(l,"DIV",{id:!0,style:!0}),E(e).forEach(c),this.h()},h(){S(e,"id","svelte-infinite-scroll"),Mt(e,"width","0")},m(l,t){D(l,e,t),i[11](e)},p:O,d(l){l&&c(e),i[11](null)}}}function pa(i){let e,l=!i[1]&&!i[0]&&Yl(i);return{c(){l&&l.c(),e=ce()},l(t){l&&l.l(t),e=ce()},m(t,n){l&&l.m(t,n),D(t,e,n)},p(t,[n]){!t[1]&&!t[0]?l?l.p(t,n):(l=Yl(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:O,o:O,d(t){l&&l.d(t),t&&c(e)}}}function ga(i,e,l){let{threshold:t=0}=e,{horizontal:n=!1}=e,{elementScroll:a=null}=e,{hasMore:r=!0}=e,{reverse:s=!1}=e,{window:o=!1}=e;const f=Dt();let u=!1,p,m,d,_;const h=g=>{if(!r)return;const y=g.target;k(y,s,n)<=t?(!u&&r&&(f("loadMore"),l(8,m=y.scrollHeight),l(9,d=y.scrollTop)),l(7,u=!0)):l(7,u=!1)},k=(g,y,I)=>{const V=g.documentElement?g.documentElement:g;return y?I?V.scrollLeft:V.scrollTop:I?V.scrollWidth-V.clientWidth-V.scrollLeft:V.scrollHeight-V.clientHeight-V.scrollTop};ji(()=>{o?l(10,_=document):a?l(10,_=a):l(10,_=p.parentNode)}),$r(()=>{_&&(_.removeEventListener("scroll",h),_.removeEventListener("resize",h))});function $(g){Ue[g?"unshift":"push"](()=>{p=g,l(2,p)})}return i.$$set=g=>{"threshold"in g&&l(3,t=g.threshold),"horizontal"in g&&l(4,n=g.horizontal),"elementScroll"in g&&l(0,a=g.elementScroll),"hasMore"in g&&l(5,r=g.hasMore),"reverse"in g&&l(6,s=g.reverse),"window"in g&&l(1,o=g.window)},i.$$.update=()=>{i.$$.dirty&1088&&_&&(s&&l(10,_.scrollTop=_.scrollHeight,_),_.addEventListener("scroll",h),_.addEventListener("resize",h)),i.$$.dirty&1984&&u&&s&&l(10,_.scrollTop=_.scrollHeight-m+d,_)},[a,o,p,t,n,r,s,u,m,d,_,$]}class ba extends $e{constructor(e){super(),Ee(this,e,ga,pa,ke,{threshold:3,horizontal:4,elementScroll:0,hasMore:5,reverse:6,window:1})}}function va(i){let e,l,t,n,a,r,s,o,f,u;t=new Nr({});const p=i[7].default,m=Ft(p,i,i[10],null);return{c(){e=N("div"),l=N("button"),P(t.$$.fragment),a=U(),r=N("span"),m&&m.c(),this.h()},l(d){e=T(d,"DIV",{class:!0});var _=E(e);l=T(_,"BUTTON",{class:!0});var h=E(l);L(t.$$.fragment,h),h.forEach(c),a=Q(_),r=T(_,"SPAN",{class:!0});var k=E(r);m&&m.l(k),k.forEach(c),_.forEach(c),this.h()},h(){l.disabled=i[1],S(l,"class","p-0 opacity-50 hover:opacity-100"),S(r,"class","truncate"),S(e,"class","removable-tag flex items-center gap-x-1")},m(d,_){D(d,e,_),v(e,l),F(t,l,null),v(e,a),v(e,r),m&&m.m(r,null),o=!0,f||(u=[He(n=Le.call(null,l,{text:i[1]?i[2]:i[3]})),Pe(l,"click",Er(i[8])),He(s=Le.call(null,r,{text:i[4]}))],f=!0)},p(d,_){(!o||_&2)&&(l.disabled=d[1]),n&&et(n.update)&&_&14&&n.update.call(null,{text:d[1]?d[2]:d[3]}),m&&m.p&&(!o||_&1024)&&Rt(m,p,d,d[10],o?Lt(p,d[10],_,null):Ht(d[10]),null),s&&et(s.update)&&_&16&&s.update.call(null,{text:d[4]})},i(d){o||(b(t.$$.fragment,d),b(m,d),o=!0)},o(d){w(t.$$.fragment,d),w(m,d),o=!1},d(d){d&&c(e),R(t),m&&m.d(d),f=!1,dt(u)}}}function wa(i){let e,l;const t=[{type:i[0]},i[6]];let n={$$slots:{default:[va]},$$scope:{ctx:i}};for(let a=0;a<t.length;a+=1)n=me(n,t[a]);return e=new mt({props:n}),e.$on("click",i[9]),{c(){P(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,r){F(e,a,r),l=!0},p(a,[r]){const s=r&65?Ke(t,[r&1&&{type:a[0]},r&64&&al(a[6])]):{};r&1054&&(s.$$scope={dirty:r,ctx:a}),e.$set(s)},i(a){l||(b(e.$$.fragment,a),l=!0)},o(a){w(e.$$.fragment,a),l=!1},d(a){R(e,a)}}}function ka(i,e,l){const t=["type","removeDisabled","removeDisabledHelperText","closeHelperText","clickHelperText"];let n=Se(e,t),{$$slots:a={},$$scope:r}=e;const s=Dt();let{type:o}=e,{removeDisabled:f=!1}=e,{removeDisabledHelperText:u=void 0}=e,{closeHelperText:p=void 0}=e,{clickHelperText:m=void 0}=e;const d=()=>s("remove");function _(h){nt.call(this,i,h)}return i.$$set=h=>{e=me(me({},e),Te(h)),l(6,n=Se(e,t)),"type"in h&&l(0,o=h.type),"removeDisabled"in h&&l(1,f=h.removeDisabled),"removeDisabledHelperText"in h&&l(2,u=h.removeDisabledHelperText),"closeHelperText"in h&&l(3,p=h.closeHelperText),"clickHelperText"in h&&l(4,m=h.clickHelperText),"$$scope"in h&&l(10,r=h.$$scope)},[o,f,u,p,m,s,n,a,d,_,r]}class tl extends $e{constructor(e){super(),Ee(this,e,ka,wa,ke,{type:0,removeDisabled:1,removeDisabledHelperText:2,closeHelperText:3,clickHelperText:4})}}function $a(i){let e,l=(i[2]?"":i[5])+"",t,n,a=i[0][i[1].op]+"",r,s,o;return{c(){e=N("span"),t=q(l),n=U(),r=q(a),s=U(),o=q(i[4]),this.h()},l(f){e=T(f,"SPAN",{class:!0});var u=E(e);t=j(u,l),u.forEach(c),n=Q(f),r=j(f,a),s=Q(f),o=j(f,i[4]),this.h()},h(){S(e,"class","font-mono")},m(f,u){D(f,e,u),v(e,t),D(f,n,u),D(f,r,u),D(f,s,u),D(f,o,u)},p(f,u){u&36&&l!==(l=(f[2]?"":f[5])+"")&&ae(t,l),u&2&&a!==(a=f[0][f[1].op]+"")&&ae(r,a),u&16&&ae(o,f[4])},d(f){f&&c(e),f&&c(n),f&&c(r),f&&c(s),f&&c(o)}}}function Ea(i){let e,l,t=(i[2]?"":i[5])+"",n;return{c(){e=q("lacks "),l=N("span"),n=q(t),this.h()},l(a){e=j(a,"lacks "),l=T(a,"SPAN",{class:!0});var r=E(l);n=j(r,t),r.forEach(c),this.h()},h(){S(l,"class","font-mono")},m(a,r){D(a,e,r),D(a,l,r),v(l,n)},p(a,r){r&36&&t!==(t=(a[2]?"":a[5])+"")&&ae(n,t)},d(a){a&&c(e),a&&c(l)}}}function ya(i){let e,l,t=(i[2]?"":i[5])+"",n;return{c(){e=q("has "),l=N("span"),n=q(t),this.h()},l(a){e=j(a,"has "),l=T(a,"SPAN",{class:!0});var r=E(l);n=j(r,t),r.forEach(c),this.h()},h(){S(l,"class","font-mono")},m(a,r){D(a,e,r),D(a,l,r),v(l,n)},p(a,r){r&36&&t!==(t=(a[2]?"":a[5])+"")&&ae(n,t)},d(a){a&&c(e),a&&c(l)}}}function Ia(i){let e;function l(a,r){return a[1].op==="exists"?ya:a[1].op==="not_exists"?Ea:$a}let t=l(i),n=t(i);return{c(){n.c(),e=ce()},l(a){n.l(a),e=ce()},m(a,r){n.m(a,r),D(a,e,r)},p(a,r){t===(t=l(a))&&n?n.p(a,r):(n.d(1),n=t(a),n&&(n.c(),n.m(e.parentNode,e)))},d(a){n.d(a),a&&c(e)}}}function Sa(i){let e,l,t,n,a,r;return l=new tl({props:{interactive:!0,type:"magenta",$$slots:{default:[Ia]},$$scope:{ctx:i}}}),l.$on("click",i[12]),l.$on("remove",i[13]),{c(){e=N("div"),P(l.$$.fragment),this.h()},l(s){e=T(s,"DIV",{class:!0});var o=E(e);L(l.$$.fragment,o),o.forEach(c),this.h()},h(){S(e,"class","filter-pill items-center")},m(s,o){D(s,e,o),F(l,e,null),n=!0,a||(r=He(t=Le.call(null,e,{text:i[6]})),a=!0)},p(s,[o]){const f={};o&16438&&(f.$$scope={dirty:o,ctx:s}),l.$set(f),t&&et(t.update)&&o&64&&t.update.call(null,{text:s[6]})},i(s){n||(b(l.$$.fragment,s),n=!0)},o(s){w(l.$$.fragment,s),n=!1},d(s){s&&c(e),R(l),a=!1,r()}}}function Da(i,e,l){let t,n,a,r,s,o,f;const u={equals:"=",not_equal:"≠",less:"<",less_equal:"≤",greater:">",greater_equal:"≥",in:"in",exists:"exists",not_exists:"not exists",length_shorter:"len ≤",length_longer:"len ≥",ilike:"contains",regex_matches:"matches",not_regex_matches:"does not match"};let{filter:p}=e,{hidePath:m=!1}=e,{schema:d}=e;const _=lt();Ae(i,_,$=>l(7,f=$));const h=()=>pt({command:gt.EditFilter,namespace:f.namespace,datasetName:f.datasetName,path:r}),k=()=>_.removeFilter(p);return i.$$set=$=>{"filter"in $&&l(1,p=$.filter),"hidePath"in $&&l(2,m=$.hidePath),"schema"in $&&l(9,d=$.schema)},i.$$.update=()=>{i.$$.dirty&514&&l(11,t=fl(d,typeof p.path=="string"?[p.path]:p.path)),i.$$.dirty&2048&&l(10,n=t!=null?Tr(t):null),i.$$.dirty&2&&l(4,a=Me(p.value||"false")),i.$$.dirty&2&&l(3,r=ul(p.path)),i.$$.dirty&26&&l(6,s=p.op==="exists"?`has ${at(r)}`:p.op==="not_exists"?`lacks ${at(r)}`:`${at(r)} ${u[p.op]} ${a}`),i.$$.dirty&1032&&l(5,o=Jt(r,n))},[u,p,m,r,a,o,s,f,_,d,n,t,h,k]}class $l extends $e{constructor(e){super(),Ee(this,e,Da,Sa,ke,{FILTER_SHORTHANDS:0,filter:1,hidePath:2,schema:9})}get FILTER_SHORTHANDS(){return this.$$.ctx[0]}}function Gl(i){let e,l,t,n,a;return l=new dr({props:{title:"Previous group",size:24}}),{c(){e=N("button"),P(l.$$.fragment)},l(r){e=T(r,"BUTTON",{});var s=E(e);L(l.$$.fragment,s),s.forEach(c)},m(r,s){D(r,e,s),F(l,e,null),t=!0,n||(a=Pe(e,"click",i[13]),n=!0)},p:O,i(r){t||(b(l.$$.fragment,r),t=!0)},o(r){w(l.$$.fragment,r),t=!1},d(r){r&&c(e),R(l),n=!1,a()}}}function Na(i){let e,l;return e=new it({props:{class:"!w-40"}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p:O,i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Ta(i){let e=Me(i[2])+"",l;return{c(){l=q(e)},l(t){l=j(t,e)},m(t,n){D(t,l,n)},p(t,n){n&4&&e!==(e=Me(t[2])+"")&&ae(l,e)},i:O,o:O,d(t){t&&c(l)}}}function Wl(i){let e,l,t,n,a;return l=new mr({props:{title:"Next group",size:24}}),{c(){e=N("button"),P(l.$$.fragment)},l(r){e=T(r,"BUTTON",{});var s=E(e);L(l.$$.fragment,s),s.forEach(c)},m(r,s){D(r,e,s),F(l,e,null),t=!0,n||(a=Pe(e,"click",i[14]),n=!0)},p:O,i(r){t||(b(l.$$.fragment,r),t=!0)},o(r){w(l.$$.fragment,r),t=!1},d(r){r&&c(e),R(l),n=!1,a()}}}function Va(i){let e,l,t,n,a,r,s,o,f,u,p=Jt(i[0].path)+"",m,d,_,h,k=i[3]!=null&&i[3]>0&&Gl(i);const $=[Ta,Na],g=[];function y(V,C){return V[2]!=null?0:1}r=y(i),s=g[r]=$[r](i);let I=i[3]!=null&&i[1]&&i[3]<i[1].length-1&&Wl(i);return{c(){e=N("div"),l=N("div"),k&&k.c(),t=U(),n=N("div"),a=N("div"),s.c(),o=U(),f=N("div"),u=N("code"),m=q(p),d=U(),_=N("div"),I&&I.c(),this.h()},l(V){e=T(V,"DIV",{class:!0});var C=E(e);l=T(C,"DIV",{class:!0});var M=E(l);k&&k.l(M),M.forEach(c),t=Q(C),n=T(C,"DIV",{class:!0});var A=E(n);a=T(A,"DIV",{class:!0});var H=E(a);s.l(H),H.forEach(c),o=Q(A),f=T(A,"DIV",{class:!0});var J=E(f);u=T(J,"CODE",{});var G=E(u);m=j(G,p),G.forEach(c),J.forEach(c),A.forEach(c),d=Q(C),_=T(C,"DIV",{class:!0});var W=E(_);I&&I.l(W),W.forEach(c),C.forEach(c),this.h()},h(){S(l,"class","flex-0"),S(a,"class","min-w-0 max-w-lg truncate text-center text-lg"),S(f,"class","flex-0 text-center text-gray-600"),S(n,"class","flex-col items-center justify-items-center"),S(_,"class","flex-0"),S(e,"class","mx-5 my-2 flex items-center justify-between rounded-lg border border-neutral-300 bg-neutral-100 py-2")},m(V,C){D(V,e,C),v(e,l),k&&k.m(l,null),v(e,t),v(e,n),v(n,a),g[r].m(a,null),v(n,o),v(n,f),v(f,u),v(u,m),v(e,d),v(e,_),I&&I.m(_,null),h=!0},p(V,[C]){V[3]!=null&&V[3]>0?k?(k.p(V,C),C&8&&b(k,1)):(k=Gl(V),k.c(),b(k,1),k.m(l,null)):k&&(ie(),w(k,1,1,()=>{k=null}),re());let M=r;r=y(V),r===M?g[r].p(V,C):(ie(),w(g[M],1,1,()=>{g[M]=null}),re(),s=g[r],s?s.p(V,C):(s=g[r]=$[r](V),s.c()),b(s,1),s.m(a,null)),(!h||C&1)&&p!==(p=Jt(V[0].path)+"")&&ae(m,p),V[3]!=null&&V[1]&&V[3]<V[1].length-1?I?(I.p(V,C),C&10&&b(I,1)):(I=Wl(V),I.c(),b(I,1),I.m(_,null)):I&&(ie(),w(I,1,1,()=>{I=null}),re())},i(V){h||(b(k),b(s),b(I),h=!0)},o(V){w(k),w(s),w(I),h=!1},d(V){V&&c(e),k&&k.d(),g[r].d(),I&&I.d()}}}function Ca(i,e,l){let t,n,a,r,s,o,f,u,p=O,m=()=>(p(),p=Ne(s,I=>l(11,u=I)),s),d;i.$$.on_destroy.push(()=>p());let{groupBy:_}=e,{schema:h}=e,k=lt();Ae(i,k,I=>l(12,d=I));function $(I){if(t==null||o==null||f==null)return;const V=I?o[f+1][0]:o[f-1][0];k.setGroupBy(_.path,V)}const g=()=>$(!1),y=()=>$(!0);return i.$$set=I=>{"groupBy"in I&&l(0,_=I.groupBy),"schema"in I&&l(7,h=I.schema)},i.$$.update=()=>{var I;i.$$.dirty&1&&l(2,t=_.value),i.$$.dirty&129&&l(10,n=fl(h,_.path)),i.$$.dirty&1024&&l(9,a=Xt(n.dtype)&&!n.categorical?"value":"count"),i.$$.dirty&512&&l(8,r=a==="value"?"ASC":"DESC"),i.$$.dirty&4865&&m(l(4,s=cl(d.namespace,d.datasetName,{leaf_path:_.path,sort_by:a,sort_order:r}))),i.$$.dirty&2048&&l(1,o=(I=u.data)==null?void 0:I.counts.filter(V=>V[0]!=null)),i.$$.dirty&7&&t==null&&o!=null&&o[0]!=null&&o[0][0]!=null&&(l(2,t=o[0][0]),k.setGroupBy(_.path,t)),i.$$.dirty&6&&l(3,f=o==null?void 0:o.findIndex(V=>V[0]===t))},[_,o,t,f,s,k,$,h,r,a,n,u,d,g,y]}class Ma extends $e{constructor(e){super(),Ee(this,e,Ca,Va,ke,{groupBy:0,schema:7})}}function Jl(i,e,l){const t=i.slice();return t[39]=e[l],t[41]=l,t}const za=i=>({item:i[0]&8,index:i[0]&8}),Kl=i=>({item:i[39],index:i[41]});function Zl(i){let e,l;return{c(){e=N("label"),l=q(i[10]),this.h()},l(t){e=T(t,"LABEL",{for:!0});var n=E(e);l=j(n,i[10]),n.forEach(c),this.h()},h(){S(e,"for",i[19]),se(e,"bx--label",!0),se(e,"bx--label--disabled",i[9]),se(e,"bx--visually-hidden",i[17])},m(t,n){D(t,e,n),v(e,l)},p(t,n){n[0]&1024&&ae(l,t[10]),n[0]&524288&&S(e,"for",t[19]),n[0]&512&&se(e,"bx--label--disabled",t[9]),n[0]&131072&&se(e,"bx--visually-hidden",t[17])},d(t){t&&c(e)}}}function Xl(i){let e,l;return e=new Vr({props:{class:"bx--list-box__invalid-icon"}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function xl(i){let e,l;return e=new Cr({props:{class:"bx--list-box__invalid-icon bx--list-box__invalid-icon--warning"}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Aa(i){let e;return{c(){e=q(i[16])},l(l){e=j(l,i[16])},m(l,t){D(l,e,t)},p(l,t){t[0]&65536&&ae(e,l[16])},d(l){l&&c(e)}}}function Ba(i){let e=i[4](i[22])+"",l;return{c(){l=q(e)},l(t){l=j(t,e)},m(t,n){D(t,l,n)},p(t,n){n[0]&4194320&&e!==(e=t[4](t[22])+"")&&ae(l,e)},d(t){t&&c(l)}}}function en(i){let e,l;return e=new ws({props:{"aria-labelledby":i[19],id:i[19],$$slots:{default:[Ra]},$$scope:{ctx:i}}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const a={};n[0]&524288&&(a["aria-labelledby"]=t[19]),n[0]&524288&&(a.id=t[19]),n[0]&2097181|n[1]&64&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Pa(i){let e=i[4](i[39])+"",l;return{c(){l=q(e)},l(t){l=j(t,e)},m(t,n){D(t,l,n)},p(t,n){n[0]&24&&e!==(e=t[4](t[39])+"")&&ae(l,e)},d(t){t&&c(l)}}}function Fa(i){let e,l;const t=i[29].default,n=Ft(t,i,i[37],Kl),a=n||Pa(i);return{c(){a&&a.c(),e=U()},l(r){a&&a.l(r),e=Q(r)},m(r,s){a&&a.m(r,s),D(r,e,s),l=!0},p(r,s){n?n.p&&(!l||s[0]&8|s[1]&64)&&Rt(n,t,r,r[37],l?Lt(t,r[37],s,za):Ht(r[37]),Kl):a&&a.p&&(!l||s[0]&24)&&a.p(r,l?s:[-1,-1])},i(r){l||(b(a,r),l=!0)},o(r){w(a,r),l=!1},d(r){a&&a.d(r),r&&c(e)}}}function tn(i,e){let l,t,n;function a(...s){return e[34](e[39],...s)}function r(){return e[35](e[39],e[41])}return t=new ks({props:{id:e[39].id,active:e[0]===e[39].id,highlighted:e[21]===e[41],disabled:e[39].disabled,$$slots:{default:[Fa]},$$scope:{ctx:e}}}),t.$on("click",a),t.$on("mouseenter",r),{key:i,first:null,c(){l=ce(),P(t.$$.fragment),this.h()},l(s){l=ce(),L(t.$$.fragment,s),this.h()},h(){this.first=l},m(s,o){D(s,l,o),F(t,s,o),n=!0},p(s,o){e=s;const f={};o[0]&8&&(f.id=e[39].id),o[0]&9&&(f.active=e[0]===e[39].id),o[0]&2097160&&(f.highlighted=e[21]===e[41]),o[0]&8&&(f.disabled=e[39].disabled),o[0]&24|o[1]&64&&(f.$$scope={dirty:o,ctx:e}),t.$set(f)},i(s){n||(b(t.$$.fragment,s),n=!0)},o(s){w(t.$$.fragment,s),n=!1},d(s){s&&c(l),R(t,s)}}}function Ra(i){let e=[],l=new Map,t,n,a=i[3];const r=s=>s[39].id;for(let s=0;s<a.length;s+=1){let o=Jl(i,a,s),f=r(o);l.set(f,e[s]=tn(f,o))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();t=ce()},l(s){for(let o=0;o<e.length;o+=1)e[o].l(s);t=ce()},m(s,o){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(s,o);D(s,t,o),n=!0},p(s,o){o[0]&35651613|o[1]&64&&(a=s[3],ie(),e=Ui(e,o,r,1,s,a,l,t.parentNode,Qi,tn,t,Jl),re())},i(s){if(!n){for(let o=0;o<a.length;o+=1)b(e[o]);n=!0}},o(s){for(let o=0;o<e.length;o+=1)w(e[o]);n=!1},d(s){for(let o=0;o<e.length;o+=1)e[o].d(s);s&&c(t)}}}function Ha(i){let e,l,t,n,a,r,s,o,f,u,p,m=i[11]&&Xl(),d=!i[11]&&i[13]&&xl();function _(g,y){return g[22]?Ba:Aa}let h=_(i),k=h(i);r=new vs({props:{translateWithId:i[18],open:i[1]}}),r.$on("click",i[30]);let $=i[1]&&en(i);return{c(){m&&m.c(),e=U(),d&&d.c(),l=U(),t=N("button"),n=N("span"),k.c(),a=U(),P(r.$$.fragment),s=U(),$&&$.c(),o=ce(),this.h()},l(g){m&&m.l(g),e=Q(g),d&&d.l(g),l=Q(g),t=T(g,"BUTTON",{type:!0,tabindex:!0,"aria-expanded":!0,translatewithid:!0,id:!0});var y=E(t);n=T(y,"SPAN",{});var I=E(n);k.l(I),I.forEach(c),a=Q(y),L(r.$$.fragment,y),y.forEach(c),s=Q(g),$&&$.l(g),o=ce(),this.h()},h(){se(n,"bx--list-box__label",!0),S(t,"type","button"),S(t,"tabindex","0"),S(t,"aria-expanded",i[1]),t.disabled=i[9],S(t,"translatewithid",i[18]),S(t,"id",i[19]),se(t,"bx--list-box__field",!0)},m(g,y){m&&m.m(g,y),D(g,e,y),d&&d.m(g,y),D(g,l,y),D(g,t,y),v(t,n),k.m(n,null),v(t,a),F(r,t,null),i[31](t),D(g,s,y),$&&$.m(g,y),D(g,o,y),f=!0,u||(p=[Pe(t,"keydown",i[32]),Pe(t,"keyup",i[33])],u=!0)},p(g,y){g[11]?m?y[0]&2048&&b(m,1):(m=Xl(),m.c(),b(m,1),m.m(e.parentNode,e)):m&&(ie(),w(m,1,1,()=>{m=null}),re()),!g[11]&&g[13]?d?y[0]&10240&&b(d,1):(d=xl(),d.c(),b(d,1),d.m(l.parentNode,l)):d&&(ie(),w(d,1,1,()=>{d=null}),re()),h===(h=_(g))&&k?k.p(g,y):(k.d(1),k=h(g),k&&(k.c(),k.m(n,null)));const I={};y[0]&262144&&(I.translateWithId=g[18]),y[0]&2&&(I.open=g[1]),r.$set(I),(!f||y[0]&2)&&S(t,"aria-expanded",g[1]),(!f||y[0]&512)&&(t.disabled=g[9]),(!f||y[0]&262144)&&S(t,"translatewithid",g[18]),(!f||y[0]&524288)&&S(t,"id",g[19]),g[1]?$?($.p(g,y),y[0]&2&&b($,1)):($=en(g),$.c(),b($,1),$.m(o.parentNode,o)):$&&(ie(),w($,1,1,()=>{$=null}),re())},i(g){f||(b(m),b(d),b(r.$$.fragment,g),b($),f=!0)},o(g){w(m),w(d),w(r.$$.fragment,g),w($),f=!1},d(g){m&&m.d(g),g&&c(e),d&&d.d(g),g&&c(l),g&&c(t),k.d(),R(r),i[31](null),g&&c(s),$&&$.d(g),g&&c(o),u=!1,dt(p)}}}function ln(i){let e,l;return{c(){e=N("div"),l=q(i[15]),this.h()},l(t){e=T(t,"DIV",{});var n=E(e);l=j(n,i[15]),n.forEach(c),this.h()},h(){se(e,"bx--form__helper-text",!0),se(e,"bx--form__helper-text--disabled",i[9])},m(t,n){D(t,e,n),v(e,l)},p(t,n){n[0]&32768&&ae(l,t[15]),n[0]&512&&se(e,"bx--form__helper-text--disabled",t[9])},d(t){t&&c(e)}}}function La(i){let e,l,t,n,a,r,s,o=i[10]&&Zl(i);t=new bs({props:{role:void 0,type:i[5],size:i[7],name:i[20],"aria-label":i[28]["aria-label"],class:`bx--dropdown 
      `+(i[6]==="top"&&"bx--list-box--up")+` 
      `+(i[11]&&"bx--dropdown--invalid")+` 
      `+(!i[11]&&i[13]&&"bx--dropdown--warning")+` 
      `+(i[1]&&"bx--dropdown--open")+`
      `+(i[7]==="sm"&&"bx--dropdown--sm")+`
      `+(i[7]==="xl"&&"bx--dropdown--xl")+`
      `+(i[23]&&"bx--dropdown--inline")+`
      `+(i[9]&&"bx--dropdown--disabled")+`
      `+(i[8]&&"bx--dropdown--light"),disabled:i[9],open:i[1],invalid:i[11],invalidText:i[12],light:i[8],warn:i[13],warnText:i[14],$$slots:{default:[Ha]},$$scope:{ctx:i}}}),t.$on("click",i[36]);let f=!i[23]&&!i[11]&&!i[13]&&i[15]&&ln(i),u=[i[27]],p={};for(let m=0;m<u.length;m+=1)p=me(p,u[m]);return{c(){e=N("div"),o&&o.c(),l=U(),P(t.$$.fragment),n=U(),f&&f.c(),this.h()},l(m){e=T(m,"DIV",{});var d=E(e);o&&o.l(d),l=Q(d),L(t.$$.fragment,d),n=Q(d),f&&f.l(d),d.forEach(c),this.h()},h(){Et(e,p),se(e,"bx--dropdown__wrapper",!0),se(e,"bx--list-box__wrapper",!0),se(e,"bx--dropdown__wrapper--inline",i[23]),se(e,"bx--list-box__wrapper--inline",i[23]),se(e,"bx--dropdown__wrapper--inline--invalid",i[23]&&i[11])},m(m,d){D(m,e,d),o&&o.m(e,null),v(e,l),F(t,e,null),v(e,n),f&&f.m(e,null),a=!0,r||(s=Pe(window,"click",i[26]),r=!0)},p(m,d){m[10]?o?o.p(m,d):(o=Zl(m),o.c(),o.m(e,l)):o&&(o.d(1),o=null);const _={};d[0]&32&&(_.type=m[5]),d[0]&128&&(_.size=m[7]),d[0]&1048576&&(_.name=m[20]),d[0]&268435456&&(_["aria-label"]=m[28]["aria-label"]),d[0]&8399810&&(_.class=`bx--dropdown 
      `+(m[6]==="top"&&"bx--list-box--up")+` 
      `+(m[11]&&"bx--dropdown--invalid")+` 
      `+(!m[11]&&m[13]&&"bx--dropdown--warning")+` 
      `+(m[1]&&"bx--dropdown--open")+`
      `+(m[7]==="sm"&&"bx--dropdown--sm")+`
      `+(m[7]==="xl"&&"bx--dropdown--xl")+`
      `+(m[23]&&"bx--dropdown--inline")+`
      `+(m[9]&&"bx--dropdown--disabled")+`
      `+(m[8]&&"bx--dropdown--light")),d[0]&512&&(_.disabled=m[9]),d[0]&2&&(_.open=m[1]),d[0]&2048&&(_.invalid=m[11]),d[0]&4096&&(_.invalidText=m[12]),d[0]&256&&(_.light=m[8]),d[0]&8192&&(_.warn=m[13]),d[0]&16384&&(_.warnText=m[14]),d[0]&7154207|d[1]&64&&(_.$$scope={dirty:d,ctx:m}),t.$set(_),!m[23]&&!m[11]&&!m[13]&&m[15]?f?f.p(m,d):(f=ln(m),f.c(),f.m(e,null)):f&&(f.d(1),f=null),Et(e,p=Ke(u,[d[0]&134217728&&m[27]])),se(e,"bx--dropdown__wrapper",!0),se(e,"bx--list-box__wrapper",!0),se(e,"bx--dropdown__wrapper--inline",m[23]),se(e,"bx--list-box__wrapper--inline",m[23]),se(e,"bx--dropdown__wrapper--inline--invalid",m[23]&&m[11])},i(m){a||(b(t.$$.fragment,m),a=!0)},o(m){w(t.$$.fragment,m),a=!1},d(m){m&&c(e),o&&o.d(),R(t),f&&f.d(),r=!1,s()}}}function Oa(i,e,l){let t,n;const a=["items","itemToString","selectedId","type","direction","size","open","light","disabled","titleText","invalid","invalidText","warn","warnText","helperText","label","hideLabel","translateWithId","id","name","ref"];let r=Se(e,a),{$$slots:s={},$$scope:o}=e,{items:f=[]}=e,{itemToString:u=X=>X.text||X.id}=e,{selectedId:p}=e,{type:m="default"}=e,{direction:d="bottom"}=e,{size:_=void 0}=e,{open:h=!1}=e,{light:k=!1}=e,{disabled:$=!1}=e,{titleText:g=""}=e,{invalid:y=!1}=e,{invalidText:I=""}=e,{warn:V=!1}=e,{warnText:C=""}=e,{helperText:M=""}=e,{label:A=void 0}=e,{hideLabel:H=!1}=e,{translateWithId:J=void 0}=e,{id:G="ccs-"+Math.random().toString(36)}=e,{name:W=void 0}=e,{ref:te=null}=e;const z=Dt();let B=-1;function K(X){let Y=B+X;if(f.length===0)return;Y<0?Y=f.length-1:Y>=f.length&&(Y=0);let oe=f[Y].disabled;for(;oe;)Y=Y+X,Y<0?Y=f.length-1:Y>=f.length&&(Y=0),oe=f[Y].disabled;l(21,B=Y)}const x=()=>{z("select",{selectedId:p,selectedItem:f.find(X=>X.id===p)})},ee=({target:X})=>{h&&te&&!te.contains(X)&&l(1,h=!1)};ji(()=>(parent&&parent.addEventListener("click",ee),()=>{parent&&parent.removeEventListener("click",ee)}));const _e=X=>{X.stopPropagation(),!$&&l(1,h=!h)};function he(X){Ue[X?"unshift":"push"](()=>{te=X,l(2,te)})}const ne=X=>{const{key:Y}=X;["Enter","ArrowDown","ArrowUp"].includes(Y)&&X.preventDefault(),Y==="Enter"?(l(1,h=!h),B>-1&&f[B].id!==p&&(l(0,p=f[B].id),x(),l(1,h=!1))):Y==="Tab"?(l(1,h=!1),te.blur()):Y==="ArrowDown"?(h||l(1,h=!0),K(1)):Y==="ArrowUp"?(h||l(1,h=!0),K(-1)):Y==="Escape"&&l(1,h=!1)},ze=X=>{const{key:Y}=X;if([" "].includes(Y))X.preventDefault();else return;l(1,h=!h),B>-1&&f[B].id!==p&&(l(0,p=f[B].id),x(),l(1,h=!1))},le=(X,Y)=>{if(X.disabled){Y.stopPropagation();return}l(0,p=X.id),x(),te.focus()},fe=(X,Y)=>{X.disabled||l(21,B=Y)},De=({target:X})=>{$||l(1,h=te.contains(X)?!h:!1)};return i.$$set=X=>{l(28,e=me(me({},e),Te(X))),l(27,r=Se(e,a)),"items"in X&&l(3,f=X.items),"itemToString"in X&&l(4,u=X.itemToString),"selectedId"in X&&l(0,p=X.selectedId),"type"in X&&l(5,m=X.type),"direction"in X&&l(6,d=X.direction),"size"in X&&l(7,_=X.size),"open"in X&&l(1,h=X.open),"light"in X&&l(8,k=X.light),"disabled"in X&&l(9,$=X.disabled),"titleText"in X&&l(10,g=X.titleText),"invalid"in X&&l(11,y=X.invalid),"invalidText"in X&&l(12,I=X.invalidText),"warn"in X&&l(13,V=X.warn),"warnText"in X&&l(14,C=X.warnText),"helperText"in X&&l(15,M=X.helperText),"label"in X&&l(16,A=X.label),"hideLabel"in X&&l(17,H=X.hideLabel),"translateWithId"in X&&l(18,J=X.translateWithId),"id"in X&&l(19,G=X.id),"name"in X&&l(20,W=X.name),"ref"in X&&l(2,te=X.ref),"$$scope"in X&&l(37,o=X.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&32&&l(23,t=m==="inline"),i.$$.dirty[0]&9&&l(22,n=f.find(X=>X.id===p)),i.$$.dirty[0]&2&&(h||l(21,B=-1))},e=Te(e),[p,h,te,f,u,m,d,_,k,$,g,y,I,V,C,M,A,H,J,G,W,B,n,t,K,x,ee,r,e,s,_e,he,ne,ze,le,fe,De,o]}class qa extends $e{constructor(e){super(),Ee(this,e,Oa,La,ke,{items:3,itemToString:4,selectedId:0,type:5,direction:6,size:7,open:1,light:8,disabled:9,titleText:10,invalid:11,invalidText:12,warn:13,warnText:14,helperText:15,label:16,hideLabel:17,translateWithId:18,id:19,name:20,ref:2},null,[-1,-1])}}const gr=qa;function ja(i){let e,l,t,n,a,r=[i[1]],s={};for(let o=0;o<r.length;o+=1)s=me(s,r[o]);return{c(){e=N("div"),l=N("div"),t=N("span"),this.h()},l(o){e=T(o,"DIV",{});var f=E(e);l=T(f,"DIV",{role:!0});var u=E(l);t=T(u,"SPAN",{}),E(t).forEach(c),u.forEach(c),f.forEach(c),this.h()},h(){se(t,"bx--list-box__label",!0),S(l,"role","button"),se(l,"bx--list-box__field",!0),Et(e,s),se(e,"bx--skeleton",!0),se(e,"bx--dropdown-v2",!0),se(e,"bx--list-box",!0),se(e,"bx--form-item",!0),se(e,"bx--list-box--inline",i[0])},m(o,f){D(o,e,f),v(e,l),v(l,t),n||(a=[Pe(e,"click",i[2]),Pe(e,"mouseover",i[3]),Pe(e,"mouseenter",i[4]),Pe(e,"mouseleave",i[5])],n=!0)},p(o,[f]){Et(e,s=Ke(r,[f&2&&o[1]])),se(e,"bx--skeleton",!0),se(e,"bx--dropdown-v2",!0),se(e,"bx--list-box",!0),se(e,"bx--form-item",!0),se(e,"bx--list-box--inline",o[0])},i:O,o:O,d(o){o&&c(e),n=!1,dt(a)}}}function Ua(i,e,l){const t=["inline"];let n=Se(e,t),{inline:a=!1}=e;function r(u){nt.call(this,i,u)}function s(u){nt.call(this,i,u)}function o(u){nt.call(this,i,u)}function f(u){nt.call(this,i,u)}return i.$$set=u=>{e=me(me({},e),Te(u)),l(1,n=Se(e,t)),"inline"in u&&l(0,a=u.inline)},[a,n,r,s,o,f]}class Qa extends $e{constructor(e){super(),Ee(this,e,Ua,ja,ke,{inline:0})}}const Ya=Qa;const Ga=i=>({item:i&2048}),nn=i=>({item:i[11]}),Wa=i=>({}),rn=i=>({item:i[11]});function Ja(i){let e,l,t;return l=new Ya({props:{inline:!0}}),{c(){e=N("div"),P(l.$$.fragment),this.h()},l(n){e=T(n,"DIV",{class:!0});var a=E(e);L(l.$$.fragment,a),a.forEach(c),this.h()},h(){S(e,"class","h-6 w-16 overflow-hidden")},m(n,a){D(n,e,a),F(l,e,null),t=!0},p:O,i(n){t||(b(l.$$.fragment,n),t=!0)},o(n){w(l.$$.fragment,n),t=!1},d(n){n&&c(e),R(l)}}}function Ka(i){let e,l,t;function n(r){i[8](r)}let a={size:"sm",type:"inline",selectedId:i[1]!=null?i[1]:Pt,items:i[4],$$slots:{default:[xa,({item:r})=>({11:r}),({item:r})=>r?2048:0]},$$scope:{ctx:i}};return i[0]!==void 0&&(a.open=i[0]),e=new gr({props:a}),Ue.push(()=>Xe(e,"open",n)),e.$on("select",i[5]),{c(){P(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,s){F(e,r,s),t=!0},p(r,s){const o={};s&2&&(o.selectedId=r[1]!=null?r[1]:Pt),s&16&&(o.items=r[4]),s&2560&&(o.$$scope={dirty:s,ctx:r}),!l&&s&1&&(l=!0,o.open=r[0],xe(()=>l=!1)),e.$set(o)},i(r){t||(b(e.$$.fragment,r),t=!0)},o(r){w(e.$$.fragment,r),t=!1},d(r){R(e,r)}}}function Za(i){let e;const l=i[7].default,t=Ft(l,i,i[9],nn);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,a){t&&t.m(n,a),e=!0},p(n,a){t&&t.p&&(!e||a&2560)&&Rt(t,l,n,n[9],e?Lt(l,n[9],a,Ga):Ht(n[9]),nn)},i(n){e||(b(t,n),e=!0)},o(n){w(t,n),e=!1},d(n){t&&t.d(n)}}}function Xa(i){let e,l;return{c(){e=N("div"),l=q("None"),this.h()},l(t){e=T(t,"DIV",{class:!0});var n=E(e);l=j(n,"None"),n.forEach(c),this.h()},h(){S(e,"class","flex items-center justify-between gap-x-1")},m(t,n){D(t,e,n),v(e,l)},p:O,i:O,o:O,d(t){t&&c(e)}}}function xa(i){let e,l,t,n;const a=[Xa,Za],r=[];function s(o,f){return o[11].id===Pt?0:1}return e=s(i),l=r[e]=a[e](i),{c(){l.c(),t=ce()},l(o){l.l(o),t=ce()},m(o,f){r[e].m(o,f),D(o,t,f),n=!0},p(o,f){let u=e;e=s(o),e===u?r[e].p(o,f):(ie(),w(r[u],1,1,()=>{r[u]=null}),re(),l=r[e],l?l.p(o,f):(l=r[e]=a[e](o),l.c()),b(l,1),l.m(t.parentNode,t))},i(o){n||(b(l),n=!0)},o(o){w(l),n=!1},d(o){r[e].d(o),o&&c(t)}}}function eo(i){let e,l,t,n,a,r,s,o;const f=i[7].icon,u=Ft(f,i,i[9],rn),p=[Ka,Ja],m=[];function d(_,h){return _[2]?0:1}return t=d(i),n=m[t]=p[t](i),{c(){e=N("div"),u&&u.c(),l=U(),n.c(),this.h()},l(_){e=T(_,"DIV",{class:!0});var h=E(e);u&&u.l(h),l=Q(h),n.l(h),h.forEach(c),this.h()},h(){S(e,"class","drop-pill flex items-center px-2 svelte-99k9u5"),se(e,"active",i[1]!=null)},m(_,h){D(_,e,h),u&&u.m(e,null),v(e,l),m[t].m(e,null),r=!0,s||(o=He(a=Le.call(null,e,!i[0]&&i[3]?{text:i[3]}:{text:""})),s=!0)},p(_,[h]){u&&u.p&&(!r||h&512)&&Rt(u,f,_,_[9],r?Lt(f,_[9],h,Wa):Ht(_[9]),rn);let k=t;t=d(_),t===k?m[t].p(_,h):(ie(),w(m[k],1,1,()=>{m[k]=null}),re(),n=m[t],n?n.p(_,h):(n=m[t]=p[t](_),n.c()),b(n,1),n.m(e,null)),a&&et(a.update)&&h&9&&a.update.call(null,!_[0]&&_[3]?{text:_[3]}:{text:""}),(!r||h&2)&&se(e,"active",_[1]!=null)},i(_){r||(b(u,_),b(n),r=!0)},o(_){w(u,_),w(n),r=!1},d(_){_&&c(e),u&&u.d(_),m[t].d(),s=!1,o()}}}const Pt="__none__";function to(i,e,l){let t,{$$slots:n={},$$scope:a}=e,{title:r}=e,{selectedId:s=null}=e,{items:o=null}=e,{tooltip:f=void 0}=e;const u=Dt();let{open:p=!1}=e;function m(_){l(1,s=_.detail.selectedId==Pt?null:_.detail.selectedId),u("select",{selectedId:s,selectedItem:_.detail.selectedItem})}function d(_){p=_,l(0,p)}return i.$$set=_=>{"title"in _&&l(6,r=_.title),"selectedId"in _&&l(1,s=_.selectedId),"items"in _&&l(2,o=_.items),"tooltip"in _&&l(3,f=_.tooltip),"open"in _&&l(0,p=_.open),"$$scope"in _&&l(9,a=_.$$scope)},i.$$.update=()=>{i.$$.dirty&69&&l(4,t=[{id:Pt,text:p?"None":r},...o||[]])},[p,s,o,f,t,m,r,n,d,a]}class br extends $e{constructor(e){super(),Ee(this,e,to,eo,ke,{title:6,selectedId:1,items:2,tooltip:3,open:0})}}function sn(i){var l;const e=(l=i[2])==null?void 0:l.find(function(...n){return i[10](i[13],...n)});i[14]=e}function an(i){let e,l,t=i[14].text+"",n,a;return{c(){e=N("div"),l=N("span"),n=q(t),this.h()},l(r){e=T(r,"DIV",{class:!0});var s=E(e);l=T(s,"SPAN",{title:!0,class:!0});var o=E(l);n=j(o,t),o.forEach(c),s.forEach(c),this.h()},h(){S(l,"title",a=i[14].text),S(l,"class","truncate text-sm"),S(e,"class","flex items-center justify-between gap-x-1")},m(r,s){D(r,e,s),v(e,l),v(l,n)},p(r,s){s&8196&&t!==(t=r[14].text+"")&&ae(n,t),s&8196&&a!==(a=r[14].text)&&S(l,"title",a)},d(r){r&&c(e)}}}function lo(i){sn(i);let e,l=i[14]&&an(i);return{c(){l&&l.c(),e=ce()},l(t){l&&l.l(t),e=ce()},m(t,n){l&&l.m(t,n),D(t,e,n)},p(t,n){sn(t),t[14]?l?l.p(t,n):(l=an(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(t){l&&l.d(t),t&&c(e)}}}function no(i){let e,l,t;return l=new Js({props:{title:"Group by"}}),{c(){e=N("div"),P(l.$$.fragment),this.h()},l(n){e=T(n,"DIV",{slot:!0});var a=E(e);L(l.$$.fragment,a),a.forEach(c),this.h()},h(){S(e,"slot","icon")},m(n,a){D(n,e,a),F(l,e,null),t=!0},p:O,i(n){t||(b(l.$$.fragment,n),t=!0)},o(n){w(l.$$.fragment,n),t=!1},d(n){n&&c(e),R(l)}}}function io(i){let e,l,t;function n(r){i[11](r)}let a={title:"Group by",items:i[2],selectedId:i[1],tooltip:i[4]?`Grouping by ${at(i[4])}`:null,$$slots:{icon:[no,({item:r})=>({13:r}),({item:r})=>r?8192:0],default:[lo,({item:r})=>({13:r}),({item:r})=>r?8192:0]},$$scope:{ctx:i}};return i[0]!==void 0&&(a.open=i[0]),e=new br({props:a}),Ue.push(()=>Xe(e,"open",n)),e.$on("select",i[6]),{c(){P(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,s){F(e,r,s),t=!0},p(r,[s]){const o={};s&4&&(o.items=r[2]),s&2&&(o.selectedId=r[1]),s&16&&(o.tooltip=r[4]?`Grouping by ${at(r[4])}`:null),s&40964&&(o.$$scope={dirty:s,ctx:r}),!l&&s&1&&(l=!0,o.open=r[0],xe(()=>l=!1)),e.$set(o)},i(r){t||(b(e.$$.fragment,r),t=!0)},o(r){w(e.$$.fragment,r),t=!1},d(r){R(e,r)}}}function ro(i,e,l){let t,n,a,r,s,o,f=O,u=()=>(f(),f=Ne(a,g=>l(8,o=g)),a),p;i.$$.on_destroy.push(()=>f());const m=lt();Ae(i,m,g=>l(9,p=g));let d=!1;function _(g,y){return g==null?[]:g.map(I=>({id:ot(I.path),text:y?at(I.path):Gi(I.path),field:I}))}function h(g){if(g.detail.selectedId==null){m.setGroupBy(null,null);return}const y=g.detail.selectedItem;m.setGroupBy(y.field.path,null),l(1,t=g.detail.selectedId)}const k=(g,y)=>y===g;function $(g){d=g,l(0,d)}return i.$$.update=()=>{var g;i.$$.dirty&512&&l(1,t=p.groupBy?ot(p.groupBy.path):null),i.$$.dirty&512&&l(4,n=(g=p.groupBy)==null?void 0:g.path),i.$$.dirty&512&&u(l(3,a=Nt(p.namespace,p.datasetName))),i.$$.dirty&256&&l(7,r=o.data?bt(o.data).filter(y=>y.dtype!=null&&(y.categorical||!Xt(y.dtype))&&y.dtype.type!=="string_span"&&y.dtype.type!=="embedding"):null),i.$$.dirty&129&&l(2,s=_(r,d))},[d,t,s,a,n,m,h,r,o,p,k,$]}class so extends $e{constructor(e){super(),Ee(this,e,ro,io,ke,{})}}function on(i){let e,l=i[0].concept_namespace+"",t,n,a=i[0].concept_name+"",r;return{c(){e=N("div"),t=q(l),n=q(" / "),r=q(a),this.h()},l(s){e=T(s,"DIV",{class:!0});var o=E(e);t=j(o,l),n=j(o," / "),r=j(o,a),o.forEach(c),this.h()},h(){S(e,"class","mb-2 w-full text-center text-xs")},m(s,o){D(s,e,o),v(e,t),v(e,n),v(e,r)},p(s,o){o&1&&l!==(l=s[0].concept_namespace+"")&&ae(t,l),o&1&&a!==(a=s[0].concept_name+"")&&ae(r,a)},d(s){s&&c(e)}}}function ao(i){let e=at(i[0].path)+"",l,t,n=i[0].type+"",a;return{c(){l=q(e),t=q(": "),a=q(n)},l(r){l=j(r,e),t=j(r,": "),a=j(r,n)},m(r,s){D(r,l,s),D(r,t,s),D(r,a,s)},p(r,s){s&1&&e!==(e=at(r[0].path)+"")&&ae(l,e),s&1&&n!==(n=r[0].type+"")&&ae(a,n)},d(r){r&&c(l),r&&c(t),r&&c(a)}}}function fn(i){let e,l,t;return l=new ur({props:{embedding:i[0].embedding}}),{c(){e=N("div"),P(l.$$.fragment),this.h()},l(n){e=T(n,"DIV",{class:!0});var a=E(e);L(l.$$.fragment,a),a.forEach(c),this.h()},h(){S(e,"class","ml-2")},m(n,a){D(n,e,a),F(l,e,null),t=!0},p(n,a){const r={};a&1&&(r.embedding=n[0].embedding),l.$set(r)},i(n){t||(b(l.$$.fragment,n),t=!0)},o(n){w(l.$$.fragment,n),t=!1},d(n){n&&c(e),R(l)}}}function un(i){let e,l;return{c(){e=N("div"),l=q(i[2]),this.h()},l(t){e=T(t,"DIV",{class:!0});var n=E(e);l=j(n,i[2]),n.forEach(c),this.h()},h(){S(e,"class","mt-2 whitespace-pre-wrap text-left")},m(t,n){D(t,e,n),v(e,l)},p(t,n){n&4&&ae(l,t[2])},d(t){t&&c(e)}}}function oo(i){let e,l,t,n,a,r,s,o,f=i[0].type==="concept"&&on(i);n=new mt({props:{type:i[1],$$slots:{default:[ao]},$$scope:{ctx:i}}});let u=(i[0].type==="semantic"||i[0].type==="concept")&&fn(i),p=i[2]&&un(i);return{c(){f&&f.c(),e=U(),l=N("div"),t=N("div"),P(n.$$.fragment),a=U(),u&&u.c(),r=U(),p&&p.c(),s=ce(),this.h()},l(m){f&&f.l(m),e=Q(m),l=T(m,"DIV",{class:!0});var d=E(l);t=T(d,"DIV",{class:!0});var _=E(t);L(n.$$.fragment,_),_.forEach(c),a=Q(d),u&&u.l(d),d.forEach(c),r=Q(m),p&&p.l(m),s=ce(),this.h()},h(){S(t,"class","whitespace-nowrap"),S(l,"class","flex items-center justify-items-center")},m(m,d){f&&f.m(m,d),D(m,e,d),D(m,l,d),v(l,t),F(n,t,null),v(l,a),u&&u.m(l,null),D(m,r,d),p&&p.m(m,d),D(m,s,d),o=!0},p(m,[d]){m[0].type==="concept"?f?f.p(m,d):(f=on(m),f.c(),f.m(e.parentNode,e)):f&&(f.d(1),f=null);const _={};d&2&&(_.type=m[1]),d&9&&(_.$$scope={dirty:d,ctx:m}),n.$set(_),m[0].type==="semantic"||m[0].type==="concept"?u?(u.p(m,d),d&1&&b(u,1)):(u=fn(m),u.c(),b(u,1),u.m(l,null)):u&&(ie(),w(u,1,1,()=>{u=null}),re()),m[2]?p?p.p(m,d):(p=un(m),p.c(),p.m(s.parentNode,s)):p&&(p.d(1),p=null)},i(m){o||(b(n.$$.fragment,m),b(u),o=!0)},o(m){w(n.$$.fragment,m),w(u),o=!1},d(m){f&&f.d(m),m&&c(e),m&&c(l),R(n),u&&u.d(),m&&c(r),p&&p.d(m),m&&c(s)}}}function fo(i,e,l){let t,{search:n}=e,{tagType:a="outline"}=e;return i.$$set=r=>{"search"in r&&l(0,n=r.search),"tagType"in r&&l(1,a=r.tagType)},i.$$.update=()=>{i.$$.dirty&1&&l(2,t=n.type==="concept"?"":n.query)},[n,a,t]}class cn extends $e{constructor(e){super(),Ee(this,e,fo,oo,ke,{search:0,tagType:1})}}function uo(i){let e,l=at(i[0].path)+"",t,n,a,r;return{c(){e=N("span"),t=q(l),n=q(' has "'),a=q(i[2]),r=q('"'),this.h()},l(s){e=T(s,"SPAN",{class:!0});var o=E(e);t=j(o,l),o.forEach(c),n=j(s,' has "'),a=j(s,i[2]),r=j(s,'"'),this.h()},h(){S(e,"class","font-mono")},m(s,o){D(s,e,o),v(e,t),D(s,n,o),D(s,a,o),D(s,r,o)},p(s,o){o&1&&l!==(l=at(s[0].path)+"")&&ae(t,l),o&4&&ae(a,s[2])},d(s){s&&c(e),s&&c(n),s&&c(a),s&&c(r)}}}function co(i){let e,l,t,n,a,r;return l=new tl({props:{title:"query",interactive:!0,type:i[1],$$slots:{default:[uo]},$$scope:{ctx:i}}}),l.$on("click",i[7]),l.$on("remove",i[8]),{c(){e=N("div"),P(l.$$.fragment),this.h()},l(s){e=T(s,"DIV",{class:!0});var o=E(e);L(l.$$.fragment,o),o.forEach(c),this.h()},h(){S(e,"class","search-pill items-center text-left")},m(s,o){D(s,e,o),F(l,e,null),n=!0,a||(r=He(t=Le.call(null,e,{component:cn,props:{search:i[0],tagType:i[1]}})),a=!0)},p(s,[o]){const f={};o&2&&(f.type=s[1]),o&1029&&(f.$$scope={dirty:o,ctx:s}),l.$set(f),t&&et(t.update)&&o&3&&t.update.call(null,{component:cn,props:{search:s[0],tagType:s[1]}})},i(s){n||(b(l.$$.fragment,s),n=!0)},o(s){w(l.$$.fragment,s),n=!1},d(s){s&&c(e),R(l),a=!1,r()}}}function mo(i){if(i.type==="concept")return i.concept_name;if(i.type==="keyword"||i.type==="semantic")return i.query;if(i.type==="metadata")return i.value}function _o(i,e,l){let t,n,a,r,s,o=O,f=()=>(o(),o=Ne(t,h=>l(4,s=h)),t);i.$$.on_destroy.push(()=>o());let{search:u}=e;const p={keyword:"outline",semantic:"teal",concept:"green",metadata:"magenta"},m=lt();Ae(i,m,h=>l(6,r=h));function d(h){nt.call(this,i,h)}const _=()=>m.removeSearch(u,(s==null?void 0:s.data)||null);return i.$$set=h=>{"search"in h&&l(0,u=h.search)},i.$$.update=()=>{i.$$.dirty&64&&f(l(3,t=_t(r.namespace,r.datasetName,ht(r)))),i.$$.dirty&1&&l(2,n=mo(u)),i.$$.dirty&1&&l(1,a=u.type!=null?p[u.type]:"outline")},[u,a,n,t,s,m,r,d,_]}class vr extends $e{constructor(e){super(),Ee(this,e,_o,co,ke,{search:0})}}function dn(i){var l;const e=(l=i[3])==null?void 0:l.find(function(...n){return i[10](i[15],...n)});i[16]=e}function mn(i){let e,l=i[16].text+"",t,n;return{c(){e=N("div"),t=q(l),this.h()},l(a){e=T(a,"DIV",{title:!0,class:!0});var r=E(e);t=j(r,l),r.forEach(c),this.h()},h(){S(e,"title",n=i[16].text),S(e,"class","truncate text-sm")},m(a,r){D(a,e,r),v(e,t)},p(a,r){r&32776&&l!==(l=a[16].text+"")&&ae(t,l),r&32776&&n!==(n=a[16].text)&&S(e,"title",n)},d(a){a&&c(e)}}}function ho(i){dn(i);let e,l=i[16]&&mn(i);return{c(){l&&l.c(),e=ce()},l(t){l&&l.l(t),e=ce()},m(t,n){l&&l.m(t,n),D(t,e,n)},p(t,n){dn(t),t[16]?l?l.p(t,n):(l=mn(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(t){l&&l.d(t),t&&c(e)}}}function po(i){let e,l;return e=new pr({}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function go(i){let e,l;return e=new hr({}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function bo(i){let e,l,t,n,a,r,s,o,f;const u=[go,po],p=[];function m(d,_){var h;return((h=d[1])==null?void 0:h.order)==="ASC"?0:1}return t=m(i),n=p[t]=u[t](i),{c(){e=N("div"),l=N("button"),n.c(),this.h()},l(d){e=T(d,"DIV",{slot:!0});var _=E(e);l=T(_,"BUTTON",{class:!0});var h=E(l);n.l(h),h.forEach(c),_.forEach(c),this.h()},h(){S(l,"class","px-1 py-2"),l.disabled=a=i[1]==null,S(e,"slot","icon")},m(d,_){var h;D(d,e,_),v(e,l),p[t].m(l,null),s=!0,o||(f=[He(r=Le.call(null,l,{text:((h=i[1])==null?void 0:h.order)==="ASC"?"Sorted ascending. Toggle to switch to descending.":"Sorted descending. Toggle to switch to ascending."})),Pe(l,"click",i[7])],o=!0)},p(d,_){var k;let h=t;t=m(d),t!==h&&(ie(),w(p[h],1,1,()=>{p[h]=null}),re(),n=p[t],n||(n=p[t]=u[t](d),n.c()),b(n,1),n.m(l,null)),(!s||_&2&&a!==(a=d[1]==null))&&(l.disabled=a),r&&et(r.update)&&_&2&&r.update.call(null,{text:((k=d[1])==null?void 0:k.order)==="ASC"?"Sorted ascending. Toggle to switch to descending.":"Sorted descending. Toggle to switch to ascending."})},i(d){s||(b(n),s=!0)},o(d){w(n),s=!1},d(d){d&&c(e),p[t].d(),o=!1,dt(f)}}}function vo(i){let e,l,t,n;function a(s){i[11](s)}let r={title:"Sort",selectedId:i[2],items:i[3],$$slots:{icon:[bo,({item:s})=>({15:s}),({item:s})=>s?32768:0],default:[ho,({item:s})=>({15:s}),({item:s})=>s?32768:0]},$$scope:{ctx:i}};return i[0]!==void 0&&(r.open=i[0]),l=new br({props:r}),Ue.push(()=>Xe(l,"open",a)),l.$on("select",i[6]),{c(){e=N("div"),P(l.$$.fragment),this.h()},l(s){e=T(s,"DIV",{class:!0});var o=E(e);L(l.$$.fragment,o),o.forEach(c),this.h()},h(){S(e,"class","sort-container flex flex-row items-center gap-x-1 md:w-fit")},m(s,o){D(s,e,o),F(l,e,null),n=!0},p(s,[o]){const f={};o&4&&(f.selectedId=s[2]),o&8&&(f.items=s[3]),o&163850&&(f.$$scope={dirty:o,ctx:s}),!t&&o&1&&(t=!0,f.open=s[0],xe(()=>t=!1)),l.$set(f)},i(s){n||(b(l.$$.fragment,s),n=!0)},o(s){w(l.$$.fragment,s),n=!1},d(s){s&&c(e),R(l)}}}function wo(i,e,l){let t,n,a,r,s,o=O,f=()=>(o(),o=Ne(t,I=>l(8,s=I)),t),u;i.$$.on_destroy.push(()=>o());let p=lt();Ae(i,p,I=>l(9,u=I));let m=!1;function d(I,V){if(I.query.sort_by&&I.query.sort_by.length>0)return{path:ul(I.query.sort_by[0]),order:I.query.sort_order||"DESC"};const C=((V==null?void 0:V.sorts)||[])[0];return C==null||zt(C.path,[vt])?null:C}let _={};function h(I,V){return Wi(I).filter(C=>{var M,A;return((M=C.dtype)==null?void 0:M.type)!="embedding"&&((A=C.dtype)==null?void 0:A.type)!="string_span"}).map(C=>({id:ot(C.path),path:C.path,text:V?at(C.path):Gi(C.path),disabled:!1}))}const k=I=>{if(I.detail.selectedId==null){p.clearSorts();return}const V=I.detail.selectedItem;p.setSortBy(V.path),l(2,a=I.detail.selectedId)},$=()=>{n!=null&&p.setSortBy(n.path),p.setSortOrder((n==null?void 0:n.order)==="ASC"?"DESC":"ASC")},g=(I,V)=>V===I;function y(I){m=I,l(0,m)}return i.$$.update=()=>{var I;if(i.$$.dirty&512&&f(l(4,t=_t(u.namespace,u.datasetName,ht(u)))),i.$$.dirty&768&&l(1,n=d(u,s.data)),i.$$.dirty&256)for(const V of((I=s==null?void 0:s.data)==null?void 0:I.search_results)||[])_[ot(V.result_path)]=V;i.$$.dirty&2&&l(2,a=(n==null?void 0:n.path)&&ot(n.path)),i.$$.dirty&257&&l(3,r=s.data&&h(s.data.schema,m))},[m,n,a,r,t,p,k,$,s,u,g,y]}class ko extends $e{constructor(e){super(),Ee(this,e,wo,vo,ke,{})}}function _n(i,e,l){const t=i.slice();return t[20]=e[l],t}function hn(i,e,l){const t=i.slice();return t[23]=e[l],t}function pn(i,e,l){const t=i.slice();return t[26]=e[l],t}function $o(i){let e;return{c(){e=q("Filters")},l(l){e=j(l,"Filters")},m(l,t){D(l,e,t)},p:O,i:O,o:O,d(l){l&&c(e)}}}function Eo(i){let e,l,t,n=i[14],a=[];for(let o=0;o<n.length;o+=1)a[o]=vn(hn(i,n,o));const r=o=>w(a[o],1,1,()=>{a[o]=null});let s=i[6]!=null&&i[6].length>0&&wn(i);return{c(){e=N("div");for(let o=0;o<a.length;o+=1)a[o].c();l=U(),s&&s.c(),this.h()},l(o){e=T(o,"DIV",{class:!0});var f=E(e);for(let u=0;u<a.length;u+=1)a[u].l(f);l=Q(f),s&&s.l(f),f.forEach(c),this.h()},h(){S(e,"class","flex flex-grow flex-row gap-x-4")},m(o,f){D(o,e,f);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(e,null);v(e,l),s&&s.m(e,null),t=!0},p(o,f){if(f&114696){n=o[14];let u;for(u=0;u<n.length;u+=1){const p=hn(o,n,u);a[u]?(a[u].p(p,f),b(a[u],1)):(a[u]=vn(p),a[u].c(),b(a[u],1),a[u].m(e,l))}for(ie(),u=n.length;u<a.length;u+=1)r(u);re()}o[6]!=null&&o[6].length>0?s?(s.p(o,f),f&64&&b(s,1)):(s=wn(o),s.c(),b(s,1),s.m(e,null)):s&&(ie(),w(s,1,1,()=>{s=null}),re())},i(o){if(!t){for(let f=0;f<n.length;f+=1)b(a[f]);b(s),t=!0}},o(o){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)w(a[f]);w(s),t=!1},d(o){o&&c(e),tt(a,o),s&&s.d()}}}function gn(i){let e,l,t=i[15][i[23]]+"",n,a,r,s,o,f=i[3][i[23]],u=[];for(let m=0;m<f.length;m+=1)u[m]=bn(pn(i,f,m));const p=m=>w(u[m],1,1,()=>{u[m]=null});return{c(){e=N("div"),l=N("div"),n=q(t),a=U(),r=N("div");for(let m=0;m<u.length;m+=1)u[m].c();s=U(),this.h()},l(m){e=T(m,"DIV",{class:!0});var d=E(e);l=T(d,"DIV",{class:!0});var _=E(l);n=j(_,t),_.forEach(c),a=Q(d),r=T(d,"DIV",{class:!0});var h=E(r);for(let k=0;k<u.length;k+=1)u[k].l(h);h.forEach(c),s=Q(d),d.forEach(c),this.h()},h(){S(l,"class","text-xs font-light"),S(r,"class","flex flex-row gap-x-1"),S(e,"class","filter-group rounded bg-slate-50 px-2 py-1 shadow-sm svelte-7vw0ck")},m(m,d){D(m,e,d),v(e,l),v(l,n),v(e,a),v(e,r);for(let _=0;_<u.length;_+=1)u[_]&&u[_].m(r,null);v(e,s),o=!0},p(m,d){if(d&81928){f=m[3][m[23]];let _;for(_=0;_<f.length;_+=1){const h=pn(m,f,_);u[_]?(u[_].p(h,d),b(u[_],1)):(u[_]=bn(h),u[_].c(),b(u[_],1),u[_].m(r,null))}for(ie(),_=f.length;_<u.length;_+=1)p(_);re()}},i(m){if(!o){for(let d=0;d<f.length;d+=1)b(u[d]);o=!0}},o(m){u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)w(u[d]);o=!1},d(m){m&&c(e),tt(u,m)}}}function bn(i){let e,l;function t(){return i[18](i[26])}return e=new vr({props:{search:i[26]}}),e.$on("click",t),{c(){P(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,a){F(e,n,a),l=!0},p(n,a){i=n;const r={};a&8&&(r.search=i[26]),e.$set(r)},i(n){l||(b(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){R(e,n)}}}function vn(i){let e,l,t=i[3][i[23]]&&gn(i);return{c(){t&&t.c(),e=ce()},l(n){t&&t.l(n),e=ce()},m(n,a){t&&t.m(n,a),D(n,e,a),l=!0},p(n,a){n[3][n[23]]?t?(t.p(n,a),a&8&&b(t,1)):(t=gn(n),t.c(),b(t,1),t.m(e.parentNode,e)):t&&(ie(),w(t,1,1,()=>{t=null}),re())},i(n){l||(b(t),l=!0)},o(n){w(t),l=!1},d(n){t&&t.d(n),n&&c(e)}}}function wn(i){let e,l,t,n,a,r,s,o;const f=[Io,yo],u=[];function p(m,d){return m[10].data?0:1}return r=p(i),s=u[r]=f[r](i),{c(){e=N("div"),l=N("div"),t=q("Filters"),n=U(),a=N("div"),s.c(),this.h()},l(m){e=T(m,"DIV",{class:!0});var d=E(e);l=T(d,"DIV",{class:!0});var _=E(l);t=j(_,"Filters"),_.forEach(c),n=Q(d),a=T(d,"DIV",{class:!0});var h=E(a);s.l(h),h.forEach(c),d.forEach(c),this.h()},h(){S(l,"class","text-xs font-light"),S(a,"class","flex flex-row gap-x-1"),S(e,"class","filter-group rounded bg-slate-50 px-2 py-1 shadow-sm svelte-7vw0ck")},m(m,d){D(m,e,d),v(e,l),v(l,t),v(e,n),v(e,a),u[r].m(a,null),o=!0},p(m,d){let _=r;r=p(m),r===_?u[r].p(m,d):(ie(),w(u[_],1,1,()=>{u[_]=null}),re(),s=u[r],s?s.p(m,d):(s=u[r]=f[r](m),s.c()),b(s,1),s.m(a,null))},i(m){o||(b(s),o=!0)},o(m){w(s),o=!1},d(m){m&&c(e),u[r].d()}}}function yo(i){let e,l;return e=new it({}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p:O,i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Io(i){let e,l,t=i[6],n=[];for(let r=0;r<t.length;r+=1)n[r]=kn(_n(i,t,r));const a=r=>w(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ce()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=ce()},m(r,s){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(r,s);D(r,e,s),l=!0},p(r,s){if(s&1088){t=r[6];let o;for(o=0;o<t.length;o+=1){const f=_n(r,t,o);n[o]?(n[o].p(f,s),b(n[o],1)):(n[o]=kn(f),n[o].c(),b(n[o],1),n[o].m(e.parentNode,e))}for(ie(),o=t.length;o<n.length;o+=1)a(o);re()}},i(r){if(!l){for(let s=0;s<t.length;s+=1)b(n[s]);l=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)w(n[s]);l=!1},d(r){tt(n,r),r&&c(e)}}}function kn(i){let e,l;return e=new $l({props:{schema:i[10].data,filter:i[20]}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const a={};n&1024&&(a.schema=t[10].data),n&64&&(a.filter=t[20]),e.$set(a)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function $n(i){let e;function l(a,r){return a[0]==a[1].dataset_manifest.num_items?Do:So}let t=l(i),n=t(i);return{c(){n.c(),e=ce()},l(a){n.l(a),e=ce()},m(a,r){n.m(a,r),D(a,e,r)},p(a,r){t===(t=l(a))&&n?n.p(a,r):(n.d(1),n=t(a),n&&(n.c(),n.m(e.parentNode,e)))},d(a){n.d(a),a&&c(e)}}}function So(i){let e=Me(i[0])+"",l,t,n=Me(i[1].dataset_manifest.num_items)+"",a,r;return{c(){l=q(e),t=q(" of "),a=q(n),r=q(" rows")},l(s){l=j(s,e),t=j(s," of "),a=j(s,n),r=j(s," rows")},m(s,o){D(s,l,o),D(s,t,o),D(s,a,o),D(s,r,o)},p(s,o){o&1&&e!==(e=Me(s[0])+"")&&ae(l,e),o&2&&n!==(n=Me(s[1].dataset_manifest.num_items)+"")&&ae(a,n)},d(s){s&&c(l),s&&c(t),s&&c(a),s&&c(r)}}}function Do(i){let e=Me(i[0])+"",l,t;return{c(){l=q(e),t=q(" rows")},l(n){l=j(n,e),t=j(n," rows")},m(n,a){D(n,l,a),D(n,t,a)},p(n,a){a&1&&e!==(e=Me(n[0])+"")&&ae(l,e)},d(n){n&&c(l),n&&c(t)}}}function En(i){let e,l;return e=new Ma({props:{schema:i[10].data,groupBy:i[5].groupBy}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const a={};n&1024&&(a.schema=t[10].data),n&32&&(a.groupBy=t[5].groupBy),e.$set(a)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function yn(i){let e,l;return e=new kl({props:{open:!0,modalHeading:"",passiveModal:!0,size:"lg",$$slots:{default:[Mo]},$$scope:{ctx:i}}}),e.$on("close",i[19]),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const a={};n&536872960&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function No(i){var r;let e,l,t,n,a;return l=new ml({props:{size:"small",kind:"ghost",icon:Ki,href:Nl((r=i[11])==null?void 0:r.data.namespace,i[11].data.concept_name),iconDescription:"Open concept page",$$slots:{default:[Co]},$$scope:{ctx:i}}}),n=new cs({props:{concept:i[11].data}}),{c(){e=N("div"),P(l.$$.fragment),t=U(),P(n.$$.fragment),this.h()},l(s){e=T(s,"DIV",{class:!0});var o=E(e);L(l.$$.fragment,o),o.forEach(c),t=Q(s),L(n.$$.fragment,s),this.h()},h(){S(e,"class","mb-4 ml-6")},m(s,o){D(s,e,o),F(l,e,null),D(s,t,o),F(n,s,o),a=!0},p(s,o){var p;const f={};o&2048&&(f.href=Nl((p=s[11])==null?void 0:p.data.namespace,s[11].data.concept_name)),o&536870912&&(f.$$scope={dirty:o,ctx:s}),l.$set(f);const u={};o&2048&&(u.concept=s[11].data),n.$set(u)},i(s){a||(b(l.$$.fragment,s),b(n.$$.fragment,s),a=!0)},o(s){w(l.$$.fragment,s),w(n.$$.fragment,s),a=!1},d(s){s&&c(e),R(l),s&&c(t),R(n,s)}}}function To(i){let e,l=i[11].error.message+"",t;return{c(){e=N("p"),t=q(l)},l(n){e=T(n,"P",{});var a=E(e);t=j(a,l),a.forEach(c)},m(n,a){D(n,e,a),v(e,t)},p(n,a){a&2048&&l!==(l=n[11].error.message+"")&&ae(t,l)},i:O,o:O,d(n){n&&c(e)}}}function Vo(i){let e,l;return e=new it({}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p:O,i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Co(i){let e;return{c(){e=q("Go to concept")},l(l){e=j(l,"Go to concept")},m(l,t){D(l,e,t)},d(l){l&&c(e)}}}function Mo(i){let e,l,t,n;const a=[Vo,To,No],r=[];function s(o,f){var u,p,m;return(u=o[11])!=null&&u.isLoading?0:(p=o[11])!=null&&p.isError?1:(m=o[11])!=null&&m.isSuccess?2:-1}return~(e=s(i))&&(l=r[e]=a[e](i)),{c(){l&&l.c(),t=ce()},l(o){l&&l.l(o),t=ce()},m(o,f){~e&&r[e].m(o,f),D(o,t,f),n=!0},p(o,f){let u=e;e=s(o),e===u?~e&&r[e].p(o,f):(l&&(ie(),w(r[u],1,1,()=>{r[u]=null}),re()),~e?(l=r[e],l?l.p(o,f):(l=r[e]=a[e](o),l.c()),b(l,1),l.m(t.parentNode,t)):l=null)},i(o){n||(b(l),n=!0)},o(o){w(l),n=!1},d(o){~e&&r[e].d(o),o&&c(t)}}}function zo(i){let e,l,t,n,a,r,s,o,f,u,p,m,d,_,h,k,$,g,y,I,V,C,M;n=new Vl({props:{totalNumRows:i[0],icon:da,disabled:!i[9],disabledMessage:i[9]?"":"User does not have access to label all.",labelsQuery:{searches:i[4],filters:i[6]},helperText:"Label all items in the current filter"}}),r=new Vl({props:{totalNumRows:i[0],remove:!0,icon:ha,disabled:!i[9],disabledMessage:i[9]?"":"User does not have access to label all.",labelsQuery:{searches:i[4],filters:i[6]},helperText:"Remove label from all items in the current filter"}}),u=new Ys({});const A=[Eo,$o],H=[];function J(z,B){return z[4].length>0||z[6]&&z[6].length>0?0:1}m=J(i),d=H[m]=A[m](i),h=new so({}),$=new ko({});let G=i[0]&&i[1]&&$n(i),W=i[5].groupBy&&i[10].data&&En(i),te=i[2]&&yn(i);return{c(){e=N("div"),l=N("div"),t=N("div"),P(n.$$.fragment),a=U(),P(r.$$.fragment),s=U(),o=N("div"),f=N("div"),P(u.$$.fragment),p=U(),d.c(),_=U(),P(h.$$.fragment),k=U(),P($.$$.fragment),g=U(),y=N("div"),G&&G.c(),I=U(),W&&W.c(),V=U(),te&&te.c(),C=ce(),this.h()},l(z){e=T(z,"DIV",{class:!0});var B=E(e);l=T(B,"DIV",{class:!0});var K=E(l);t=T(K,"DIV",{class:!0});var x=E(t);L(n.$$.fragment,x),a=Q(x),L(r.$$.fragment,x),x.forEach(c),s=Q(K),o=T(K,"DIV",{class:!0});var ee=E(o);f=T(ee,"DIV",{});var _e=E(f);L(u.$$.fragment,_e),_e.forEach(c),p=Q(ee),d.l(ee),ee.forEach(c),_=Q(K),L(h.$$.fragment,K),k=Q(K),L($.$$.fragment,K),K.forEach(c),g=Q(B),y=T(B,"DIV",{class:!0});var he=E(y);G&&G.l(he),he.forEach(c),B.forEach(c),I=Q(z),W&&W.l(z),V=Q(z),te&&te.l(z),C=ce(),this.h()},h(){S(t,"class","flex items-center gap-x-2"),S(o,"class","flex items-center gap-x-1"),S(l,"class","flex items-center gap-x-6 gap-y-2"),S(y,"class","flex py-2"),S(e,"class","relative mx-5 my-2 flex items-center justify-between")},m(z,B){D(z,e,B),v(e,l),v(l,t),F(n,t,null),v(t,a),F(r,t,null),v(l,s),v(l,o),v(o,f),F(u,f,null),v(o,p),H[m].m(o,null),v(l,_),F(h,l,null),v(l,k),F($,l,null),v(e,g),v(e,y),G&&G.m(y,null),D(z,I,B),W&&W.m(z,B),D(z,V,B),te&&te.m(z,B),D(z,C,B),M=!0},p(z,[B]){const K={};B&1&&(K.totalNumRows=z[0]),B&512&&(K.disabled=!z[9]),B&512&&(K.disabledMessage=z[9]?"":"User does not have access to label all."),B&80&&(K.labelsQuery={searches:z[4],filters:z[6]}),n.$set(K);const x={};B&1&&(x.totalNumRows=z[0]),B&512&&(x.disabled=!z[9]),B&512&&(x.disabledMessage=z[9]?"":"User does not have access to label all."),B&80&&(x.labelsQuery={searches:z[4],filters:z[6]}),r.$set(x);let ee=m;m=J(z),m===ee?H[m].p(z,B):(ie(),w(H[ee],1,1,()=>{H[ee]=null}),re(),d=H[m],d?d.p(z,B):(d=H[m]=A[m](z),d.c()),b(d,1),d.m(o,null)),z[0]&&z[1]?G?G.p(z,B):(G=$n(z),G.c(),G.m(y,null)):G&&(G.d(1),G=null),z[5].groupBy&&z[10].data?W?(W.p(z,B),B&1056&&b(W,1)):(W=En(z),W.c(),b(W,1),W.m(V.parentNode,V)):W&&(ie(),w(W,1,1,()=>{W=null}),re()),z[2]?te?(te.p(z,B),B&4&&b(te,1)):(te=yn(z),te.c(),b(te,1),te.m(C.parentNode,C)):te&&(ie(),w(te,1,1,()=>{te=null}),re())},i(z){M||(b(n.$$.fragment,z),b(r.$$.fragment,z),b(u.$$.fragment,z),b(d),b(h.$$.fragment,z),b($.$$.fragment,z),b(W),b(te),M=!0)},o(z){w(n.$$.fragment,z),w(r.$$.fragment,z),w(u.$$.fragment,z),w(d),w(h.$$.fragment,z),w($.$$.fragment,z),w(W),w(te),M=!1},d(z){z&&c(e),R(n),R(r),R(u),H[m].d(),R(h),R($),G&&G.d(),z&&c(I),W&&W.d(z),z&&c(V),te&&te.d(z),z&&c(C)}}}function Ao(i,e,l){let t,n,a,r,s,o,f,u,p=O,m=()=>(p(),p=Ne(n,G=>l(10,u=G)),n),d,_=O,h=()=>(_(),_=Ne(a,G=>l(11,d=G)),a);i.$$.on_destroy.push(()=>p()),i.$$.on_destroy.push(()=>_());let{totalNumRows:k}=e,{manifest:$}=e,g=lt();Ae(i,g,G=>l(5,o=G));const y=xt();Ae(i,y,G=>l(17,f=G));let I=null;const V=["keyword","semantic","concept"],C={keyword:"Keyword",semantic:"Semantic",concept:"Concepts",metadata:"Metadata"};let M={};function A(G){G.type==="concept"&&l(2,I={namespace:G.concept_namespace,name:G.concept_name})}const H=G=>A(G),J=()=>l(2,I=null);return i.$$set=G=>{"totalNumRows"in G&&l(0,k=G.totalNumRows),"manifest"in G&&l(1,$=G.manifest)},i.$$.update=()=>{var G;if(i.$$.dirty&131072&&l(9,t=((G=f.data)==null?void 0:G.access.dataset.label_all)||!1),i.$$.dirty&32&&m(l(8,n=Nt(o.namespace,o.datasetName))),i.$$.dirty&4&&h(l(7,a=I?Ji(I.namespace,I.name):void 0)),i.$$.dirty&32&&l(4,r=dl(o)),i.$$.dirty&32&&l(6,s=o.query.filters),i.$$.dirty&24){l(3,M={});for(const W of r)W.type&&(W.type in M||l(3,M[W.type]=[],M),M[W.type].push(W))}},[k,$,I,M,r,o,s,a,n,t,u,d,g,y,V,C,A,f,H,J]}class wr extends $e{constructor(e){super(),Ee(this,e,Ao,zo,ke,{totalNumRows:0,manifest:1})}}function In(i,e,l){const t=i.slice();return t[21]=e[l],t}function Bo(i){let e,l;return{c(){e=N("div"),l=q("No results."),this.h()},l(t){e=T(t,"DIV",{class:!0});var n=E(e);l=j(n,"No results."),n.forEach(c),this.h()},h(){S(e,"class","mx-4 mt-8 w-full text-gray-600")},m(t,n){D(t,e,n),v(e,l)},p:O,i:O,o:O,d(t){t&&c(e)}}}function Po(i){var t,n;let e,l;return e=new Ot({props:{lowContrast:!0,title:"Could not fetch schema:",subtitle:((t=i[1].error.body)==null?void 0:t.detail)||((n=i[1])==null?void 0:n.error.message)}}),{c(){P(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,r){F(e,a,r),l=!0},p(a,r){var o,f;const s={};r&2&&(s.subtitle=((o=a[1].error.body)==null?void 0:o.detail)||((f=a[1])==null?void 0:f.error.message)),e.$set(s)},i(a){l||(b(e.$$.fragment,a),l=!0)},o(a){w(e.$$.fragment,a),l=!1},d(a){R(e,a)}}}function Fo(i){var t;let e,l;return e=new Ot({props:{lowContrast:!0,title:"Could not fetch rows:",subtitle:((t=i[2].error.body)==null?void 0:t.detail)||i[2].error.message}}),{c(){P(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,a){F(e,n,a),l=!0},p(n,a){var s;const r={};a&4&&(r.subtitle=((s=n[2].error.body)==null?void 0:s.detail)||n[2].error.message),e.$set(r)},i(n){l||(b(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){R(e,n)}}}function Sn(i){let e,l,t,n=i[4],a=[];for(let o=0;o<n.length;o+=1)a[o]=Dn(In(i,n,o));const r=o=>w(a[o],1,1,()=>{a[o]=null});let s=i[4].length>0&&Nn(i);return{c(){e=N("div");for(let o=0;o<a.length;o+=1)a[o].c();l=U(),s&&s.c(),this.h()},l(o){e=T(o,"DIV",{class:!0});var f=E(e);for(let u=0;u<a.length;u+=1)a[u].l(f);l=Q(f),s&&s.l(f),f.forEach(c),this.h()},h(){S(e,"class","flex h-full w-full flex-col gap-y-10 overflow-y-scroll px-5 pb-32")},m(o,f){D(o,e,f);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(e,null);v(e,l),s&&s.m(e,null),i[19](e),t=!0},p(o,f){if(f&152){n=o[4];let u;for(u=0;u<n.length;u+=1){const p=In(o,n,u);a[u]?(a[u].p(p,f),b(a[u],1)):(a[u]=Dn(p),a[u].c(),b(a[u],1),a[u].m(e,l))}for(ie(),u=n.length;u<a.length;u+=1)r(u);re()}o[4].length>0?s?(s.p(o,f),f&16&&b(s,1)):(s=Nn(o),s.c(),b(s,1),s.m(e,null)):s&&(ie(),w(s,1,1,()=>{s=null}),re())},i(o){if(!t){for(let f=0;f<n.length;f+=1)b(a[f]);b(s),t=!0}},o(o){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)w(a[f]);w(s),t=!1},d(o){o&&c(e),tt(a,o),s&&s.d(),i[19](null)}}}function Dn(i){let e,l;return e=new or({props:{rowId:i[21],mediaFields:i[3],highlightedFields:i[7]}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const a={};n&16&&(a.rowId=t[21]),n&8&&(a.mediaFields=t[3]),n&128&&(a.highlightedFields=t[7]),e.$set(a)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Nn(i){let e,l;return e=new ba({props:{threshold:100}}),e.$on("loadMore",i[18]),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p:O,i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Tn(i){let e,l;return e=new it({props:{paragraph:!0,lines:3}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Ro(i){var _;let e,l,t,n,a,r,s,o;e=new wr({props:{totalNumRows:i[5],manifest:i[12].data}});const f=[Fo,Po,Bo],u=[];function p(h,k){var $,g;return h[2].isError?0:($=h[1])!=null&&$.isError?1:(g=h[2])!=null&&g.isSuccess&&h[4]&&h[4].length===0?2:-1}~(t=p(i))&&(n=u[t]=f[t](i));let m=i[4]&&i[13].isSuccess&&i[3]!=null&&Sn(i),d=((_=i[2])==null?void 0:_.isFetching)&&Tn();return{c(){P(e.$$.fragment),l=U(),n&&n.c(),a=U(),m&&m.c(),r=U(),d&&d.c(),s=ce()},l(h){L(e.$$.fragment,h),l=Q(h),n&&n.l(h),a=Q(h),m&&m.l(h),r=Q(h),d&&d.l(h),s=ce()},m(h,k){F(e,h,k),D(h,l,k),~t&&u[t].m(h,k),D(h,a,k),m&&m.m(h,k),D(h,r,k),d&&d.m(h,k),D(h,s,k),o=!0},p(h,[k]){var y;const $={};k&32&&($.totalNumRows=h[5]),k&4096&&($.manifest=h[12].data),e.$set($);let g=t;t=p(h),t===g?~t&&u[t].p(h,k):(n&&(ie(),w(u[g],1,1,()=>{u[g]=null}),re()),~t?(n=u[t],n?n.p(h,k):(n=u[t]=f[t](h),n.c()),b(n,1),n.m(a.parentNode,a)):n=null),h[4]&&h[13].isSuccess&&h[3]!=null?m?(m.p(h,k),k&8216&&b(m,1)):(m=Sn(h),m.c(),b(m,1),m.m(r.parentNode,r)):m&&(ie(),w(m,1,1,()=>{m=null}),re()),(y=h[2])!=null&&y.isFetching?d?k&4&&b(d,1):(d=Tn(),d.c(),b(d,1),d.m(s.parentNode,s)):d&&(ie(),w(d,1,1,()=>{d=null}),re())},i(h){o||(b(e.$$.fragment,h),b(n),b(m),b(d),o=!0)},o(h){w(e.$$.fragment,h),w(n),w(m),w(d),o=!1},d(h){R(e,h),h&&c(l),~t&&u[t].d(h),h&&c(a),m&&m.d(h),h&&c(r),d&&d.d(h),h&&c(s)}}}function Ho(i,e,l){let t,n,a,r,s,o,f,u,p,m,d,_=O,h=()=>(_(),_=Ne(r,ee=>l(16,d=ee)),r),k,$=O,g=()=>($(),$=Ne(s,ee=>l(1,k=ee)),s),y,I=O,V=()=>(I(),I=Ne(f,ee=>l(2,y=ee)),f),C,M,A=O,H=()=>(A(),A=Ne(t,ee=>l(12,M=ee)),t),J,G=O,W=()=>(G(),G=Ne(n,ee=>l(13,J=ee)),n);i.$$.on_destroy.push(()=>_()),i.$$.on_destroy.push(()=>$()),i.$$.on_destroy.push(()=>I()),i.$$.on_destroy.push(()=>A()),i.$$.on_destroy.push(()=>G());const te=lt();Ae(i,te,ee=>l(17,C=ee));let z=null;const B=us(z),K=()=>y==null?void 0:y.fetchNextPage();function x(ee){Ue[ee?"unshift":"push"](()=>{z=ee,l(0,z)})}return i.$$.update=()=>{var ee,_e,he;i.$$.dirty&131072&&H(l(11,t=Zi(C.namespace,C.datasetName))),i.$$.dirty&131072&&W(l(10,n=Nt(C.namespace,C.datasetName))),i.$$.dirty&131072&&l(15,a=_l(C,!0)),i.$$.dirty&131072&&h(l(9,r=Tt(C.namespace,C.datasetName))),i.$$.dirty&131072&&g(l(8,s=_t(C.namespace,C.datasetName,ht(C)))),i.$$.dirty&131074&&l(7,o=Xi(C.query,k==null?void 0:k.data)),i.$$.dirty&163842&&V(l(6,f=Mr(C.namespace,C.datasetName,{...a,columns:[vt]},k!=null&&k.isSuccess?k.data.schema:void 0))),i.$$.dirty&4&&l(5,u=(ee=y.data)==null?void 0:ee.pages[0].total_num_rows),i.$$.dirty&4&&l(4,p=(_e=y.data)==null?void 0:_e.pages.flatMap(ne=>ne.rows).map(ne=>wt.value(Yt(ne,[vt]),"string"))),i.$$.dirty&65538&&l(3,m=d.data?xi((he=k==null?void 0:k.data)==null?void 0:he.schema,d.data):[]),i.$$.dirty&1&&B.set(z)},yr(zr,B),[z,k,y,m,p,u,f,o,s,r,n,t,M,J,te,a,d,C,K,x]}class Lo extends $e{constructor(e){super(),Ee(this,e,Ho,Ro,ke,{})}}function Vn(i){const e=i[3].find(function(...s){return i[43](i[53],...s)});i[54]=e;const l=i[54]!=null&&typeof i[54].id=="object"&&i[54].id.type==="field"&&i[54].id.isSignal;i[55]=l;const t=i[54]!=null&&typeof i[54].id=="object"&&i[54].id.type==="concept";i[56]=t;const n=i[54]!=null&&typeof i[54].id=="object"&&i[54].id.type==="label";i[57]=n;const a=i[54]!=null&&typeof i[54].id=="object"&&i[54].id.type==="label"&&(i[54].id.exclude||!1);i[58]=a}function Cn(i){const e=i[5].find(function(...t){return i[42](i[54],...t)});i[59]=e}function Mn(i){let e,l=i[59].text+"",t,n,a,r,s=i[59].embeddings.length>0&&zn(i);return{c(){e=N("div"),t=q(l),n=U(),s&&s.c(),a=ce(),this.h()},l(o){e=T(o,"DIV",{class:!0});var f=E(e);t=j(f,l),f.forEach(c),n=Q(o),s&&s.l(o),a=ce(),this.h()},h(){S(e,"class","w-full flex-grow truncate")},m(o,f){D(o,e,f),v(e,t),D(o,n,f),s&&s.m(o,f),D(o,a,f),r=!0},p(o,f){(!r||f[0]&32|f[1]&8388608)&&l!==(l=o[59].text+"")&&ae(t,l),o[59].embeddings.length>0?s?(s.p(o,f),f[0]&32|f[1]&8388608&&b(s,1)):(s=zn(o),s.c(),b(s,1),s.m(a.parentNode,a)):s&&(ie(),w(s,1,1,()=>{s=null}),re())},i(o){r||(b(s),r=!0)},o(o){w(s),r=!1},d(o){o&&c(e),o&&c(n),s&&s.d(o),o&&c(a)}}}function zn(i){let e,l,t,n,a,r;return l=new mt({props:{$$slots:{default:[Oo]},$$scope:{ctx:i}}}),{c(){e=N("div"),P(l.$$.fragment)},l(s){e=T(s,"DIV",{});var o=E(e);L(l.$$.fragment,o),o.forEach(c)},m(s,o){D(s,e,o),F(l,e,null),n=!0,a||(r=He(t=Le.call(null,e,{text:`Computed embeddings: ${i[59].embeddings.join(", ")}`})),a=!0)},p(s,o){i=s;const f={};o[1]&536870912&&(f.$$scope={dirty:o,ctx:i}),l.$set(f),t&&et(t.update)&&o[0]&32|o[1]&8388608&&t.update.call(null,{text:`Computed embeddings: ${i[59].embeddings.join(", ")}`})},i(s){n||(b(l.$$.fragment,s),n=!0)},o(s){w(l.$$.fragment,s),n=!1},d(s){s&&c(e),R(l),a=!1,r()}}}function Oo(i){let e,l;return e=new qr({}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function qo(i){Cn(i);let e,l,t=i[59]&&Mn(i);return{c(){e=N("div"),t&&t.c(),this.h()},l(n){e=T(n,"DIV",{class:!0});var a=E(e);t&&t.l(a),a.forEach(c),this.h()},h(){S(e,"class","flex h-full w-full items-center justify-between gap-x-1")},m(n,a){D(n,e,a),t&&t.m(e,null),l=!0},p(n,a){Cn(n),n[59]?t?(t.p(n,a),a[0]&32|a[1]&8388608&&b(t,1)):(t=Mn(n),t.c(),b(t,1),t.m(e,null)):t&&(ie(),w(t,1,1,()=>{t=null}),re())},i(n){l||(b(t),l=!0)},o(n){w(t),l=!1},d(n){n&&c(e),t&&t.d()}}}function jo(i){let e,l,t=i[54].text+"",n,a,r=i[54].description&&An(i);return{c(){e=N("div"),l=N("div"),n=q(t),a=U(),r&&r.c(),this.h()},l(s){e=T(s,"DIV",{class:!0});var o=E(e);l=T(o,"DIV",{});var f=E(l);n=j(f,t),f.forEach(c),a=Q(o),r&&r.l(o),o.forEach(c),this.h()},h(){S(e,"class","flex justify-between gap-x-8"),se(e,"isSignal",i[55]),se(e,"isConcept",i[56])},m(s,o){D(s,e,o),v(e,l),v(l,n),v(e,a),r&&r.m(e,null)},p(s,o){o[0]&8|o[1]&4194304&&t!==(t=s[54].text+"")&&ae(n,t),s[54].description?r?r.p(s,o):(r=An(s),r.c(),r.m(e,null)):r&&(r.d(1),r=null),o[0]&8|o[1]&4194304&&se(e,"isSignal",s[55]),o[0]&8|o[1]&4194304&&se(e,"isConcept",s[56])},i:O,o:O,d(s){s&&c(e),r&&r.d()}}}function Uo(i){let e,l,t=i[54].text+"",n,a,r,s=i[54].description+"",o;return{c(){e=N("div"),l=N("div"),n=q(t),a=U(),r=N("div"),o=q(s),this.h()},l(f){e=T(f,"DIV",{class:!0});var u=E(e);l=T(u,"DIV",{});var p=E(l);n=j(p,t),p.forEach(c),a=Q(u),r=T(u,"DIV",{class:!0});var m=E(r);o=j(m,s),m.forEach(c),u.forEach(c),this.h()},h(){S(r,"class","truncate text-xs text-gray-500"),S(e,"class","flex justify-between gap-x-8"),se(e,"isExcludeLabel",i[58]),se(e,"isLabel",i[57])},m(f,u){D(f,e,u),v(e,l),v(l,n),v(e,a),v(e,r),v(r,o)},p(f,u){u[0]&8|u[1]&4194304&&t!==(t=f[54].text+"")&&ae(n,t),u[0]&8|u[1]&4194304&&s!==(s=f[54].description+"")&&ae(o,s),u[0]&8|u[1]&4194304&&se(e,"isExcludeLabel",f[58]),u[0]&8|u[1]&4194304&&se(e,"isLabel",f[57])},i:O,o:O,d(f){f&&c(e)}}}function Qo(i){let e,l,t,n,a,r;return l=new mt({props:{$$slots:{default:[Ko]},$$scope:{ctx:i}}}),{c(){e=N("div"),P(l.$$.fragment),t=U(),n=N("div"),a=q("Compute embeddings to enable concept search."),this.h()},l(s){e=T(s,"DIV",{class:!0});var o=E(e);L(l.$$.fragment,o),t=Q(o),n=T(o,"DIV",{class:!0});var f=E(n);a=j(f,"Compute embeddings to enable concept search."),f.forEach(c),o.forEach(c),this.h()},h(){S(n,"class","ml-2"),S(e,"class","new-concept flex items-center")},m(s,o){D(s,e,o),F(l,e,null),v(e,t),v(e,n),v(n,a),r=!0},p(s,o){const f={};o[1]&536870912&&(f.$$scope={dirty:o,ctx:s}),l.$set(f)},i(s){r||(b(l.$$.fragment,s),r=!0)},o(s){w(l.$$.fragment,s),r=!1},d(s){s&&c(e),R(l)}}}function Yo(i){let e,l,t,n,a,r,s;return l=new mt({props:{$$slots:{default:[Zo]},$$scope:{ctx:i}}}),{c(){e=N("div"),P(l.$$.fragment),t=U(),n=N("div"),a=q(`Semantic search:
              `),r=q(i[1]),this.h()},l(o){e=T(o,"DIV",{class:!0});var f=E(e);L(l.$$.fragment,f),t=Q(f),n=T(f,"DIV",{class:!0});var u=E(n);a=j(u,`Semantic search:
              `),r=j(u,i[1]),u.forEach(c),f.forEach(c),this.h()},h(){S(n,"class","ml-2"),S(e,"class","new-keyword flex flex-row items-center justify-items-center")},m(o,f){D(o,e,f),F(l,e,null),v(e,t),v(e,n),v(n,a),v(n,r),s=!0},p(o,f){const u={};f[1]&536870912&&(u.$$scope={dirty:f,ctx:o}),l.$set(u),(!s||f[0]&2)&&ae(r,o[1])},i(o){s||(b(l.$$.fragment,o),s=!0)},o(o){w(l.$$.fragment,o),s=!1},d(o){o&&c(e),R(l)}}}function Go(i){let e,l,t,n,a,r,s;return l=new mt({props:{$$slots:{default:[Xo]},$$scope:{ctx:i}}}),{c(){e=N("div"),P(l.$$.fragment),t=U(),n=N("div"),a=q(`Keyword search:
              `),r=q(i[1]),this.h()},l(o){e=T(o,"DIV",{class:!0});var f=E(e);L(l.$$.fragment,f),t=Q(f),n=T(f,"DIV",{class:!0});var u=E(n);a=j(u,`Keyword search:
              `),r=j(u,i[1]),u.forEach(c),f.forEach(c),this.h()},h(){S(n,"class","ml-2"),S(e,"class","new-keyword flex flex-row items-center justify-items-center")},m(o,f){D(o,e,f),F(l,e,null),v(e,t),v(e,n),v(n,a),v(n,r),s=!0},p(o,f){const u={};f[1]&536870912&&(u.$$scope={dirty:f,ctx:o}),l.$set(u),(!s||f[0]&2)&&ae(r,o[1])},i(o){s||(b(l.$$.fragment,o),s=!0)},o(o){w(l.$$.fragment,o),s=!1},d(o){o&&c(e),R(l)}}}function Wo(i){let e,l,t,n,a,r=i[1]!=""?":":"",s,o,f,u;return l=new mt({props:{$$slots:{default:[xo]},$$scope:{ctx:i}}}),{c(){e=N("div"),P(l.$$.fragment),t=U(),n=N("div"),a=q("New concept"),s=q(r),o=U(),f=q(i[1]),this.h()},l(p){e=T(p,"DIV",{class:!0});var m=E(e);L(l.$$.fragment,m),t=Q(m),n=T(m,"DIV",{class:!0});var d=E(n);a=j(d,"New concept"),s=j(d,r),o=Q(d),f=j(d,i[1]),d.forEach(c),m.forEach(c),this.h()},h(){S(n,"class","ml-2"),S(e,"class","new-concept flex flex-row items-center justify-items-center")},m(p,m){D(p,e,m),F(l,e,null),v(e,t),v(e,n),v(n,a),v(n,s),v(n,o),v(n,f),u=!0},p(p,m){const d={};m[1]&536870912&&(d.$$scope={dirty:m,ctx:p}),l.$set(d),(!u||m[0]&2)&&r!==(r=p[1]!=""?":":"")&&ae(s,r),(!u||m[0]&2)&&ae(f,p[1])},i(p){u||(b(l.$$.fragment,p),u=!0)},o(p){w(l.$$.fragment,p),u=!1},d(p){p&&c(e),R(l)}}}function Jo(i){let e;return{c(){e=N("div")},l(l){e=T(l,"DIV",{}),E(e).forEach(c)},m(l,t){D(l,e,t)},p:O,i:O,o:O,d(l){l&&c(e)}}}function An(i){let e,l=i[54].description+"",t;return{c(){e=N("div"),t=q(l),this.h()},l(n){e=T(n,"DIV",{class:!0});var a=E(e);t=j(a,l),a.forEach(c),this.h()},h(){S(e,"class","truncate text-xs text-gray-500")},m(n,a){D(n,e,a),v(e,t)},p(n,a){a[0]&8|a[1]&4194304&&l!==(l=n[54].description+"")&&ae(t,l)},d(n){n&&c(e)}}}function Ko(i){let e,l;return e=new ar({}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Zo(i){let e,l;return e=new _r({}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Xo(i){let e,l;return e=new _r({}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function xo(i){let e,l;return e=new hs({}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function ef(i){Vn(i);let e,l,t,n;const a=[Jo,Wo,Go,Yo,Qo,Uo,jo],r=[];function s(o,f){return o[54]==null?0:o[54].id==="new-concept"?1:o[54].id==="keyword-search"?2:o[54].id==="semantic-search"?3:o[54].id==="compute-embedding"&&o[2]&&o[0]?4:o[57]?5:6}return e=s(i),l=r[e]=a[e](i),{c(){l.c(),t=ce()},l(o){l.l(o),t=ce()},m(o,f){r[e].m(o,f),D(o,t,f),n=!0},p(o,f){Vn(o);let u=e;e=s(o),e===u?r[e].p(o,f):(ie(),w(r[u],1,1,()=>{r[u]=null}),re(),l=r[e],l?l.p(o,f):(l=r[e]=a[e](o),l.c()),b(l,1),l.m(t.parentNode,t))},i(o){n||(b(l),n=!0)},o(o){w(l),n=!1},d(o){r[e].d(o),o&&c(t)}}}function tf(i){var $;let e,l,t,n,a,r,s,o,f,u,p,m,d,_;n=new ys({props:{class:"ml-2 mr-px",size:16}}),s=new gr({props:{size:"xl",class:"w-48",disabled:i[0]==null,selectedId:i[0]?ot(i[0]):($=i[5][0])==null?void 0:$.id,items:i[5],$$slots:{default:[qo,({item:g})=>({54:g}),({item:g})=>[0,g?8388608:0]]},$$scope:{ctx:i}}}),s.$on("select",i[17]);function h(g){i[45](g)}let k={size:"xl",class:"w-full",items:i[3],shouldFilterItem:lf,placeholder:i[6],$$slots:{default:[ef,({item:g})=>({53:g}),({item:g})=>[0,g?4194304:0]]},$$scope:{ctx:i}};return i[1]!==void 0&&(k.value=i[1]),u=new fr({props:k}),i[44](u),Ue.push(()=>Xe(u,"value",h)),u.$on("select",i[16]),{c(){e=N("div"),l=N("div"),t=N("div"),P(n.$$.fragment),a=U(),r=N("div"),P(s.$$.fragment),o=U(),f=N("div"),P(u.$$.fragment),this.h()},l(g){e=T(g,"DIV",{class:!0});var y=E(e);l=T(y,"DIV",{class:!0});var I=E(l);t=T(I,"DIV",{class:!0});var V=E(t);L(n.$$.fragment,V),V.forEach(c),a=Q(I),r=T(I,"DIV",{class:!0});var C=E(r);L(s.$$.fragment,C),C.forEach(c),o=Q(I),f=T(I,"DIV",{class:!0});var M=E(f);L(u.$$.fragment,M),M.forEach(c),I.forEach(c),y.forEach(c),this.h()},h(){S(t,"class","search-icon flex items-center svelte-m5d7d0"),S(r,"class","embedding-dropdown rounded border-r border-gray-200"),S(f,"class","search-container w-full flex-grow"),S(l,"class","flex w-full rounded border border-gray-200"),S(e,"class","flex h-full w-full flex-grow items-center")},m(g,y){D(g,e,y),v(e,l),v(l,t),F(n,t,null),v(l,a),v(l,r),F(s,r,null),v(l,o),v(l,f),F(u,f,null),m=!0,d||(_=He(Le.call(null,t,{text:"Select the field to search over."})),d=!0)},p(g,y){var C;const I={};y[0]&1&&(I.disabled=g[0]==null),y[0]&33&&(I.selectedId=g[0]?ot(g[0]):(C=g[5][0])==null?void 0:C.id),y[0]&32&&(I.items=g[5]),y[0]&32|y[1]&545259520&&(I.$$scope={dirty:y,ctx:g}),s.$set(I);const V={};y[0]&8&&(V.items=g[3]),y[0]&64&&(V.placeholder=g[6]),y[0]&15|y[1]&541065216&&(V.$$scope={dirty:y,ctx:g}),!p&&y[0]&2&&(p=!0,V.value=g[1],xe(()=>p=!1)),u.$set(V)},i(g){m||(b(n.$$.fragment,g),b(s.$$.fragment,g),b(u.$$.fragment,g),m=!0)},o(g){w(n.$$.fragment,g),w(s.$$.fragment,g),w(u.$$.fragment,g),m=!1},d(g){g&&c(e),R(n),R(s),i[44](null),R(u),d=!1,_()}}}const lf=(i,e)=>i.text.toLowerCase().includes(e.toLowerCase())||i.id==="new-concept"||i.id==="compute-embedding";function nf(i,e,l){let t,n,a,r,s,o,f,u,p,m,d,_,h,k,$,g,y,I,V,C,M=O,A=()=>(M(),M=Ne(o,de=>l(34,C=de)),o),H,J,G,W,te,z,B=O,K=()=>(B(),B=Ne(t,de=>l(39,z=de)),t),x,ee,_e=O,he=()=>(_e(),_e=Ne(s,de=>l(41,ee=de)),s);i.$$.on_destroy.push(()=>M()),i.$$.on_destroy.push(()=>B()),i.$$.on_destroy.push(()=>_e());const ne=lt();Ae(i,ne,de=>l(40,x=de));const ze=Es();Ae(i,ze,de=>l(38,te=de));let le;function fe(de,Ve){let Be=Ve.filter(qe=>qe.data!=null).map(qe=>qe.data).map(qe=>({path:qe.path,embeddings:Gt(de,qe.path),avgTextLength:qe.avg_text_length}));if(Be=Be.sort((qe,je)=>qe.embeddings.length>0&&je.embeddings.length===0?-1:qe.embeddings.length===0&&je.embeddings.length>0?1:qe.avgTextLength!=null&&je.avgTextLength!=null?je.avgTextLength-qe.avgTextLength:je.embeddings.length-qe.embeddings.length),Be.length!==0)return Be[0].path}function De(de,Ve,Be){var Oe,ue,Ie,ft;if(Ve==null||de==null)return[];const qe=Ve?bt(Ve):[],je=[];for(const We of qe){const Je=Or(We);if(We.dtype==null&&(Je==null?void 0:Je.signal_name)!="concept_score"||((Oe=We.dtype)==null?void 0:Oe.type)==="embedding"||((ue=We.dtype)==null?void 0:ue.type)==="binary"||!tr(We.path,de))continue;if((Je==null?void 0:Je.signal_name)==="concept_score"){const st=Je;el(We)&&je.push({id:{type:"field",path:[...We.path,At,"score"],op:"greater",opValue:.5,sort:"DESC",isSignal:Je!=null},text:st.concept_name,description:`Find documents with ${st.concept_name}`});continue}if(Be==null?void 0:Be.some(st=>st.name===(Je==null?void 0:Je.signal_name)))continue;const ct=at(We.path.slice(de.length)),Ct=Jt(We.path);if(Xt(We.dtype)){je.push({id:{type:"field",path:We.path,sort:"DESC",isSignal:Je!=null},text:ct,description:`Sort descending by ${Ct}`});continue}if(((Ie=We.dtype)==null?void 0:Ie.type)==="string"||((ft=We.dtype)==null?void 0:ft.type)==="string_span"){if(Je==null)continue;je.push({id:{type:"field",path:We.path,op:"exists",isSignal:Je!=null},text:ct,description:`Find documents with ${Ct}`});continue}}return je}const X=er();Ae(i,X,de=>l(46,H=de));const Y=Ar();Ae(i,Y,de=>l(37,W=de));const oe=(de,Ve)=>`${ot(de||"")}_${Ve}`;let Z={};const ye=Br();Ae(i,ye,de=>l(36,G=de));const ve=xt();Ae(i,ve,de=>l(35,J=de));let pe=[],we="",Ce;function Ze(){p!=null&&(l(18,Z[oe(le,p)]=!0,Z),H.mutate([n,a,{leaf_path:ul(le||[]),signal:{signal_name:p}}]))}let rt;const Re=(de,Ve)=>{le==null||p==null||(ne.addSearch({path:le,type:"concept",concept_namespace:de,concept_name:Ve,embedding:p}),rt.clear())},Qe=(de,Ve)=>{ne.addFilter({path:[de,"label"],op:Ve?"not_exists":"exists"})},Ye=de=>{if(le!=null){if(de.detail.selectedId==="new-concept"){we===Ce.id&&l(1,we="");const Ve=we.split("/",2);let Be="",qe="";Ve.length===2?[Be,qe]=Ve:[qe]=Ve,pt({command:gt.CreateConcept,namespace:Be,conceptName:qe,dataset:{namespace:n,name:a},path:le,onCreate:je=>Re(je.detail.namespace,je.detail.name)})}else if(de.detail.selectedId==="keyword-search"){if(we=="")return;ne.addSearch({path:le,type:"keyword",query:we})}else if(de.detail.selectedId=="semantic-search"){if(we==""||p==null)return;ne.addSearch({path:le,type:"semantic",query:we,query_type:"document",embedding:p})}else if(de.detail.selectedId=="compute-embedding")Ze();else if(de.detail.selectedId.type==="concept")Re(de.detail.selectedId.namespace,de.detail.selectedId.name);else if(de.detail.selectedId.type==="label"){const Ve=de.detail.selectedId;Qe(Ve.name,Ve.exclude||!1)}else if(de.detail.selectedId.type==="field"){const Ve=de.detail.selectedId;Ve.sort!=null&&(ne.setSortBy(Ve.path),ne.setSortOrder(Ve.sort)),Ve.op!=null&&ne.addFilter({path:Ve.path,op:Ve.op,value:Ve.opValue})}else throw new Error(`Unknown search type ${de.detail.selectedId}`);rt.clear()}},ll=de=>{l(0,le=de.detail.selectedItem.path)};let Vt=[];const nl=(de,Ve)=>Ve===de,qt=(de,Ve)=>Ve.id===de.id;function Ge(de){Ue[de?"unshift":"push"](()=>{rt=de,l(4,rt)})}function jt(de){we=de,l(1,we)}return i.$$.update=()=>{var de,Ve,Be,qe,je;i.$$.dirty[1]&512&&K(l(9,t=Tt(x.namespace,x.datasetName))),i.$$.dirty[1]&512&&l(22,n=x.namespace),i.$$.dirty[1]&512&&l(21,a=x.datasetName),i.$$.dirty[1]&256&&l(20,r=(Be=(Ve=(de=z.data)==null?void 0:de.ui)==null?void 0:Ve.media_paths)==null?void 0:Be.map(Oe=>Array.isArray(Oe)?Oe:[Oe])),i.$$.dirty[0]&7340032&&he(l(8,s=Pr(n,a,r,r!=null))),i.$$.dirty[0]&6291456&&A(l(7,o=Nt(n,a))),i.$$.dirty[0]&1|i.$$.dirty[1]&1032&&le==null&&C.data!=null&&l(0,le=fe(C.data,ee)),i.$$.dirty[0]&1|i.$$.dirty[1]&512&&l(23,f=dl(x,le)),i.$$.dirty[0]&1|i.$$.dirty[1]&72&&l(25,u=C.data!=null?De(le,C.data,W.data):[]),i.$$.dirty[0]&1|i.$$.dirty[1]&456&&l(2,p=Fr(z.data,te,C.data,le,(W.data||[]).map(Oe=>Oe.name))),i.$$.dirty[0]&1|i.$$.dirty[1]&8&&l(33,m=C.data!=null?Gt(C.data,le):[]),i.$$.dirty[0]&4|i.$$.dirty[1]&4&&l(28,d=m!=null&&!!m.includes(p||"")),i.$$.dirty[0]&268697605&&l(31,_=!d&&Z[oe(le,p)]),i.$$.dirty[0]&268435456&&l(6,h=d?"Search by keyword, field or concept.":"Search by keyword or field. Compute embedding to enable concept search."),i.$$.dirty[1]&16&&l(32,k=(je=(qe=J.data)==null?void 0:qe.user)==null?void 0:je.id),i.$$.dirty[0]&268435456|i.$$.dirty[1]&34&&l(24,$=d?Rr(G.data||[],k):[]),i.$$.dirty[0]&2&&l(19,Ce={id:"new-concept",text:we}),i.$$.dirty[0]&2&&l(30,g={id:"keyword-search",text:we}),i.$$.dirty[0]&2&&l(29,y={id:"semantic-search",text:we}),i.$$.dirty[1]&1&&l(27,I={id:"compute-embedding",text:"Compute embedding",disabled:_}),i.$$.dirty[1]&8&&l(26,V=C.data!=null?Hr(C.data):[]),i.$$.dirty[0]&2139619334|i.$$.dirty[1]&48&&l(3,pe=G!=null&&G.data?[...we!=""?[g]:[],...we!=""&&p&&d?[y]:[],...d?[Ce]:[I],...V.map(Oe=>({id:{type:"label",name:Oe,exclude:!1},text:Oe,description:`Find documents labeled "${Oe}"`})),...V.map(Oe=>({id:{type:"label",name:Oe,exclude:!0},text:Oe,description:`Exclude documents labeled "${Oe}"`})),...u,...$.flatMap(Oe=>Oe.concepts.map(ue=>({id:{namespace:ue.namespace,name:ue.name,type:"concept"},text:Lr(ue.namespace,ue.name,J.data),description:ue.metadata.description||void 0,disabled:f.some(Ie=>Ie.type==="concept"&&Ie.concept_namespace===ue.namespace&&Ie.concept_name===ue.name)})))]:[]),i.$$.dirty[0]&1048576|i.$$.dirty[1]&8&&l(5,Vt=(r||[]).map(Oe=>({id:ot(Oe),text:at(Oe),path:Oe,embeddings:C.data!=null?Gt(C.data,Oe):[]})))},[le,we,p,pe,rt,Vt,h,o,s,t,ne,ze,X,Y,ye,ve,Ye,ll,Z,Ce,r,a,n,f,$,u,V,I,d,y,g,_,k,m,C,J,G,W,te,z,x,ee,nl,qt,Ge,jt]}class rf extends $e{constructor(e){super(),Ee(this,e,nf,tf,ke,{},null,[-1,-1])}}function Bn(i){let e,l;return e=new Sr({props:{light:!0,flipped:!0,$$slots:{default:[sf]},$$scope:{ctx:i}}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const a={};n[0]&767|n[1]&4&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Pn(i){let e,l;return e=new kt({props:{text:"Sort by"}}),e.$on("click",i[22]),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p:O,i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Fn(i){let e,l;return e=new kt({props:{text:"Filter"}}),e.$on("click",i[23]),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p:O,i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Rn(i){let e,l,t,n,a,r;return l=new kt({props:{disabled:!i[7],text:"Compute embedding"}}),l.$on("click",i[24]),{c(){e=N("div"),P(l.$$.fragment),this.h()},l(s){e=T(s,"DIV",{class:!0});var o=E(e);L(l.$$.fragment,o),o.forEach(c),this.h()},h(){S(e,"class","w-full")},m(s,o){D(s,e,o),F(l,e,null),n=!0,a||(r=He(t=Le.call(null,e,{text:i[7]?"":"User does not have access to compute embeddings over this dataset."})),a=!0)},p(s,o){const f={};o[0]&128&&(f.disabled=!s[7]),l.$set(f),t&&et(t.update)&&o[0]&128&&t.update.call(null,{text:s[7]?"":"User does not have access to compute embeddings over this dataset."})},i(s){n||(b(l.$$.fragment,s),n=!0)},o(s){w(l.$$.fragment,s),n=!1},d(s){s&&c(e),R(l),a=!1,r()}}}function Hn(i){let e,l,t,n,a,r;return l=new kt({props:{text:"Compute concept",disabled:!i[7]||i[9].length===0}}),l.$on("click",i[25]),{c(){e=N("div"),P(l.$$.fragment),this.h()},l(s){e=T(s,"DIV",{class:!0});var o=E(e);L(l.$$.fragment,o),o.forEach(c),this.h()},h(){S(e,"class","w-full")},m(s,o){D(s,e,o),F(l,e,null),n=!0,a||(r=He(t=Le.call(null,e,{text:i[7]?i[9].length===0?"No embeddings are computed for this field. Compute embeddings before using concepts.":"":"User does not have access to compute concepts over this dataset."})),a=!0)},p(s,o){const f={};o[0]&640&&(f.disabled=!s[7]||s[9].length===0),l.$set(f),t&&et(t.update)&&o[0]&640&&t.update.call(null,{text:s[7]?s[9].length===0?"No embeddings are computed for this field. Compute embeddings before using concepts.":"":"User does not have access to compute concepts over this dataset."})},i(s){n||(b(l.$$.fragment,s),n=!0)},o(s){w(l.$$.fragment,s),n=!1},d(s){s&&c(e),R(l),a=!1,r()}}}function Ln(i){let e,l,t,n,a,r;return l=new kt({props:{text:"Compute signal",disabled:!i[7]}}),l.$on("click",i[26]),{c(){e=N("div"),P(l.$$.fragment),this.h()},l(s){e=T(s,"DIV",{class:!0});var o=E(e);L(l.$$.fragment,o),o.forEach(c),this.h()},h(){S(e,"class","w-full")},m(s,o){D(s,e,o),F(l,e,null),n=!0,a||(r=He(t=Le.call(null,e,{text:i[7]?"":"User does not have access to compute signals over this dataset."})),a=!0)},p(s,o){const f={};o[0]&128&&(f.disabled=!s[7]),l.$set(f),t&&et(t.update)&&o[0]&128&&t.update.call(null,{text:s[7]?"":"User does not have access to compute signals over this dataset."})},i(s){n||(b(l.$$.fragment,s),n=!0)},o(s){w(l.$$.fragment,s),n=!1},d(s){s&&c(e),R(l),a=!1,r()}}}function On(i){let e,l;return e=new kt({props:{text:"Preview signal"}}),e.$on("click",i[27]),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p:O,i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function qn(i){let e,l,t,n,a,r;return l=new kt({props:{disabled:!i[6],text:"Delete signal"}}),l.$on("click",i[28]),{c(){e=N("div"),P(l.$$.fragment),this.h()},l(s){e=T(s,"DIV",{class:!0});var o=E(e);L(l.$$.fragment,o),o.forEach(c),this.h()},h(){S(e,"class","w-full")},m(s,o){D(s,e,o),F(l,e,null),n=!0,a||(r=He(t=Le.call(null,e,{text:i[6]?"":"User does not have access to delete signals for this dataset."})),a=!0)},p(s,o){const f={};o[0]&64&&(f.disabled=!s[6]),l.$set(f),t&&et(t.update)&&o[0]&64&&t.update.call(null,{text:s[6]?"":"User does not have access to delete signals for this dataset."})},i(s){n||(b(l.$$.fragment,s),n=!0)},o(s){w(l.$$.fragment,s),n=!1},d(s){s&&c(e),R(l),a=!1,r()}}}function sf(i){let e=Kt(i[0]),l,t=rl(i[0]),n,a,r,s,o,f,u,p=e&&Pn(i),m=t&&Fn(i),d=!i[4]&&Rn(i),_=!i[4]&&Hn(i),h=!i[4]&&Ln(i),k=!i[4]&&On(i),$=i[3]&&qn(i);return{c(){p&&p.c(),l=U(),m&&m.c(),n=U(),d&&d.c(),a=U(),_&&_.c(),r=U(),h&&h.c(),s=U(),k&&k.c(),o=U(),$&&$.c(),f=ce()},l(g){p&&p.l(g),l=Q(g),m&&m.l(g),n=Q(g),d&&d.l(g),a=Q(g),_&&_.l(g),r=Q(g),h&&h.l(g),s=Q(g),k&&k.l(g),o=Q(g),$&&$.l(g),f=ce()},m(g,y){p&&p.m(g,y),D(g,l,y),m&&m.m(g,y),D(g,n,y),d&&d.m(g,y),D(g,a,y),_&&_.m(g,y),D(g,r,y),h&&h.m(g,y),D(g,s,y),k&&k.m(g,y),D(g,o,y),$&&$.m(g,y),D(g,f,y),u=!0},p(g,y){y[0]&1&&(e=Kt(g[0])),e?p?(p.p(g,y),y[0]&1&&b(p,1)):(p=Pn(g),p.c(),b(p,1),p.m(l.parentNode,l)):p&&(ie(),w(p,1,1,()=>{p=null}),re()),y[0]&1&&(t=rl(g[0])),t?m?(m.p(g,y),y[0]&1&&b(m,1)):(m=Fn(g),m.c(),b(m,1),m.m(n.parentNode,n)):m&&(ie(),w(m,1,1,()=>{m=null}),re()),g[4]?d&&(ie(),w(d,1,1,()=>{d=null}),re()):d?(d.p(g,y),y[0]&16&&b(d,1)):(d=Rn(g),d.c(),b(d,1),d.m(a.parentNode,a)),g[4]?_&&(ie(),w(_,1,1,()=>{_=null}),re()):_?(_.p(g,y),y[0]&16&&b(_,1)):(_=Hn(g),_.c(),b(_,1),_.m(r.parentNode,r)),g[4]?h&&(ie(),w(h,1,1,()=>{h=null}),re()):h?(h.p(g,y),y[0]&16&&b(h,1)):(h=Ln(g),h.c(),b(h,1),h.m(s.parentNode,s)),g[4]?k&&(ie(),w(k,1,1,()=>{k=null}),re()):k?(k.p(g,y),y[0]&16&&b(k,1)):(k=On(g),k.c(),b(k,1),k.m(o.parentNode,o)),g[3]?$?($.p(g,y),y[0]&8&&b($,1)):($=qn(g),$.c(),b($,1),$.m(f.parentNode,f)):$&&(ie(),w($,1,1,()=>{$=null}),re())},i(g){u||(b(p),b(m),b(d),b(_),b(h),b(k),b($),u=!0)},o(g){w(p),w(m),w(d),w(_),w(h),w(k),w($),u=!1},d(g){p&&p.d(g),g&&c(l),m&&m.d(g),g&&c(n),d&&d.d(g),g&&c(a),_&&_.d(g),g&&c(r),h&&h.d(g),g&&c(s),k&&k.d(g),g&&c(o),$&&$.d(g),g&&c(f)}}}function af(i){let e,l,t,n=ot(i[0].path)+"",a,r,s,o,f;return{c(){e=N("p"),l=q("Confirm deleting "),t=N("code"),a=q(n),r=q(" ?"),s=U(),o=N("p"),f=q("This is a permanent action and cannot be undone."),this.h()},l(u){e=T(u,"P",{class:!0});var p=E(e);l=j(p,"Confirm deleting "),t=T(p,"CODE",{});var m=E(t);a=j(m,n),m.forEach(c),r=j(p," ?"),p.forEach(c),s=Q(u),o=T(u,"P",{class:!0});var d=E(o);f=j(d,"This is a permanent action and cannot be undone."),d.forEach(c),this.h()},h(){S(e,"class","!text-lg"),S(o,"class","mt-2")},m(u,p){D(u,e,p),v(e,l),v(e,t),v(t,a),v(e,r),D(u,s,p),D(u,o,p),v(o,f)},p(u,p){p[0]&1&&n!==(n=ot(u[0].path)+"")&&ae(a,n)},d(u){u&&c(e),u&&c(s),u&&c(o)}}}function of(i){let e,l,t,n,a=i[8]&&Bn(i);function r(o){i[29](o)}let s={danger:!0,modalHeading:"Delete signal",primaryButtonText:"Delete",primaryButtonIcon:i[12].isLoading?Tl:void 0,secondaryButtonText:"Cancel",$$slots:{default:[af]},$$scope:{ctx:i}};return i[5]!==void 0&&(s.open=i[5]),l=new kl({props:s}),Ue.push(()=>Xe(l,"open",r)),l.$on("click:button--secondary",i[30]),l.$on("open",i[31]),l.$on("close",i[32]),l.$on("submit",i[16]),{c(){a&&a.c(),e=U(),P(l.$$.fragment)},l(o){a&&a.l(o),e=Q(o),L(l.$$.fragment,o)},m(o,f){a&&a.m(o,f),D(o,e,f),F(l,o,f),n=!0},p(o,f){o[8]?a?(a.p(o,f),f[0]&256&&b(a,1)):(a=Bn(o),a.c(),b(a,1),a.m(e.parentNode,e)):a&&(ie(),w(a,1,1,()=>{a=null}),re());const u={};f[0]&4096&&(u.primaryButtonIcon=o[12].isLoading?Tl:void 0),f[0]&1|f[1]&4&&(u.$$scope={dirty:f,ctx:o}),!t&&f[0]&32&&(t=!0,u.open=o[5],xe(()=>t=!1)),l.$set(u)},i(o){n||(b(a),b(l.$$.fragment,o),n=!0)},o(o){w(a),w(l.$$.fragment,o),n=!1},d(o){a&&a.d(o),o&&c(e),R(l,o)}}}function ff(i,e,l){let t,n,a,r,s,o,f,u,p,m,d,_,h,k,$=O,g=()=>($(),$=Ne(r,fe=>l(19,k=fe)),r),y,I=O,V=()=>(I(),I=Ne(a,fe=>l(20,y=fe)),a),C;i.$$.on_destroy.push(()=>$()),i.$$.on_destroy.push(()=>I());let{field:M}=e,A=!1;const H=lt();Ae(i,H,fe=>l(21,C=fe));const J=jr();Ae(i,J,fe=>l(12,_=fe));const G=xt();Ae(i,G,fe=>l(18,h=fe));function W(){_.mutate([t,n,{signal_path:M.path}],{onSuccess:()=>{l(5,A=!1),H.deleteSignal(M.path)}})}const te=()=>H.addSortBy(M.path),z=()=>pt({command:gt.EditFilter,namespace:t,datasetName:n,path:M.path}),B=()=>pt({command:gt.ComputeEmbedding,namespace:t,datasetName:n,path:M==null?void 0:M.path}),K=()=>pt({command:gt.ComputeConcept,namespace:t,datasetName:n,path:M==null?void 0:M.path}),x=()=>pt({command:gt.ComputeSignal,namespace:t,datasetName:n,path:M==null?void 0:M.path}),ee=()=>pt({command:gt.PreviewConcept,namespace:t,datasetName:n,path:M==null?void 0:M.path}),_e=()=>l(5,A=!0);function he(fe){A=fe,l(5,A)}const ne=()=>l(5,A=!1);function ze(fe){nt.call(this,i,fe)}function le(fe){nt.call(this,i,fe)}return i.$$set=fe=>{"field"in fe&&l(0,M=fe.field)},i.$$.update=()=>{var fe,De;i.$$.dirty[0]&2097152&&l(2,t=C.namespace),i.$$.dirty[0]&2097152&&l(1,n=C.datasetName),i.$$.dirty[0]&6&&V(l(11,a=Nt(t,n))),i.$$.dirty[0]&2097158&&g(l(10,r=_t(t,n,ht(C)))),i.$$.dirty[0]&1&&l(4,s=It(M)),i.$$.dirty[0]&1&&l(3,o=el(M)),i.$$.dirty[0]&1048577&&l(9,f=Gt(y.data,M.path)),i.$$.dirty[0]&524289&&l(17,u=lr((k==null?void 0:k.data)||null,M.path)),i.$$.dirty[0]&131097&&l(8,p=(Kt(M)||rl(M)||!s||o)&&!u),i.$$.dirty[0]&262144&&l(7,m=(fe=h.data)==null?void 0:fe.access.dataset.compute_signals),i.$$.dirty[0]&262144&&l(6,d=(De=h.data)==null?void 0:De.access.dataset.delete_signals)},[M,n,t,o,s,A,d,m,p,f,r,a,_,H,J,G,W,u,h,k,y,C,te,z,B,K,x,ee,_e,he,ne,ze,le]}class uf extends $e{constructor(e){super(),Ee(this,e,ff,of,ke,{field:0},null,[-1,-1])}}function cf(i){let e,l,t,n,a;const r=[i[3],{type:i[0]?"green":"blue"},{icon:i[2]}];let s={};for(let o=0;o<r.length;o+=1)s=me(s,r[o]);return l=new mt({props:s}),{c(){e=N("div"),P(l.$$.fragment),this.h()},l(o){e=T(o,"DIV",{class:!0});var f=E(e);L(l.$$.fragment,f),f.forEach(c),this.h()},h(){S(e,"class","signal-badge")},m(o,f){D(o,e,f),F(l,e,null),t=!0,n||(a=He(Le.call(null,e,{text:i[1]})),n=!0)},p(o,[f]){const u=f&13?Ke(r,[f&8&&al(o[3]),f&1&&{type:o[0]?"green":"blue"},f&4&&{icon:o[2]}]):{};l.$set(u)},i(o){t||(b(l.$$.fragment,o),t=!0)},o(o){w(l.$$.fragment,o),t=!1},d(o){o&&c(e),R(l),n=!1,a()}}}function df(i,e,l){const t=["isPreview"];let n=Se(e,t),{isPreview:a=!1}=e;const r=a?"Signal is in preview mode and has not been computed for the whole dataset.":"Generated by a signal.",s=a?ds:Ls;return i.$$set=o=>{e=me(me({},e),Te(o)),l(3,n=Se(e,t)),"isPreview"in o&&l(0,a=o.isPreview)},[a,r,s,n]}class mf extends $e{constructor(e){super(),Ee(this,e,df,cf,ke,{isPreview:0})}}function jn(i,e,l){const t=i.slice();t[7]=e[l][0],t[8]=e[l][1];const n=t[2](t[7]);t[9]=n;const a=`${t[8]/t[1]*100}%`;t[10]=a;const r=Me(t[8]);return t[11]=r,t}function Un(i){let e,l,t=i[9]+"",n,a,r,s,o,f=i[11]+"",u,p,m,d,_;function h(){return i[6](i[7])}return{c(){e=N("button"),l=N("div"),n=q(t),r=U(),s=N("div"),o=N("div"),u=q(f),m=U(),this.h()},l(k){e=T(k,"BUTTON",{class:!0});var $=E(e);l=T($,"DIV",{title:!0,class:!0});var g=E(l);n=j(g,t),g.forEach(c),r=Q($),s=T($,"DIV",{class:!0});var y=E(s);o=T(y,"DIV",{title:!0,class:!0});var I=E(o);u=j(I,f),I.forEach(c),y.forEach(c),m=Q($),$.forEach(c),this.h()},h(){S(l,"title",a=i[9]),S(l,"class","w-48 flex-none truncate px-2"),S(o,"title",p=i[11]),S(o,"class","histogram-bar my-px bg-indigo-200 pl-2 text-xs leading-5"),Mt(o,"width",i[10]),S(s,"class","w-36 border-l border-gray-300 pl-2"),S(e,"class","flex items-center p-0 text-left text-xs text-black hover:bg-gray-200")},m(k,$){D(k,e,$),v(e,l),v(l,n),v(e,r),v(e,s),v(s,o),v(o,u),v(e,m),d||(_=Pe(e,"click",h),d=!0)},p(k,$){i=k,$&1&&t!==(t=i[9]+"")&&ae(n,t),$&1&&a!==(a=i[9])&&S(l,"title",a),$&1&&f!==(f=i[11]+"")&&ae(u,f),$&1&&p!==(p=i[11])&&S(o,"title",p),$&3&&Mt(o,"width",i[10])},d(k){k&&c(e),d=!1,_()}}}function _f(i){let e,l=i[0],t=[];for(let n=0;n<l.length;n+=1)t[n]=Un(jn(i,l,n));return{c(){e=N("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=T(n,"DIV",{class:!0});var a=E(e);for(let r=0;r<t.length;r+=1)t[r].l(a);a.forEach(c),this.h()},h(){S(e,"class","histogram")},m(n,a){D(n,e,a);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null)},p(n,[a]){if(a&15){l=n[0];let r;for(r=0;r<l.length;r+=1){const s=jn(n,l,r);t[r]?t[r].p(s,a):(t[r]=Un(s),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},i:O,o:O,d(n){n&&c(e),tt(t,n)}}}function hf(i,e,l){let t,{field:n}=e,{counts:a}=e,{bins:r}=e;function s(u){if(u==null)return Me(u);if(r==null||n.bins!=null)return Me(u);const[p,m]=r[u.toString()];return p==null?`< ${Me(m)}`:m==null?`≥ ${Me(p)}`:`${Me(p)} .. ${Me(m)}`}const o=Dt(),f=u=>o("row-click",{value:u});return i.$$set=u=>{"field"in u&&l(4,n=u.field),"counts"in u&&l(0,a=u.counts),"bins"in u&&l(5,r=u.bins)},i.$$.update=()=>{i.$$.dirty&1&&l(1,t=Math.max(...a.map(([u,p])=>p)))},[a,t,s,o,n,r,f]}class pf extends $e{constructor(e){super(),Ee(this,e,hf,_f,ke,{field:4,counts:0,bins:5})}}function gf(i){let e,l,t,n,a,r,s,o,f,u,p,m=Me(i[4].total_count)+"",d,_,h,k,$,g,y,I,V,C,M,A,H=Me(i[4].approx_count_distinct)+"",J,G,W,te,z,B;r=new Bt({props:{class:"inline"}}),g=new Bt({props:{class:"inline"}});let K=i[4].avg_text_length&&Qn(i),x=i[4].min_val&&i[4].max_val&&Yn(i);return{c(){e=N("table"),l=N("tbody"),t=N("tr"),n=N("td"),a=N("span"),P(r.$$.fragment),s=U(),o=N("span"),f=q("Total count"),u=U(),p=N("td"),d=q(m),_=U(),h=N("tr"),k=N("td"),$=N("span"),P(g.$$.fragment),y=U(),I=N("span"),V=q("Unique values"),C=U(),M=N("td"),A=q("~"),J=q(H),G=U(),K&&K.c(),W=U(),x&&x.c(),this.h()},l(ee){e=T(ee,"TABLE",{class:!0});var _e=E(e);l=T(_e,"TBODY",{});var he=E(l);t=T(he,"TR",{});var ne=E(t);n=T(ne,"TD",{class:!0});var ze=E(n);a=T(ze,"SPAN",{});var le=E(a);L(r.$$.fragment,le),le.forEach(c),s=Q(ze),o=T(ze,"SPAN",{});var fe=E(o);f=j(fe,"Total count"),fe.forEach(c),ze.forEach(c),u=Q(ne),p=T(ne,"TD",{class:!0});var De=E(p);d=j(De,m),De.forEach(c),ne.forEach(c),_=Q(he),h=T(he,"TR",{});var X=E(h);k=T(X,"TD",{class:!0});var Y=E(k);$=T(Y,"SPAN",{});var oe=E($);L(g.$$.fragment,oe),oe.forEach(c),y=Q(Y),I=T(Y,"SPAN",{});var Z=E(I);V=j(Z,"Unique values"),Z.forEach(c),Y.forEach(c),C=Q(X),M=T(X,"TD",{class:!0});var ye=E(M);A=j(ye,"~"),J=j(ye,H),ye.forEach(c),X.forEach(c),G=Q(he),K&&K.l(he),W=Q(he),x&&x.l(he),he.forEach(c),_e.forEach(c),this.h()},h(){S(n,"class","svelte-1tctrjz"),S(p,"class","svelte-1tctrjz"),S(k,"class","svelte-1tctrjz"),S(M,"class","svelte-1tctrjz"),S(e,"class","stats-table w-full svelte-1tctrjz")},m(ee,_e){D(ee,e,_e),v(e,l),v(l,t),v(t,n),v(n,a),F(r,a,null),v(n,s),v(n,o),v(o,f),v(t,u),v(t,p),v(p,d),v(l,_),v(l,h),v(h,k),v(k,$),F(g,$,null),v(k,y),v(k,I),v(I,V),v(h,C),v(h,M),v(M,A),v(M,J),v(l,G),K&&K.m(l,null),v(l,W),x&&x.m(l,null),te=!0,z||(B=[He(Le.call(null,a,{text:"Total number of rows where the value is defined."})),He(Le.call(null,$,{text:"An approximation of the total number of unique values."}))],z=!0)},p(ee,_e){(!te||_e&16)&&m!==(m=Me(ee[4].total_count)+"")&&ae(d,m),(!te||_e&16)&&H!==(H=Me(ee[4].approx_count_distinct)+"")&&ae(J,H),ee[4].avg_text_length?K?(K.p(ee,_e),_e&16&&b(K,1)):(K=Qn(ee),K.c(),b(K,1),K.m(l,W)):K&&(ie(),w(K,1,1,()=>{K=null}),re()),ee[4].min_val&&ee[4].max_val?x?(x.p(ee,_e),_e&16&&b(x,1)):(x=Yn(ee),x.c(),b(x,1),x.m(l,null)):x&&(ie(),w(x,1,1,()=>{x=null}),re())},i(ee){te||(b(r.$$.fragment,ee),b(g.$$.fragment,ee),b(K),b(x),te=!0)},o(ee){w(r.$$.fragment,ee),w(g.$$.fragment,ee),w(K),w(x),te=!1},d(ee){ee&&c(e),R(r),R(g),K&&K.d(),x&&x.d(),z=!1,dt(B)}}}function bf(i){let e,l;return e=new it({props:{paragraph:!0,width:"50%"}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p:O,i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function vf(i){let e,l,t=i[2].error.message+"",n;return{c(){e=N("p"),l=q("Error: "),n=q(t)},l(a){e=T(a,"P",{});var r=E(e);l=j(r,"Error: "),n=j(r,t),r.forEach(c)},m(a,r){D(a,e,r),v(e,l),v(e,n)},p(a,r){r&4&&t!==(t=a[2].error.message+"")&&ae(n,t)},i:O,o:O,d(a){a&&c(e)}}}function Qn(i){let e,l,t,n,a,r,s,o,f,u=Me(i[4].avg_text_length)+"",p,m,d,_;return n=new Bt({props:{class:"inline"}}),{c(){e=N("tr"),l=N("td"),t=N("span"),P(n.$$.fragment),a=U(),r=N("span"),s=q("Average text length"),o=U(),f=N("td"),p=q(u),this.h()},l(h){e=T(h,"TR",{});var k=E(e);l=T(k,"TD",{class:!0});var $=E(l);t=T($,"SPAN",{});var g=E(t);L(n.$$.fragment,g),g.forEach(c),a=Q($),r=T($,"SPAN",{});var y=E(r);s=j(y,"Average text length"),y.forEach(c),$.forEach(c),o=Q(k),f=T(k,"TD",{class:!0});var I=E(f);p=j(I,u),I.forEach(c),k.forEach(c),this.h()},h(){S(l,"class","svelte-1tctrjz"),S(f,"class","svelte-1tctrjz")},m(h,k){D(h,e,k),v(e,l),v(l,t),F(n,t,null),v(l,a),v(l,r),v(r,s),v(e,o),v(e,f),v(f,p),m=!0,d||(_=He(Le.call(null,t,{text:"The average length of the text in characters."})),d=!0)},p(h,k){(!m||k&16)&&u!==(u=Me(h[4].avg_text_length)+"")&&ae(p,u)},i(h){m||(b(n.$$.fragment,h),m=!0)},o(h){w(n.$$.fragment,h),m=!1},d(h){h&&c(e),R(n),d=!1,_()}}}function Yn(i){let e,l,t,n,a,r,s,o,f,u=Me(i[4].min_val)+"",p,m,d=Me(i[4].max_val)+"",_,h,k,$;return n=new Bt({props:{class:"inline"}}),{c(){e=N("tr"),l=N("td"),t=N("span"),P(n.$$.fragment),a=U(),r=N("span"),s=q("Range"),o=U(),f=N("td"),p=q(u),m=q(" .. "),_=q(d),this.h()},l(g){e=T(g,"TR",{});var y=E(e);l=T(y,"TD",{class:!0});var I=E(l);t=T(I,"SPAN",{});var V=E(t);L(n.$$.fragment,V),V.forEach(c),a=Q(I),r=T(I,"SPAN",{});var C=E(r);s=j(C,"Range"),C.forEach(c),I.forEach(c),o=Q(y),f=T(y,"TD",{class:!0});var M=E(f);p=j(M,u),m=j(M," .. "),_=j(M,d),M.forEach(c),y.forEach(c),this.h()},h(){S(l,"class","svelte-1tctrjz"),S(f,"class","svelte-1tctrjz")},m(g,y){D(g,e,y),v(e,l),v(l,t),F(n,t,null),v(l,a),v(l,r),v(r,s),v(e,o),v(e,f),v(f,p),v(f,m),v(f,_),h=!0,k||($=He(Le.call(null,t,{text:"The minimum and maximum value across the dataset"})),k=!0)},p(g,y){(!h||y&16)&&u!==(u=Me(g[4].min_val)+"")&&ae(p,u),(!h||y&16)&&d!==(d=Me(g[4].max_val)+"")&&ae(_,d)},i(g){h||(b(n.$$.fragment,g),h=!0)},o(g){w(n.$$.fragment,g),h=!1},d(g){g&&c(e),R(n),k=!1,$()}}}function wf(i){let e,l,t;return l=new pf({props:{counts:i[5],bins:i[3],field:i[0]}}),l.$on("row-click",i[13]),{c(){e=N("div"),P(l.$$.fragment),this.h()},l(n){e=T(n,"DIV",{class:!0});var a=E(e);L(l.$$.fragment,a),a.forEach(c),this.h()},h(){S(e,"class","mt-4")},m(n,a){D(n,e,a),F(l,e,null),t=!0},p(n,a){const r={};a&32&&(r.counts=n[5]),a&8&&(r.bins=n[3]),a&1&&(r.field=n[0]),l.$set(r)},i(n){t||(b(l.$$.fragment,n),t=!0)},o(n){w(l.$$.fragment,n),t=!1},d(n){n&&c(e),R(l)}}}function kf(i){let e,l;return e=new it({props:{paragraph:!0,width:"50%"}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p:O,i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function $f(i){let e,l,t=i[1].error.message+"",n;return{c(){e=N("p"),l=q("Error: "),n=q(t)},l(a){e=T(a,"P",{});var r=E(e);l=j(r,"Error: "),n=j(r,t),r.forEach(c)},m(a,r){D(a,e,r),v(e,l),v(e,n)},p(a,r){r&2&&t!==(t=a[1].error.message+"")&&ae(n,t)},i:O,o:O,d(a){a&&c(e)}}}function Ef(i){let e,l,t,n,a,r,s;const o=[vf,bf,gf],f=[];function u(_,h){return _[2].error?0:_[4]==null?1:2}l=u(i),t=f[l]=o[l](i);const p=[$f,kf,wf],m=[];function d(_,h){return _[1].error?0:_[5]==null?1:_[5].length>0?2:-1}return~(a=d(i))&&(r=m[a]=p[a](i)),{c(){e=N("div"),t.c(),n=U(),r&&r.c(),this.h()},l(_){e=T(_,"DIV",{class:!0});var h=E(e);t.l(h),n=Q(h),r&&r.l(h),h.forEach(c),this.h()},h(){S(e,"class","p-4")},m(_,h){D(_,e,h),f[l].m(e,null),v(e,n),~a&&m[a].m(e,null),s=!0},p(_,[h]){let k=l;l=u(_),l===k?f[l].p(_,h):(ie(),w(f[k],1,1,()=>{f[k]=null}),re(),t=f[l],t?t.p(_,h):(t=f[l]=o[l](_),t.c()),b(t,1),t.m(e,n));let $=a;a=d(_),a===$?~a&&m[a].p(_,h):(r&&(ie(),w(m[$],1,1,()=>{m[$]=null}),re()),~a?(r=m[a],r?r.p(_,h):(r=m[a]=p[a](_),r.c()),b(r,1),r.m(e,null)):r=null)},i(_){s||(b(t),b(r),s=!0)},o(_){w(t),w(r),s=!1},d(_){_&&c(e),f[l].d(),~a&&m[a].d()}}}function yf(i,e,l){let t,n,a,r,s,o=O,f=()=>(o(),o=Ne(n,V=>l(1,s=V)),n),u,p=O,m=()=>(p(),p=Ne(t,V=>l(2,u=V)),t),d;i.$$.on_destroy.push(()=>o()),i.$$.on_destroy.push(()=>p());let{field:_}=e;const h=lt();Ae(i,h,V=>l(12,d=V));let k,$,g=null;function y(V){if(V==null){h.addFilter({path:_.path,op:"not_exists"});return}if(g!=null){const[M,A]=g[V.toString()];if(M!=null){const H={path:_.path,op:"greater_equal",value:M};h.addFilter(H)}if(A!=null){const H={path:_.path,op:"less",value:A};h.addFilter(H)}return}const C={path:_.path,op:"equals",value:V};h.addFilter(C)}const I=V=>y(V.detail.value);return i.$$set=V=>{"field"in V&&l(0,_=V.field)},i.$$.update=()=>{var V;if(i.$$.dirty&4097&&m(l(7,t=nr(d.namespace,d.datasetName,{leaf_path:_.path}))),i.$$.dirty&1&&l(10,k=Xt(_.dtype)&&!_.categorical?"value":"count"),i.$$.dirty&1024&&l(11,$=k==="value"?"ASC":"DESC"),i.$$.dirty&7169&&f(l(6,n=cl(d.namespace,d.datasetName,{leaf_path:_.path,filters:d.query.filters,sort_by:k,sort_order:$}))),i.$$.dirty&2&&l(5,a=s.data!=null?s.data.counts:null),i.$$.dirty&4&&l(4,r=u.data!=null?u.data:null),i.$$.dirty&2)if(((V=s.data)==null?void 0:V.bins)!=null){l(3,g={});for(const[C,M,A]of Object.values(s.data.bins))l(3,g[C]=[M,A],g)}else l(3,g=null)},[_,s,u,g,r,a,n,t,h,y,k,$,d,I]}class If extends $e{constructor(e){super(),Ee(this,e,yf,Ef,ke,{field:0})}}function Gn(i,e,l){const t=i.slice();return t[40]=e[l],t}function Wn(i,e,l){const t=i.slice();return t[43]=e[l],t}function Jn(i,e,l){const t=i.slice();return t[46]=e[l],t}function Sf(i){const e=i.slice(),l=Rf(e[46]);return e[49]=l,e}function Kn(i,e,l){const t=i.slice();return t[49]=e[l],t}function Df(i){let e,l="{}",t;return{c(){e=N("span"),t=q(l),this.h()},l(n){e=T(n,"SPAN",{class:!0});var a=E(e);t=j(a,l),a.forEach(c),this.h()},h(){S(e,"class","font-mono")},m(n,a){D(n,e,a),v(e,t)},p:O,i:O,o:O,d(n){n&&c(e)}}}function Nf(i){let e,l,t,n;const a=[Cf,Vf],r=[];function s(o,f){return o[1].repeated_field.dtype.type!=="map"?0:1}return l=s(i),t=r[l]=a[l](i),{c(){e=N("div"),t.c(),this.h()},l(o){e=T(o,"DIV",{class:!0});var f=E(e);t.l(f),f.forEach(c),this.h()},h(){S(e,"class","flex")},m(o,f){D(o,e,f),r[l].m(e,null),n=!0},p(o,f){let u=l;l=s(o),l===u?r[l].p(o,f):(ie(),w(r[u],1,1,()=>{r[u]=null}),re(),t=r[l],t?t.p(o,f):(t=r[l]=a[l](o),t.c()),b(t,1),t.m(e,null))},i(o){n||(b(t),n=!0)},o(o){w(t),n=!1},d(o){o&&c(e),r[l].d()}}}function Tf(i){let e,l,t;var n=St[i[1].dtype.type];function a(r){return{props:{title:r[1].dtype.type}}}return n&&(e=yt(n,a(i))),{c(){e&&P(e.$$.fragment),l=ce()},l(r){e&&L(e.$$.fragment,r),l=ce()},m(r,s){e&&F(e,r,s),D(r,l,s),t=!0},p(r,s){const o={};if(s[0]&2&&(o.title=r[1].dtype.type),s[0]&2&&n!==(n=St[r[1].dtype.type])){if(e){ie();const f=e;w(f.$$.fragment,1,0,()=>{R(f,1)}),re()}n?(e=yt(n,a(r)),P(e.$$.fragment),b(e.$$.fragment,1),F(e,l.parentNode,l)):e=null}else n&&e.$set(o)},i(r){t||(e&&b(e.$$.fragment,r),t=!0)},o(r){e&&w(e.$$.fragment,r),t=!1},d(r){r&&c(l),e&&R(e,r)}}}function Vf(i){let e,l="{}[]",t,n;return{c(){e=N("span"),t=q(l),this.h()},l(a){e=T(a,"SPAN",{title:!0,class:!0});var r=E(e);t=j(r,l),r.forEach(c),this.h()},h(){S(e,"title",n=`array of ${i[1].repeated_field.dtype.type}`),S(e,"class","font-mono")},m(a,r){D(a,e,r),v(e,t)},p(a,r){r[0]&2&&n!==(n=`array of ${a[1].repeated_field.dtype.type}`)&&S(e,"title",n)},i:O,o:O,d(a){a&&c(e)}}}function Cf(i){let e,l,t;var n=St[i[1].repeated_field.dtype.type];function a(r){return{props:{title:`array of ${r[1].repeated_field.dtype.type}`}}}return n&&(e=yt(n,a(i))),{c(){e&&P(e.$$.fragment),l=q("[]")},l(r){e&&L(e.$$.fragment,r),l=j(r,"[]")},m(r,s){e&&F(e,r,s),D(r,l,s),t=!0},p(r,s){const o={};if(s[0]&2&&(o.title=`array of ${r[1].repeated_field.dtype.type}`),s[0]&2&&n!==(n=St[r[1].repeated_field.dtype.type])){if(e){ie();const f=e;w(f.$$.fragment,1,0,()=>{R(f,1)}),re()}n?(e=yt(n,a(r)),P(e.$$.fragment),b(e.$$.fragment,1),F(e,l.parentNode,l)):e=null}else n&&e.$set(o)},i(r){t||(e&&b(e.$$.fragment,r),t=!0)},o(r){e&&w(e.$$.fragment,r),t=!1},d(r){e&&R(e,r),r&&c(l)}}}function Zn(i){let e,l;return e=new tl({props:{interactive:!0,type:"green",$$slots:{default:[Af]},$$scope:{ctx:i}}}),e.$on("click",i[34]),e.$on("remove",i[35]),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const a={};n[0]&65536|n[1]&2097152&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Mf(i){let e,l;return e=new pr({}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function zf(i){let e,l;return e=new hr({}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Af(i){let e,l,t,n,a,r,s,o;const f=[zf,Mf],u=[];function p(m,d){return m[16]=="ASC"?0:1}return r=p(i),s=u[r]=f[r](i),{c(){e=N("div"),l=N("div"),t=q("Sorted"),n=U(),a=N("span"),s.c(),this.h()},l(m){e=T(m,"DIV",{class:!0});var d=E(e);l=T(d,"DIV",{class:!0});var _=E(l);t=j(_,"Sorted"),_.forEach(c),n=Q(d),a=T(d,"SPAN",{});var h=E(a);s.l(h),h.forEach(c),d.forEach(c),this.h()},h(){S(l,"class","mr-1"),S(e,"class","flex flex-row")},m(m,d){D(m,e,d),v(e,l),v(l,t),v(e,n),v(e,a),u[r].m(a,null),o=!0},p(m,d){let _=r;r=p(m),r!==_&&(ie(),w(u[_],1,1,()=>{u[_]=null}),re(),s=u[r],s||(s=u[r]=f[r](m),s.c()),b(s,1),s.m(a,null))},i(m){o||(b(s),o=!0)},o(m){w(s),o=!1},d(m){m&&c(e),u[r].d()}}}function Xn(i){let e,l,t=i[7],n=[];for(let r=0;r<t.length;r+=1)n[r]=xn(Kn(i,t,r));const a=r=>w(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ce()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=ce()},m(r,s){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(r,s);D(r,e,s),l=!0},p(r,s){if(s[0]&129){t=r[7];let o;for(o=0;o<t.length;o+=1){const f=Kn(r,t,o);n[o]?(n[o].p(f,s),b(n[o],1)):(n[o]=xn(f),n[o].c(),b(n[o],1),n[o].m(e.parentNode,e))}for(ie(),o=t.length;o<n.length;o+=1)a(o);re()}},i(r){if(!l){for(let s=0;s<t.length;s+=1)b(n[s]);l=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)w(n[s]);l=!1},d(r){tt(n,r),r&&c(e)}}}function xn(i){let e,l;return e=new $l({props:{schema:i[0],filter:i[49],hidePath:!0}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const a={};n[0]&1&&(a.schema=t[0]),n[0]&128&&(a.filter=t[49]),e.$set(a)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Bf(i){let e,l;return e=new vr({props:{search:i[46]}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const a={};n[0]&16384&&(a.search=t[46]),e.$set(a)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Pf(i){let e,l;return e=new $l({props:{schema:i[0],filter:i[49],hidePath:!0}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const a={};n[0]&1&&(a.schema=t[0]),n[0]&16384&&(a.filter=t[49]),e.$set(a)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function ei(i){let e,l,t,n;const a=[Pf,Bf],r=[];function s(f,u){return f[46].type==="metadata"?0:1}function o(f,u){return u===0?Sf(f):f}return e=s(i),l=r[e]=a[e](o(i,e)),{c(){l.c(),t=ce()},l(f){l.l(f),t=ce()},m(f,u){r[e].m(f,u),D(f,t,u),n=!0},p(f,u){let p=e;e=s(f),e===p?r[e].p(o(f,e),u):(ie(),w(r[p],1,1,()=>{r[p]=null}),re(),l=r[e],l?l.p(o(f,e),u):(l=r[e]=a[e](o(f,e)),l.c()),b(l,1),l.m(t.parentNode,t))},i(f){n||(b(l),n=!0)},o(f){w(l),n=!1},d(f){r[e].d(f),f&&c(t)}}}function ti(i){var t;let e,l;return e=new ur({props:{embedding:(t=i[43].signal)==null?void 0:t.signal_name}}),{c(){P(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,a){F(e,n,a),l=!0},p(n,a){var s;const r={};a[0]&262144&&(r.embedding=(s=n[43].signal)==null?void 0:s.signal_name),e.$set(r)},i(n){l||(b(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){R(e,n)}}}function li(i){let e,l,t,n,a,r,s;return l=new mt({props:{type:"cyan",icon:ar}}),l.$on("click",i[36]),n=new mf({props:{isPreview:!0}}),n.$on("click",i[37]),{c(){e=N("div"),P(l.$$.fragment),t=U(),P(n.$$.fragment),this.h()},l(o){e=T(o,"DIV",{class:!0});var f=E(e);L(l.$$.fragment,f),f.forEach(c),t=Q(o),L(n.$$.fragment,o),this.h()},h(){S(e,"class","compute-signal-preview pointer-events-auto")},m(o,f){D(o,e,f),F(l,e,null),D(o,t,f),F(n,o,f),a=!0,r||(s=He(Le.call(null,e,{text:`Compute signal over the column and save the result.

This may be expensive.`})),r=!0)},p:O,i(o){a||(b(l.$$.fragment,o),b(n.$$.fragment,o),a=!0)},o(o){w(l.$$.fragment,o),w(n.$$.fragment,o),a=!1},d(o){o&&c(e),R(l),o&&c(t),R(n,o),r=!1,s()}}}function ni(i){let e,l,t,n,a,r,s;return t=new Is({}),{c(){e=N("button"),l=N("div"),P(t.$$.fragment),this.h()},l(o){e=T(o,"BUTTON",{});var f=E(e);l=T(f,"DIV",{class:!0});var u=E(l);L(t.$$.fragment,u),u.forEach(c),f.forEach(c),this.h()},h(){S(l,"class","transition"),se(l,"rotate-180",i[21]),se(e,"bg-slate-300",i[21])},m(o,f){D(o,e,f),v(e,l),F(t,l,null),a=!0,r||(s=[He(n=Le.call(null,e,{text:i[21]?"Close statistics":"See statistics"})),Pe(e,"click",i[38])],r=!0)},p(o,f){(!a||f[0]&2097152)&&se(l,"rotate-180",o[21]),n&&et(n.update)&&f[0]&2097152&&n.update.call(null,{text:o[21]?"Close statistics":"See statistics"}),(!a||f[0]&2097152)&&se(e,"bg-slate-300",o[21])},i(o){a||(b(t.$$.fragment,o),a=!0)},o(o){w(t.$$.fragment,o),a=!1},d(o){o&&c(e),R(t),r=!1,dt(s)}}}function ii(i){let e,l,t,n;return l=new If({props:{field:i[1]}}),{c(){e=N("div"),P(l.$$.fragment),this.h()},l(a){e=T(a,"DIV",{class:!0});var r=E(e);L(l.$$.fragment,r),r.forEach(c),this.h()},h(){S(e,"class","px-2")},m(a,r){D(a,e,r),F(l,e,null),n=!0},p(a,r){const s={};r[0]&2&&(s.field=a[1]),l.$set(s)},i(a){n||(b(l.$$.fragment,a),a&&Yi(()=>{n&&(t||(t=Wt(e,Zt,{},!0)),t.run(1))}),n=!0)},o(a){w(l.$$.fragment,a),a&&(t||(t=Wt(e,Zt,{},!1)),t.run(0)),n=!1},d(a){a&&c(e),R(l),a&&t&&t.end()}}}function ri(i){let e,l,t=i[19],n=[];for(let r=0;r<t.length;r+=1)n[r]=si(Gn(i,t,r));const a=r=>w(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ce()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=ce()},m(r,s){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(r,s);D(r,e,s),l=!0},p(r,s){if(s[0]&524559){t=r[19];let o;for(o=0;o<t.length;o+=1){const f=Gn(r,t,o);n[o]?(n[o].p(f,s),b(n[o],1)):(n[o]=si(f),n[o].c(),b(n[o],1),n[o].m(e.parentNode,e))}for(ie(),o=t.length;o<n.length;o+=1)a(o);re()}},i(r){if(!l){for(let s=0;s<t.length;s+=1)b(n[s]);l=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)w(n[s]);l=!1},d(r){tt(n,r),r&&c(e)}}}function si(i){let e,l;return e=new kr({props:{schema:i[0],field:i[40],indent:i[3]+1,sourceField:i[8]&&It(i[40])?i[1]:i[2]}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const a={};n[0]&1&&(a.schema=t[0]),n[0]&524288&&(a.field=t[40]),n[0]&8&&(a.indent=t[3]+1),n[0]&524550&&(a.sourceField=t[8]&&It(t[40])?t[1]:t[2]),e.$set(a)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Ff(i){let e,l,t,n,a,r,s,o,f,u,p,m,d,_,h,k,$,g,y,I,V,C,M,A,H,J,G;const W=[Tf,Nf,Df],te=[];function z(Y,oe){return Y[1].dtype&&Y[1].dtype.type!=="map"?0:Y[1].repeated_field&&Y[1].repeated_field.dtype?1:2}n=z(i),a=te[n]=W[n](i);let B=i[17]&&Zn(i),K=i[15]&&Xn(i),x=i[14],ee=[];for(let Y=0;Y<x.length;Y+=1)ee[Y]=ei(Jn(i,x,Y));const _e=Y=>w(ee[Y],1,1,()=>{ee[Y]=null});let he=i[18],ne=[];for(let Y=0;Y<he.length;Y+=1)ne[Y]=ti(Wn(i,he,Y));const ze=Y=>w(ne[Y],1,1,()=>{ne[Y]=null});let le=i[4]&&i[23]&&li(i),fe=i[12]&&ni(i);I=new uf({props:{field:i[1]}});let De=i[21]&&ii(i),X=i[19].length&&ri(i);return{c(){e=N("div"),l=N("div"),t=N("div"),a.c(),s=U(),o=N("div"),f=N("button"),u=q(i[20]),d=U(),B&&B.c(),_=U(),K&&K.c(),h=U();for(let Y=0;Y<ee.length;Y+=1)ee[Y].c();k=U();for(let Y=0;Y<ne.length;Y+=1)ne[Y].c();$=U(),le&&le.c(),g=U(),fe&&fe.c(),y=U(),P(I.$$.fragment),V=U(),De&&De.c(),C=U(),M=N("div"),X&&X.c(),this.h()},l(Y){e=T(Y,"DIV",{class:!0});var oe=E(e);l=T(oe,"DIV",{class:!0});var Z=E(l);t=T(Z,"DIV",{class:!0});var ye=E(t);a.l(ye),ye.forEach(c),s=Q(Z),o=T(Z,"DIV",{class:!0});var ve=E(o);f=T(ve,"BUTTON",{class:!0});var pe=E(f);u=j(pe,i[20]),pe.forEach(c),ve.forEach(c),d=Q(Z),B&&B.l(Z),_=Q(Z),K&&K.l(Z),h=Q(Z);for(let Ce=0;Ce<ee.length;Ce+=1)ee[Ce].l(Z);k=Q(Z);for(let Ce=0;Ce<ne.length;Ce+=1)ne[Ce].l(Z);$=Q(Z),le&&le.l(Z),g=Q(Z),fe&&fe.l(Z),y=Q(Z),L(I.$$.fragment,Z),Z.forEach(c),V=Q(oe),De&&De.l(oe),C=Q(oe),M=T(oe,"DIV",{});var we=E(M);X&&X.l(we),we.forEach(c),oe.forEach(c),this.h()},h(){S(t,"class","rounded-md bg-blue-200 p-0.5"),se(t,"bg-blue-200",i[5]),Mt(t,"margin-left",i[3]*1.5+"rem"),S(f,"class","ml-2 w-full cursor-pointer truncate whitespace-nowrap text-left text-gray-900"),f.disabled=p=!i[12],se(f,"cursor-default",!i[12]),S(o,"class","mr-2 grow"),S(l,"class","flex w-full flex-row items-center gap-x-2 border-gray-300 px-4 hover:bg-gray-100"),se(l,"bg-blue-50",i[5]),se(l,"bg-emerald-100",i[4]),se(l,"bg-teal-100",i[9]),se(l,"hover:bg-blue-100",i[5]),S(e,"class","border-gray-300"),se(e,"border-b",i[8])},m(Y,oe){D(Y,e,oe),v(e,l),v(l,t),te[n].m(t,null),v(l,s),v(l,o),v(o,f),v(f,u),v(l,d),B&&B.m(l,null),v(l,_),K&&K.m(l,null),v(l,h);for(let Z=0;Z<ee.length;Z+=1)ee[Z]&&ee[Z].m(l,null);v(l,k);for(let Z=0;Z<ne.length;Z+=1)ne[Z]&&ne[Z].m(l,null);v(l,$),le&&le.m(l,null),v(l,g),fe&&fe.m(l,null),v(l,y),F(I,l,null),v(e,V),De&&De.m(e,null),v(e,C),v(e,M),X&&X.m(M,null),H=!0,J||(G=[He(r=Le.call(null,t,{text:i[13]})),Pe(f,"click",i[33]),He(m=Le.call(null,o,{text:i[11]||""}))],J=!0)},p(Y,oe){let Z=n;if(n=z(Y),n===Z?te[n].p(Y,oe):(ie(),w(te[Z],1,1,()=>{te[Z]=null}),re(),a=te[n],a?a.p(Y,oe):(a=te[n]=W[n](Y),a.c()),b(a,1),a.m(t,null)),r&&et(r.update)&&oe[0]&8192&&r.update.call(null,{text:Y[13]}),(!H||oe[0]&32)&&se(t,"bg-blue-200",Y[5]),oe[0]&8&&Mt(t,"margin-left",Y[3]*1.5+"rem"),(!H||oe[0]&1048576)&&ae(u,Y[20]),(!H||oe[0]&4096&&p!==(p=!Y[12]))&&(f.disabled=p),(!H||oe[0]&4096)&&se(f,"cursor-default",!Y[12]),m&&et(m.update)&&oe[0]&2048&&m.update.call(null,{text:Y[11]||""}),Y[17]?B?(B.p(Y,oe),oe[0]&131072&&b(B,1)):(B=Zn(Y),B.c(),b(B,1),B.m(l,_)):B&&(ie(),w(B,1,1,()=>{B=null}),re()),Y[15]?K?(K.p(Y,oe),oe[0]&32768&&b(K,1)):(K=Xn(Y),K.c(),b(K,1),K.m(l,h)):K&&(ie(),w(K,1,1,()=>{K=null}),re()),oe[0]&16385){x=Y[14];let ve;for(ve=0;ve<x.length;ve+=1){const pe=Jn(Y,x,ve);ee[ve]?(ee[ve].p(pe,oe),b(ee[ve],1)):(ee[ve]=ei(pe),ee[ve].c(),b(ee[ve],1),ee[ve].m(l,k))}for(ie(),ve=x.length;ve<ee.length;ve+=1)_e(ve);re()}if(oe[0]&262144){he=Y[18];let ve;for(ve=0;ve<he.length;ve+=1){const pe=Wn(Y,he,ve);ne[ve]?(ne[ve].p(pe,oe),b(ne[ve],1)):(ne[ve]=ti(pe),ne[ve].c(),b(ne[ve],1),ne[ve].m(l,$))}for(ie(),ve=he.length;ve<ne.length;ve+=1)ze(ve);re()}Y[4]&&Y[23]?le?(le.p(Y,oe),oe[0]&8388624&&b(le,1)):(le=li(Y),le.c(),b(le,1),le.m(l,g)):le&&(ie(),w(le,1,1,()=>{le=null}),re()),Y[12]?fe?(fe.p(Y,oe),oe[0]&4096&&b(fe,1)):(fe=ni(Y),fe.c(),b(fe,1),fe.m(l,y)):fe&&(ie(),w(fe,1,1,()=>{fe=null}),re());const ye={};oe[0]&2&&(ye.field=Y[1]),I.$set(ye),(!H||oe[0]&32)&&se(l,"bg-blue-50",Y[5]),(!H||oe[0]&16)&&se(l,"bg-emerald-100",Y[4]),(!H||oe[0]&512)&&se(l,"bg-teal-100",Y[9]),(!H||oe[0]&32)&&se(l,"hover:bg-blue-100",Y[5]),Y[21]?De?(De.p(Y,oe),oe[0]&2097152&&b(De,1)):(De=ii(Y),De.c(),b(De,1),De.m(e,C)):De&&(ie(),w(De,1,1,()=>{De=null}),re()),Y[19].length?X?(X.p(Y,oe),oe[0]&524288&&b(X,1)):(X=ri(Y),X.c(),b(X,1),X.m(M,null)):X&&(ie(),w(X,1,1,()=>{X=null}),re()),(!H||oe[0]&256)&&se(e,"border-b",Y[8])},i(Y){if(!H){b(a),b(B),b(K);for(let oe=0;oe<x.length;oe+=1)b(ee[oe]);for(let oe=0;oe<he.length;oe+=1)b(ne[oe]);b(le),b(fe),b(I.$$.fragment,Y),b(De),b(X),Y&&Yi(()=>{H&&(A||(A=Wt(M,Zt,{},!0)),A.run(1))}),H=!0}},o(Y){w(a),w(B),w(K),ee=ee.filter(Boolean);for(let oe=0;oe<ee.length;oe+=1)w(ee[oe]);ne=ne.filter(Boolean);for(let oe=0;oe<ne.length;oe+=1)w(ne[oe]);w(le),w(fe),w(I.$$.fragment,Y),w(De),w(X),Y&&(A||(A=Wt(M,Zt,{},!1)),A.run(0)),H=!1},d(Y){Y&&c(e),te[n].d(),B&&B.d(),K&&K.d(),tt(ee,Y),tt(ne,Y),le&&le.d(),fe&&fe.d(),R(I),De&&De.d(),X&&X.d(),Y&&A&&A.end(),J=!1,dt(G)}}}function Rf(i){return{path:i.path,op:i.op,value:i.value}}function Hf(i,e,l){let t,n,a,r,s,o,f,u,p,m,d,_,h,k,$,g,y,I,V,C,M,A,H,J=O,G=()=>(J(),J=Ne(s,Z=>l(31,H=Z)),s),W,te;i.$$.on_destroy.push(()=>J());let{schema:z}=e,{field:B}=e,{sourceField:K=void 0}=e,{indent:x=0}=e;const ee=er();Ae(i,ee,Z=>l(24,te=Z));const _e=lt();Ae(i,_e,Z=>l(10,A=Z));const he=Ur();Ae(i,he,Z=>l(32,W=Z));let ne=null;function ze(Z){return Z!=null&&Z.repeated_field?ze(Z.repeated_field):Z!=null&&Z.fields?[...Object.values(Z.fields).filter(ye=>ye.path.at(-1)!==Qr)].filter(ye=>{var ve,pe,we,Ce,Ze;return!(((ve=ye.dtype)==null?void 0:ve.type)==="embedding"||ye.signal!=null&&bt(ye).some(rt=>{var Re;return((Re=rt.dtype)==null?void 0:Re.type)==="embedding"})||((pe=ye.signal)==null?void 0:pe.signal_name)==="sentences"||((we=ye.signal)==null?void 0:we.signal_name)==="substring_search"||((Ce=ye.signal)==null?void 0:Ce.signal_name)==="semantic_similarity"||((Ze=ye.signal)==null?void 0:Ze.signal_name)==="concept_labels")}):[]}const le=()=>{M&&(f?_e.removeExpandedColumn(o):_e.addExpandedColumn(o))},fe=()=>h==="ASC"?il(_e,A.query.sort_order="DESC",A):il(_e,A.query.sort_order="ASC",A),De=()=>_e.removeSortBy(o),X=()=>B.signal&&g&&K&&te.mutate([A.namespace,A.datasetName,{leaf_path:K.path,signal:B.signal}]),Y=()=>{var Z;return B.signal&&g&&pt({command:gt.EditPreviewConcept,namespace:A.namespace,datasetName:A.datasetName,path:K==null?void 0:K.path,signalName:(Z=B.signal)==null?void 0:Z.signal_name,value:B.signal})},oe=()=>{f?_e.removeExpandedColumn(o):_e.addExpandedColumn(o)};return i.$$set=Z=>{"schema"in Z&&l(0,z=Z.schema),"field"in Z&&l(1,B=Z.field),"sourceField"in Z&&l(2,K=Z.sourceField),"indent"in Z&&l(3,x=Z.indent)},i.$$.update=()=>{var Z,ye,ve;if(i.$$.dirty[0]&2&&l(5,t=It(B)),i.$$.dirty[0]&2&&l(23,n=el(B)),i.$$.dirty[0]&2&&l(9,a=hl(B)),i.$$.dirty[0]&544&&l(8,r=!t&&!a),i.$$.dirty[0]&1024&&G(l(22,s=_t(A.namespace,A.datasetName,ht(A)))),i.$$.dirty[0]&2&&l(6,o=B.path),i.$$.dirty[0]&1088&&l(21,f=A.expandedStats[ot(o)]||!1),i.$$.dirty[0]&64&&l(30,u=o.at(-1)===At),i.$$.dirty[0]&1073741888&&l(20,p=u?o.at(-2):o.at(-1)),i.$$.dirty[0]&2|i.$$.dirty[1]&2&&B.signal&&W.data!=null)if(B.signal.signal_name==="concept_score"){const pe=B.signal;l(20,p=`${pe.concept_name}`),l(11,ne=`Concept '${pe.namespace}/${pe.concept_name}' arguments:

embedding: '${pe.embedding}'`+(pe.version!=null?`
version: ${pe.version}`:""))}else{const pe=W.data.find(we=>{var Ce;return we.name===((Ce=B.signal)==null?void 0:Ce.signal_name)});if(pe!=null){l(20,p=pe.json_schema.title);const we=Object.entries(B.signal||{}).filter(([Ce,Ze])=>Ce!="signal_name").map(([Ce,Ze])=>`${Ce}: ${Ze}`).join(`
`);we.length>0&&l(11,ne=`Signal '${pe.name}' arguments: 

${we}`)}}i.$$.dirty[0]&2&&l(19,m=ze(B)),i.$$.dirty[0]&258&&l(18,d=r?bt(B).filter(pe=>pe.signal!=null&&bt(pe).some(we=>{var Ce;return((Ce=we.dtype)==null?void 0:Ce.type)==="embedding"})):[]),i.$$.dirty[0]&1088&&l(17,_=(Z=A.query.sort_by)==null?void 0:Z.some(pe=>zt(pe,o))),i.$$.dirty[0]&1024&&l(16,h=A.query.sort_order),i.$$.dirty[0]&1088&&l(7,k=((ye=A.query.filters)==null?void 0:ye.filter(pe=>zt(pe.path,o)))||[]),i.$$.dirty[0]&128&&l(15,$=k.length>0),i.$$.dirty[0]&64|i.$$.dirty[1]&1&&l(4,g=lr(H.data||null,o)),i.$$.dirty[0]&1088&&l(14,y=dl(A,o)),i.$$.dirty[0]&32&&l(28,I=t?". Generated by a signal":""),i.$$.dirty[0]&2&&l(29,V=((ve=B.dtype)==null?void 0:ve.type)??(B.repeated_field&&B.repeated_field.dtype?`${B.repeated_field.dtype.type}[]`:"object")),i.$$.dirty[0]&805306368&&l(13,C=`${V}${I}`),i.$$.dirty[0]&18&&l(12,M=Kt(B)&&!g)},[z,B,K,x,g,t,o,k,r,a,A,ne,M,C,y,$,h,_,d,m,p,f,s,n,te,ee,_e,he,I,V,u,H,W,le,fe,De,X,Y,oe]}class kr extends $e{constructor(e){super(),Ee(this,e,Hf,Ff,ke,{schema:0,field:1,sourceField:2,indent:3},null,[-1,-1])}}function ai(i,e,l){const t=i.slice();return t[4]=e[l],t}function Lf(i){let e=[],l=new Map,t,n,a=Object.keys(i[1].data.schema.fields);const r=s=>s[4];for(let s=0;s<a.length;s+=1){let o=ai(i,a,s),f=r(o);l.set(f,e[s]=oi(f,o))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();t=ce()},l(s){for(let o=0;o<e.length;o+=1)e[o].l(s);t=ce()},m(s,o){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(s,o);D(s,t,o),n=!0},p(s,o){o&2&&(a=Object.keys(s[1].data.schema.fields),ie(),e=Ui(e,o,r,1,s,a,l,t.parentNode,Qi,oi,t,ai),re())},i(s){if(!n){for(let o=0;o<a.length;o+=1)b(e[o]);n=!0}},o(s){for(let o=0;o<e.length;o+=1)w(e[o]);n=!1},d(s){for(let o=0;o<e.length;o+=1)e[o].d(s);s&&c(t)}}}function Of(i){let e,l;return e=new it({props:{paragraph:!0,lines:3}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p:O,i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function oi(i,e){let l,t,n;return t=new kr({props:{schema:e[1].data.schema,field:e[1].data.schema.fields[e[4]]}}),{key:i,first:null,c(){l=ce(),P(t.$$.fragment),this.h()},l(a){l=ce(),L(t.$$.fragment,a),this.h()},h(){this.first=l},m(a,r){D(a,l,r),F(t,a,r),n=!0},p(a,r){e=a;const s={};r&2&&(s.schema=e[1].data.schema),r&2&&(s.field=e[1].data.schema.fields[e[4]]),t.$set(s)},i(a){n||(b(t.$$.fragment,a),n=!0)},o(a){w(t.$$.fragment,a),n=!1},d(a){a&&c(l),R(t,a)}}}function qf(i){let e,l,t,n;const a=[Of,Lf],r=[];function s(o,f){var u,p;return(u=o[1])!=null&&u.isLoading?0:(p=o[1])!=null&&p.isSuccess&&o[1].data.schema.fields!=null?1:-1}return~(l=s(i))&&(t=r[l]=a[l](i)),{c(){e=N("div"),t&&t.c(),this.h()},l(o){e=T(o,"DIV",{class:!0});var f=E(e);t&&t.l(f),f.forEach(c),this.h()},h(){S(e,"class","schema flex h-full flex-col overflow-y-auto")},m(o,f){D(o,e,f),~l&&r[l].m(e,null),n=!0},p(o,[f]){let u=l;l=s(o),l===u?~l&&r[l].p(o,f):(t&&(ie(),w(r[u],1,1,()=>{r[u]=null}),re()),~l?(t=r[l],t?t.p(o,f):(t=r[l]=a[l](o),t.c()),b(t,1),t.m(e,null)):t=null)},i(o){n||(b(t),n=!0)},o(o){w(t),n=!1},d(o){o&&c(e),~l&&r[l].d()}}}function jf(i,e,l){let t,n,a,r=O,s=()=>(r(),r=Ne(t,f=>l(1,a=f)),t);i.$$.on_destroy.push(()=>r());const o=lt();return Ae(i,o,f=>l(3,n=f)),i.$$.update=()=>{i.$$.dirty&8&&s(l(0,t=_t(n.namespace,n.datasetName,ht(n))))},[t,a,o,n]}class Uf extends $e{constructor(e){super(),Ee(this,e,jf,qf,ke,{})}}function fi(i,e,l){const t=i.slice();return t[33]=e[l],t}function Qf(i){let e,l,t,n,a,r,s,o,f,u,p,m,d,_,h,k,$,g,y,I,V,C,M,A,H,J,G,W;function te(B){i[26](B)}let z={invalid:i[7]!=i[8]};return i[7]!==void 0&&(z.value=i[7]),y=new ir({props:z}),Ue.push(()=>Xe(y,"value",te)),A=new ms({}),{c(){e=N("div"),l=N("section"),t=N("div"),n=q("Delete this dataset"),a=U(),r=N("div"),s=N("p"),o=q("This action cannot be undone."),f=U(),u=N("p"),p=q(`This will permanently delete the
                  `),m=N("span"),d=q(i[8]),_=q(` dataset and all its files. Please type
                  `),h=N("span"),k=q(i[8]),$=q(" to confirm."),g=U(),P(y.$$.fragment),V=U(),C=N("button"),M=q(`I understand, delete this dataset
                `),P(A.$$.fragment),this.h()},l(B){e=T(B,"DIV",{class:!0});var K=E(e);l=T(K,"SECTION",{class:!0});var x=E(l);t=T(x,"DIV",{class:!0});var ee=E(t);n=j(ee,"Delete this dataset"),ee.forEach(c),a=Q(x),r=T(x,"DIV",{class:!0});var _e=E(r);s=T(_e,"P",{class:!0});var he=E(s);o=j(he,"This action cannot be undone."),he.forEach(c),f=Q(_e),u=T(_e,"P",{});var ne=E(u);p=j(ne,`This will permanently delete the
                  `),m=T(ne,"SPAN",{class:!0});var ze=E(m);d=j(ze,i[8]),ze.forEach(c),_=j(ne,` dataset and all its files. Please type
                  `),h=T(ne,"SPAN",{class:!0});var le=E(h);k=j(le,i[8]),le.forEach(c),$=j(ne," to confirm."),ne.forEach(c),_e.forEach(c),g=Q(x),L(y.$$.fragment,x),V=Q(x),C=T(x,"BUTTON",{class:!0});var fe=E(C);M=j(fe,`I understand, delete this dataset
                `),L(A.$$.fragment,fe),fe.forEach(c),x.forEach(c),K.forEach(c),this.h()},h(){S(t,"class","text-lg text-gray-700"),S(s,"class","mb-2"),S(m,"class","font-bold"),S(h,"class","font-bold"),S(r,"class","mb-4 text-sm text-gray-500"),S(C,"class","mt-2 flex cursor-pointer flex-row justify-between p-4 text-left outline-red-400 hover:bg-gray-200"),C.disabled=H=i[7]!=i[8],se(C,"cursor-not-allowed",i[7]!=i[8]),se(C,"outline",i[7]==i[8]),se(C,"opacity-50",i[7]!=i[8]),S(l,"class","flex flex-col gap-y-1"),S(e,"class","flex flex-col gap-y-6")},m(B,K){D(B,e,K),v(e,l),v(l,t),v(t,n),v(l,a),v(l,r),v(r,s),v(s,o),v(r,f),v(r,u),v(u,p),v(u,m),v(m,d),v(u,_),v(u,h),v(h,k),v(u,$),v(l,g),F(y,l,null),v(l,V),v(l,C),v(C,M),F(A,C,null),J=!0,G||(W=Pe(C,"click",i[27]),G=!0)},p(B,K){(!J||K[0]&256)&&ae(d,B[8]),(!J||K[0]&256)&&ae(k,B[8]);const x={};K[0]&384&&(x.invalid=B[7]!=B[8]),!I&&K[0]&128&&(I=!0,x.value=B[7],xe(()=>I=!1)),y.$set(x),(!J||K[0]&384&&H!==(H=B[7]!=B[8]))&&(C.disabled=H),(!J||K[0]&384)&&se(C,"cursor-not-allowed",B[7]!=B[8]),(!J||K[0]&384)&&se(C,"outline",B[7]==B[8]),(!J||K[0]&384)&&se(C,"opacity-50",B[7]!=B[8])},i(B){J||(b(y.$$.fragment,B),b(A.$$.fragment,B),J=!0)},o(B){w(y.$$.fragment,B),w(A.$$.fragment,B),J=!1},d(B){B&&c(e),R(y),R(A),G=!1,W()}}}function Yf(i){var k,$;let e,l,t,n,a,r,s,o,f,u,p,m,d=(($=(k=i[4])==null?void 0:k.tags)==null?void 0:$.length)&&ui(i);function _(g){i[25](g)}let h={size:"sm",open:!1,items:i[10],shouldFilterItem:Xf,placeholder:"Add a tag"};return i[3]!==void 0&&(h.value=i[3]),u=new fr({props:h}),i[24](u),Ue.push(()=>Xe(u,"value",_)),u.$on("select",i[16]),{c(){e=N("div"),l=N("section"),t=N("div"),n=q("Tags"),a=U(),r=N("div"),s=q(`Tags are used to organize datasets and will be organized in the dataset navigation
                panel.`),o=U(),d&&d.c(),f=U(),P(u.$$.fragment),this.h()},l(g){e=T(g,"DIV",{class:!0});var y=E(e);l=T(y,"SECTION",{class:!0});var I=E(l);t=T(I,"DIV",{class:!0});var V=E(t);n=j(V,"Tags"),V.forEach(c),a=Q(I),r=T(I,"DIV",{class:!0});var C=E(r);s=j(C,`Tags are used to organize datasets and will be organized in the dataset navigation
                panel.`),C.forEach(c),I.forEach(c),o=Q(y),d&&d.l(y),f=Q(y),L(u.$$.fragment,y),y.forEach(c),this.h()},h(){S(t,"class","text-lg text-gray-700"),S(r,"class","text-sm text-gray-500"),S(l,"class","flex flex-col gap-y-1"),S(e,"class","mb-8 flex flex-col gap-y-4")},m(g,y){D(g,e,y),v(e,l),v(l,t),v(t,n),v(l,a),v(l,r),v(r,s),v(e,o),d&&d.m(e,null),v(e,f),F(u,e,null),m=!0},p(g,y){var V,C;(C=(V=g[4])==null?void 0:V.tags)!=null&&C.length?d?(d.p(g,y),y[0]&16&&b(d,1)):(d=ui(g),d.c(),b(d,1),d.m(e,f)):d&&(ie(),w(d,1,1,()=>{d=null}),re());const I={};y[0]&1024&&(I.items=g[10]),!p&&y[0]&8&&(p=!0,I.value=g[3],xe(()=>p=!1)),u.$set(I)},i(g){m||(b(d),b(u.$$.fragment,g),m=!0)},o(g){w(d),w(u.$$.fragment,g),m=!1},d(g){g&&c(e),d&&d.d(),i[24](null),R(u)}}}function Gf(i){let e,l,t;function n(r){i[22](r)}let a={namespace:i[1],datasetName:i[2]};return i[4]!==void 0&&(a.newSettings=i[4]),e=new ps({props:a}),Ue.push(()=>Xe(e,"newSettings",n)),{c(){P(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,s){F(e,r,s),t=!0},p(r,s){const o={};s[0]&2&&(o.namespace=r[1]),s[0]&4&&(o.datasetName=r[2]),!l&&s[0]&16&&(l=!0,o.newSettings=r[4],xe(()=>l=!1)),e.$set(o)},i(r){t||(b(e.$$.fragment,r),t=!0)},o(r){w(e.$$.fragment,r),t=!1},d(r){R(e,r)}}}function ui(i){let e,l,t=i[4].tags,n=[];for(let r=0;r<t.length;r+=1)n[r]=ci(fi(i,t,r));const a=r=>w(n[r],1,1,()=>{n[r]=null});return{c(){e=N("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=T(r,"DIV",{class:!0});var s=E(e);for(let o=0;o<n.length;o+=1)n[o].l(s);s.forEach(c),this.h()},h(){S(e,"class","flex h-8 flex-row")},m(r,s){D(r,e,s);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);l=!0},p(r,s){if(s[0]&131088){t=r[4].tags;let o;for(o=0;o<t.length;o+=1){const f=fi(r,t,o);n[o]?(n[o].p(f,s),b(n[o],1)):(n[o]=ci(f),n[o].c(),b(n[o],1),n[o].m(e,null))}for(ie(),o=t.length;o<n.length;o+=1)a(o);re()}},i(r){if(!l){for(let s=0;s<t.length;s+=1)b(n[s]);l=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)w(n[s]);l=!1},d(r){r&&c(e),tt(n,r)}}}function Wf(i){let e=i[33]+"",l,t;return{c(){l=q(e),t=U()},l(n){l=j(n,e),t=Q(n)},m(n,a){D(n,l,a),D(n,t,a)},p(n,a){a[0]&16&&e!==(e=n[33]+"")&&ae(l,e)},d(n){n&&c(l),n&&c(t)}}}function ci(i){let e,l;function t(){return i[23](i[33])}return e=new tl({props:{type:"purple",$$slots:{default:[Wf]},$$scope:{ctx:i}}}),e.$on("remove",t),{c(){P(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,a){F(e,n,a),l=!0},p(n,a){i=n;const r={};a[0]&16|a[1]&32&&(r.$$scope={dirty:a,ctx:i}),e.$set(r)},i(n){l||(b(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){R(e,n)}}}function Jf(i){let e,l,t,n,a,r,s,o;t=new Xr({props:{items:[{title:"Fields",value:"fields"},{title:"Tags",value:"tags"},{title:"Administration",value:"administration"}],item:i[6]}}),t.$on("select",i[21]);const f=[Gf,Yf,Qf],u=[];function p(m,d){return m[6]==="fields"&&m[4]?0:m[6]==="tags"?1:m[6]==="administration"?2:-1}return~(r=p(i))&&(s=u[r]=f[r](i)),{c(){e=N("div"),l=N("div"),P(t.$$.fragment),n=U(),a=N("div"),s&&s.c(),this.h()},l(m){e=T(m,"DIV",{class:!0});var d=E(e);l=T(d,"DIV",{class:!0});var _=E(l);L(t.$$.fragment,_),_.forEach(c),n=Q(d),a=T(d,"DIV",{class:!0});var h=E(a);s&&s.l(h),h.forEach(c),d.forEach(c),this.h()},h(){S(l,"class","-ml-4 mr-4 w-96 grow-0"),S(a,"class","flex w-full flex-col gap-y-6 rounded border border-gray-300 bg-white p-4"),S(e,"class","flex flex-row")},m(m,d){D(m,e,d),v(e,l),F(t,l,null),v(e,n),v(e,a),~r&&u[r].m(a,null),o=!0},p(m,d){const _={};d[0]&64&&(_.item=m[6]),t.$set(_);let h=r;r=p(m),r===h?~r&&u[r].p(m,d):(s&&(ie(),w(u[h],1,1,()=>{u[h]=null}),re()),~r?(s=u[r],s?s.p(m,d):(s=u[r]=f[r](m),s.c()),b(s,1),s.m(a,null)):s=null)},i(m){o||(b(t.$$.fragment,m),b(s),o=!0)},o(m){w(t.$$.fragment,m),w(s),o=!1},d(m){m&&c(e),R(t),~r&&u[r].d()}}}function Kf(i){let e,l,t,n,a,r;return e=new gl({props:{label:"Changes",title:"Dataset settings"}}),t=new bl({props:{hasForm:!0,$$slots:{default:[Jf]},$$scope:{ctx:i}}}),a=new vl({props:{danger:i[6]==="administration",primaryButtonText:"Save",secondaryButtonText:"Cancel",primaryButtonDisabled:i[6]==="administration"}}),a.$on("click:button--secondary",i[28]),{c(){P(e.$$.fragment),l=U(),P(t.$$.fragment),n=U(),P(a.$$.fragment)},l(s){L(e.$$.fragment,s),l=Q(s),L(t.$$.fragment,s),n=Q(s),L(a.$$.fragment,s)},m(s,o){F(e,s,o),D(s,l,o),F(t,s,o),D(s,n,o),F(a,s,o),r=!0},p(s,o){const f={};o[0]&3582|o[1]&32&&(f.$$scope={dirty:o,ctx:s}),t.$set(f);const u={};o[0]&64&&(u.danger=s[6]==="administration"),o[0]&64&&(u.primaryButtonDisabled=s[6]==="administration"),a.$set(u)},i(s){r||(b(e.$$.fragment,s),b(t.$$.fragment,s),b(a.$$.fragment,s),r=!0)},o(s){w(e.$$.fragment,s),w(t.$$.fragment,s),w(a.$$.fragment,s),r=!1},d(s){R(e,s),s&&c(l),R(t,s),s&&c(n),R(a,s)}}}function Zf(i){let e,l;return e=new pl({props:{open:i[0],$$slots:{default:[Kf]},$$scope:{ctx:i}}}),e.$on("submit",i[14]),e.$on("close",i[29]),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const a={};n[0]&1&&(a.open=t[0]),n[0]&3583|n[1]&32&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function di(i){return i==null?null:JSON.parse(JSON.stringify(i))}const Xf=(i,e)=>i.text.toLowerCase().includes(e.toLowerCase())||i.id==="new-label";function xf(i,e,l){var ze;let t,n,a,r,s,o,f,u=O,p=()=>(u(),u=Ne(a,le=>l(20,f=le)),a),m,d;i.$$.on_destroy.push(()=>u());let{namespace:_}=e,{name:h}=e,{open:k=!1}=e;const $=Yr();Ae(i,$,le=>l(31,m=le));let g="";const y=new Set(((ze=m.data)==null?void 0:ze.flatMap(le=>le.tags))||[]);let I;const V=Gr();Ae(i,V,le=>l(30,o=le));let C="fields",M=di(f==null?void 0:f.data);function A(){M!=null&&o.mutate([_,h,M],{onSuccess:()=>{l(0,k=!1)}})}let H="";const J=Wr();Ae(i,J,le=>l(11,d=le));function G(le){if(M==null)return;M.tags==null&&l(4,M.tags=[],M),I.clear();const fe=le.detail.selectedItem.text;M.tags.find(X=>X===fe)||l(4,M.tags=[...M.tags,fe],M)}function W(le){M!=null&&(M.tags==null&&l(4,M.tags=[],M),l(4,M.tags=M.tags.filter(fe=>fe!==le),M))}const te=le=>l(6,C=le.detail);function z(le){M=le,l(4,M),l(18,s),l(20,f)}const B=le=>W(le);function K(le){Ue[le?"unshift":"push"](()=>{I=le,l(5,I)})}function x(le){g=le,l(3,g)}function ee(le){H=le,l(7,H)}const _e=()=>d.mutate([_,h],{onSuccess:()=>ol("/").then(()=>Kr.invalidateQueries([Zr]))}),he=()=>l(0,k=!1),ne=()=>l(0,k=!1);return i.$$set=le=>{"namespace"in le&&l(1,_=le.namespace),"name"in le&&l(2,h=le.name),"open"in le&&l(0,k=le.open)},i.$$.update=()=>{i.$$.dirty[0]&8&&l(19,t={id:"new-tag",text:g}),i.$$.dirty[0]&524296&&l(10,n=[...g!=""?[t]:[],...Array.from(y).map(le=>({id:le,text:le}))]),i.$$.dirty[0]&6&&p(l(9,a=Tt(_,h))),i.$$.dirty[0]&6&&l(8,r=Jr(_,h)),i.$$.dirty[0]&1048576&&l(18,s=f.isFetching),i.$$.dirty[0]&1310736&&l(4,M=s?null:M??di(f.data))},[k,_,h,g,M,I,C,H,r,a,n,d,$,V,A,J,G,W,s,t,f,te,z,B,K,x,ee,_e,he,ne]}class eu extends $e{constructor(e){super(),Ee(this,e,xf,Zf,ke,{namespace:1,name:2,open:0},null,[-1,-1])}}function tu(i){let e;const l=i[1].default,t=Ft(l,i,i[6],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,a){t&&t.m(n,a),e=!0},p(n,a){t&&t.p&&(!e||a&64)&&Rt(t,l,n,n[6],e?Lt(l,n[6],a,null):Ht(n[6]),null)},i(n){e||(b(t,n),e=!0)},o(n){w(t,n),e=!1},d(n){t&&t.d(n)}}}function lu(i){let e,l;const t=[{kind:"ghost"},{size:"small"},i[0],{class:"bx--inline-notification__action-button "+i[0].class}];let n={$$slots:{default:[tu]},$$scope:{ctx:i}};for(let a=0;a<t.length;a+=1)n=me(n,t[a]);return e=new ml({props:n}),e.$on("click",i[2]),e.$on("mouseover",i[3]),e.$on("mouseenter",i[4]),e.$on("mouseleave",i[5]),{c(){P(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,r){F(e,a,r),l=!0},p(a,[r]){const s=r&1?Ke(t,[t[0],t[1],al(a[0]),{class:"bx--inline-notification__action-button "+a[0].class}]):{};r&64&&(s.$$scope={dirty:r,ctx:a}),e.$set(s)},i(a){l||(b(e.$$.fragment,a),l=!0)},o(a){w(e.$$.fragment,a),l=!1},d(a){R(e,a)}}}function nu(i,e,l){const t=[];let n=Se(e,t),{$$slots:a={},$$scope:r}=e;function s(p){nt.call(this,i,p)}function o(p){nt.call(this,i,p)}function f(p){nt.call(this,i,p)}function u(p){nt.call(this,i,p)}return i.$$set=p=>{e=me(me({},e),Te(p)),l(0,n=Se(e,t)),"$$scope"in p&&l(6,r=p.$$scope)},[n,a,s,o,f,u,r]}class iu extends $e{constructor(e){super(),Ee(this,e,nu,lu,ke,{})}}const ru=iu;function su(i){let e,l,t,n=[i[0]],a={};for(let r=0;r<n.length;r+=1)a=me(a,n[r]);return{c(){e=N("div"),this.h()},l(r){e=T(r,"DIV",{}),E(e).forEach(c),this.h()},h(){Et(e,a),se(e,"bx--skeleton__placeholder",!0)},m(r,s){D(r,e,s),l||(t=[Pe(e,"click",i[1]),Pe(e,"mouseover",i[2]),Pe(e,"mouseenter",i[3]),Pe(e,"mouseleave",i[4])],l=!0)},p(r,[s]){Et(e,a=Ke(n,[s&1&&r[0]])),se(e,"bx--skeleton__placeholder",!0)},i:O,o:O,d(r){r&&c(e),l=!1,dt(t)}}}function au(i,e,l){const t=[];let n=Se(e,t);function a(f){nt.call(this,i,f)}function r(f){nt.call(this,i,f)}function s(f){nt.call(this,i,f)}function o(f){nt.call(this,i,f)}return i.$$set=f=>{e=me(me({},e),Te(f)),l(0,n=Se(e,t))},[n,a,r,s,o]}class ou extends $e{constructor(e){super(),Ee(this,e,au,su,ke,{})}}const fu=ou;function mi(i,e,l){const t=i.slice();t[5]=e[l];const n=It(t[5]);t[6]=n;const a=hl(t[5]);return t[7]=a,t}function uu(i){let e,l="{}",t,n;return{c(){e=N("span"),t=q(l),this.h()},l(a){e=T(a,"SPAN",{title:!0,class:!0});var r=E(e);t=j(r,l),r.forEach(c),this.h()},h(){var a;S(e,"title",n=(a=i[5].dtype)==null?void 0:a.type),S(e,"class","font-mono")},m(a,r){D(a,e,r),v(e,t)},p(a,r){var s;r&2&&n!==(n=(s=a[5].dtype)==null?void 0:s.type)&&S(e,"title",n)},i:O,o:O,d(a){a&&c(e)}}}function cu(i){let e,l,t;var n=St[i[5].dtype.type];function a(r){return{props:{title:r[5].dtype.type}}}return n&&(e=yt(n,a(i))),{c(){e&&P(e.$$.fragment),l=ce()},l(r){e&&L(e.$$.fragment,r),l=ce()},m(r,s){e&&F(e,r,s),D(r,l,s),t=!0},p(r,s){const o={};if(s&2&&(o.title=r[5].dtype.type),s&2&&n!==(n=St[r[5].dtype.type])){if(e){ie();const f=e;w(f.$$.fragment,1,0,()=>{R(f,1)}),re()}n?(e=yt(n,a(r)),P(e.$$.fragment),b(e.$$.fragment,1),F(e,l.parentNode,l)):e=null}else n&&e.$set(o)},i(r){t||(e&&b(e.$$.fragment,r),t=!0)},o(r){e&&w(e.$$.fragment,r),t=!1},d(r){r&&c(l),e&&R(e,r)}}}function _i(i){let e;return{c(){e=q("[]")},l(l){e=j(l,"[]")},m(l,t){D(l,e,t)},d(l){l&&c(e)}}}function hi(i){let e,l,t,n,a,r,s,o,f,u=i[5].path.indexOf(At)>=0,p,m,d=ot(i[5].path)+"",_,h,k;function $(...M){return i[3](i[5],...M)}function g(...M){return i[4](i[5],...M)}t=new sl({props:{hideLabel:!0,checked:i[0].find($)!=null}}),t.$on("change",g);const y=[cu,uu],I=[];function V(M,A){return M[5].dtype&&M[5].dtype.type!=="map"?0:1}s=V(i),o=I[s]=y[s](i);let C=u&&_i();return{c(){e=N("div"),l=N("div"),P(t.$$.fragment),n=U(),a=N("div"),r=N("div"),o.c(),f=U(),C&&C.c(),p=U(),m=N("div"),_=q(d),h=U(),this.h()},l(M){e=T(M,"DIV",{class:!0});var A=E(e);l=T(A,"DIV",{class:!0});var H=E(l);L(t.$$.fragment,H),H.forEach(c),n=Q(A),a=T(A,"DIV",{class:!0});var J=E(a);r=T(J,"DIV",{class:!0});var G=E(r);o.l(G),f=Q(G),C&&C.l(G),G.forEach(c),J.forEach(c),p=Q(A),m=T(A,"DIV",{class:!0});var W=E(m);_=j(W,d),W.forEach(c),h=Q(A),A.forEach(c),this.h()},h(){S(l,"class","mr-2"),S(r,"class","inline-flex items-center rounded-md p-0.5"),se(r,"bg-blue-200",i[6]),se(r,"bg-teal-100",i[7]),S(a,"class","flex w-10"),S(m,"class","flex-grow"),S(e,"class","flex items-center")},m(M,A){D(M,e,A),v(e,l),F(t,l,null),v(e,n),v(e,a),v(a,r),I[s].m(r,null),v(r,f),C&&C.m(r,null),v(e,p),v(e,m),v(m,_),v(e,h),k=!0},p(M,A){i=M;const H={};A&3&&(H.checked=i[0].find($)!=null),t.$set(H);let J=s;s=V(i),s===J?I[s].p(i,A):(ie(),w(I[J],1,1,()=>{I[J]=null}),re(),o=I[s],o?o.p(i,A):(o=I[s]=y[s](i),o.c()),b(o,1),o.m(r,f)),A&2&&(u=i[5].path.indexOf(At)>=0),u?C||(C=_i(),C.c(),C.m(r,null)):C&&(C.d(1),C=null),(!k||A&2)&&se(r,"bg-blue-200",i[6]),(!k||A&2)&&se(r,"bg-teal-100",i[7]),(!k||A&2)&&d!==(d=ot(i[5].path)+"")&&ae(_,d)},i(M){k||(b(t.$$.fragment,M),b(o),k=!0)},o(M){w(t.$$.fragment,M),w(o),k=!1},d(M){M&&c(e),R(t),I[s].d(),C&&C.d()}}}function du(i){let e,l,t=i[1],n=[];for(let r=0;r<t.length;r+=1)n[r]=hi(mi(i,t,r));const a=r=>w(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ce()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=ce()},m(r,s){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(r,s);D(r,e,s),l=!0},p(r,[s]){if(s&7){t=r[1];let o;for(o=0;o<t.length;o+=1){const f=mi(r,t,o);n[o]?(n[o].p(f,s),b(n[o],1)):(n[o]=hi(f),n[o].c(),b(n[o],1),n[o].m(e.parentNode,e))}for(ie(),o=t.length;o<n.length;o+=1)a(o);re()}},i(r){if(!l){for(let s=0;s<t.length;s+=1)b(n[s]);l=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)w(n[s]);l=!1},d(r){tt(n,r),r&&c(e)}}}function mu(i,e,l){let{fields:t}=e,{checkedFields:n}=e;function a(o,f){f.target.checked?(n.push(o),l(0,n)):l(0,n=n.filter(p=>!zt(p.path,o.path)))}const r=(o,f)=>zt(f.path,o.path),s=(o,f)=>a(o,f);return i.$$set=o=>{"fields"in o&&l(1,t=o.fields),"checkedFields"in o&&l(0,n=o.checkedFields)},[n,t,a,r,s]}class El extends $e{constructor(e){super(),Ee(this,e,mu,du,ke,{fields:1,checkedFields:0})}}function pi(i,e,l){const t=i.slice();return t[40]=e[l],t}function gi(i,e,l){const t=i.slice();return t[43]=e[l],t[44]=e,t[45]=l,t}function bi(i){let e,l,t,n,a,r,s;function o(u){i[27](u)}let f={fields:i[11]};return i[3]!==void 0&&(f.checkedFields=i[3]),a=new El({props:f}),Ue.push(()=>Xe(a,"checkedFields",o)),{c(){e=N("section"),l=N("h4"),t=q("Labels"),n=U(),P(a.$$.fragment),this.h()},l(u){e=T(u,"SECTION",{});var p=E(e);l=T(p,"H4",{class:!0});var m=E(l);t=j(m,"Labels"),m.forEach(c),n=Q(p),L(a.$$.fragment,p),p.forEach(c),this.h()},h(){S(l,"class","svelte-196x1u0")},m(u,p){D(u,e,p),v(e,l),v(l,t),v(e,n),F(a,e,null),s=!0},p(u,p){const m={};p[0]&2048&&(m.fields=u[11]),!r&&p[0]&8&&(r=!0,m.checkedFields=u[3],xe(()=>r=!1)),a.$set(m)},i(u){s||(b(a.$$.fragment,u),s=!0)},o(u){w(a.$$.fragment,u),s=!1},d(u){u&&c(e),R(a)}}}function vi(i){let e,l,t,n,a,r,s;function o(u){i[28](u)}let f={fields:i[14]};return i[4]!==void 0&&(f.checkedFields=i[4]),a=new El({props:f}),Ue.push(()=>Xe(a,"checkedFields",o)),{c(){e=N("section"),l=N("h4"),t=q("Enriched fields"),n=U(),P(a.$$.fragment),this.h()},l(u){e=T(u,"SECTION",{});var p=E(e);l=T(p,"H4",{class:!0});var m=E(l);t=j(m,"Enriched fields"),m.forEach(c),n=Q(p),L(a.$$.fragment,p),p.forEach(c),this.h()},h(){S(l,"class","svelte-196x1u0")},m(u,p){D(u,e,p),v(e,l),v(l,t),v(e,n),F(a,e,null),s=!0},p(u,p){const m={};p[0]&16384&&(m.fields=u[14]),!r&&p[0]&16&&(r=!0,m.checkedFields=u[4],xe(()=>r=!1)),a.$set(m)},i(u){s||(b(a.$$.fragment,u),s=!0)},o(u){w(a.$$.fragment,u),s=!1},d(u){u&&c(e),R(a)}}}function wi(i){let e,l,t,n,a,r,s,o,f,u,p,m,d,_,h,k,$,g,y;f=new gs({props:{class:"inline"}});let I=i[11],V=[];for(let M=0;M<I.length;M+=1)V[M]=ki(gi(i,I,M));const C=M=>w(V[M],1,1,()=>{V[M]=null});return{c(){e=N("section"),l=N("h2"),t=q("Step 2: Filter by label"),n=U(),a=N("table"),r=N("thead"),s=N("tr"),o=N("th"),P(f.$$.fragment),u=q(" Label"),p=U(),m=N("th"),d=q("Include only"),_=U(),h=N("th"),k=q("Exclude"),$=U(),g=N("tbody");for(let M=0;M<V.length;M+=1)V[M].c();this.h()},l(M){e=T(M,"SECTION",{});var A=E(e);l=T(A,"H2",{class:!0});var H=E(l);t=j(H,"Step 2: Filter by label"),H.forEach(c),n=Q(A),a=T(A,"TABLE",{class:!0});var J=E(a);r=T(J,"THEAD",{});var G=E(r);s=T(G,"TR",{});var W=E(s);o=T(W,"TH",{class:!0});var te=E(o);L(f.$$.fragment,te),u=j(te," Label"),te.forEach(c),p=Q(W),m=T(W,"TH",{class:!0});var z=E(m);d=j(z,"Include only"),z.forEach(c),_=Q(W),h=T(W,"TH",{class:!0});var B=E(h);k=j(B,"Exclude"),B.forEach(c),W.forEach(c),G.forEach(c),$=Q(J),g=T(J,"TBODY",{});var K=E(g);for(let x=0;x<V.length;x+=1)V[x].l(K);K.forEach(c),J.forEach(c),A.forEach(c),this.h()},h(){S(l,"class","svelte-196x1u0"),S(o,"class","svelte-196x1u0"),S(m,"class","svelte-196x1u0"),S(h,"class","svelte-196x1u0"),S(a,"class","svelte-196x1u0")},m(M,A){D(M,e,A),v(e,l),v(l,t),v(e,n),v(e,a),v(a,r),v(r,s),v(s,o),F(f,o,null),v(o,u),v(s,p),v(s,m),v(m,d),v(s,_),v(s,h),v(h,k),v(a,$),v(a,g);for(let H=0;H<V.length;H+=1)V[H]&&V[H].m(g,null);y=!0},p(M,A){if(A[0]&4197888){I=M[11];let H;for(H=0;H<I.length;H+=1){const J=gi(M,I,H);V[H]?(V[H].p(J,A),b(V[H],1)):(V[H]=ki(J),V[H].c(),b(V[H],1),V[H].m(g,null))}for(ie(),H=I.length;H<V.length;H+=1)C(H);re()}},i(M){if(!y){b(f.$$.fragment,M);for(let A=0;A<I.length;A+=1)b(V[A]);y=!0}},o(M){w(f.$$.fragment,M),V=V.filter(Boolean);for(let A=0;A<V.length;A+=1)w(V[A]);y=!1},d(M){M&&c(e),R(f),tt(V,M)}}}function ki(i){let e,l,t=at(i[43].path)+"",n,a,r,s,o,f,u,p,m,d,_;function h(V){i[29](V,i[45])}function k(){return i[30](i[45])}let $={};i[9][i[45]]!==void 0&&($.checked=i[9][i[45]]),s=new sl({props:$}),Ue.push(()=>Xe(s,"checked",h)),s.$on("change",k);function g(V){i[31](V,i[45])}function y(){return i[32](i[45])}let I={};return i[10][i[45]]!==void 0&&(I.checked=i[10][i[45]]),p=new sl({props:I}),Ue.push(()=>Xe(p,"checked",g)),p.$on("change",y),{c(){e=N("tr"),l=N("td"),n=q(t),a=U(),r=N("td"),P(s.$$.fragment),f=U(),u=N("td"),P(p.$$.fragment),d=U(),this.h()},l(V){e=T(V,"TR",{});var C=E(e);l=T(C,"TD",{class:!0});var M=E(l);n=j(M,t),M.forEach(c),a=Q(C),r=T(C,"TD",{class:!0});var A=E(r);L(s.$$.fragment,A),A.forEach(c),f=Q(C),u=T(C,"TD",{class:!0});var H=E(u);L(p.$$.fragment,H),H.forEach(c),d=Q(C),C.forEach(c),this.h()},h(){S(l,"class","svelte-196x1u0"),S(r,"class","svelte-196x1u0"),S(u,"class","svelte-196x1u0")},m(V,C){D(V,e,C),v(e,l),v(l,n),v(e,a),v(e,r),F(s,r,null),v(e,f),v(e,u),F(p,u,null),v(e,d),_=!0},p(V,C){i=V,(!_||C[0]&2048)&&t!==(t=at(i[43].path)+"")&&ae(n,t);const M={};!o&&C[0]&512&&(o=!0,M.checked=i[9][i[45]],xe(()=>o=!1)),s.$set(M);const A={};!m&&C[0]&1024&&(m=!0,A.checked=i[10][i[45]],xe(()=>m=!1)),p.$set(A)},i(V){_||(b(s.$$.fragment,V),b(p.$$.fragment,V),_=!0)},o(V){w(s.$$.fragment,V),w(p.$$.fragment,V),_=!1},d(V){V&&c(e),R(s),R(p)}}}function $i(i){let e,l;return e=new Ts({props:{labelText:i[40],value:i[40]}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p:O,i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function _u(i){let e,l,t=i[17],n=[];for(let r=0;r<t.length;r+=1)n[r]=$i(pi(i,t,r));const a=r=>w(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ce()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=ce()},m(r,s){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(r,s);D(r,e,s),l=!0},p(r,s){if(s[0]&131072){t=r[17];let o;for(o=0;o<t.length;o+=1){const f=pi(r,t,o);n[o]?(n[o].p(f,s),b(n[o],1)):(n[o]=$i(f),n[o].c(),b(n[o],1),n[o].m(e.parentNode,e))}for(ie(),o=t.length;o<n.length;o+=1)a(o);re()}},i(r){if(!l){for(let s=0;s<t.length;s+=1)b(n[s]);l=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)w(n[s]);l=!1},d(r){tt(n,r),r&&c(e)}}}function Ei(i){let e,l,t,n;function a(s){i[35](s)}let r={labelText:"JSONL"};return i[8]!==void 0&&(r.toggled=i[8]),l=new es({props:r}),Ue.push(()=>Xe(l,"toggled",a)),{c(){e=N("div"),P(l.$$.fragment),this.h()},l(s){e=T(s,"DIV",{class:!0});var o=E(e);L(l.$$.fragment,o),o.forEach(c),this.h()},h(){S(e,"class","mt-4 border-t border-gray-300 pt-2")},m(s,o){D(s,e,o),F(l,e,null),n=!0},p(s,o){const f={};!t&&o[0]&256&&(t=!0,f.toggled=s[8],xe(()=>t=!1)),l.$set(f)},i(s){n||(b(l.$$.fragment,s),n=!0)},o(s){w(l.$$.fragment,s),n=!1},d(s){s&&c(e),R(l)}}}function hu(i){let e,l,t;return l=new Ot({props:{kind:"success",lowContrast:!0,hideCloseButton:!0,$$slots:{actions:[wu],title:[bu]},$$scope:{ctx:i}}}),{c(){e=N("div"),P(l.$$.fragment),this.h()},l(n){e=T(n,"DIV",{class:!0});var a=E(e);L(l.$$.fragment,a),a.forEach(c),this.h()},h(){S(e,"class","export-success")},m(n,a){D(n,e,a),F(l,e,null),t=!0},p(n,a){const r={};a[0]&64|a[1]&32768&&(r.$$scope={dirty:a,ctx:n}),l.$set(r)},i(n){t||(b(l.$$.fragment,n),t=!0)},o(n){w(l.$$.fragment,n),t=!1},d(n){n&&c(e),R(l)}}}function pu(i){let e,l;return e=new fu({}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p:O,i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function gu(i){let e,l;return e=new Ot({props:{kind:"error",title:"Error",subtitle:i[6].error.body.detail,hideCloseButton:!0}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const a={};n[0]&64&&(a.subtitle=t[6].error.body.detail),e.$set(a)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function bu(i){let e,l,t,n=i[6].data+"",a;return{c(){e=N("div"),l=q("Dataset exported to "),t=N("a"),a=q(n),this.h()},l(r){e=T(r,"DIV",{slot:!0,class:!0});var s=E(e);l=j(s,"Dataset exported to "),t=T(s,"A",{href:!0});var o=E(t);a=j(o,n),o.forEach(c),s.forEach(c),this.h()},h(){S(t,"href",i[23]()),S(e,"slot","title"),S(e,"class","inline")},m(r,s){D(r,e,s),v(e,l),v(e,t),v(t,a)},p(r,s){s[0]&64&&n!==(n=r[6].data+"")&&ae(a,n)},d(r){r&&c(e)}}}function vu(i){let e,l,t,n;return t=new Fs({}),{c(){e=q("Download "),l=N("span"),P(t.$$.fragment),this.h()},l(a){e=j(a,"Download "),l=T(a,"SPAN",{class:!0});var r=E(l);L(t.$$.fragment,r),r.forEach(c),this.h()},h(){S(l,"class","ml-2")},m(a,r){D(a,e,r),D(a,l,r),F(t,l,null),n=!0},p:O,i(a){n||(b(t.$$.fragment,a),n=!0)},o(a){w(t.$$.fragment,a),n=!1},d(a){a&&c(e),a&&c(l),R(t)}}}function wu(i){let e,l,t;return l=new ru({props:{$$slots:{default:[vu]},$$scope:{ctx:i}}}),l.$on("click",i[36]),{c(){e=N("div"),P(l.$$.fragment),this.h()},l(n){e=T(n,"DIV",{class:!0});var a=E(e);L(l.$$.fragment,a),a.forEach(c),this.h()},h(){S(e,"class","my-auto")},m(n,a){D(n,e,a),F(l,e,null),t=!0},p(n,a){const r={};a[1]&32768&&(r.$$scope={dirty:a,ctx:n}),l.$set(r)},i(n){t||(b(l.$$.fragment,n),t=!0)},o(n){w(l.$$.fragment,n),t=!1},d(n){n&&c(e),R(l)}}}function yi(i){let e,l;return{c(){e=N("p"),l=q("No fields selected. Please select at least one field to preview in JSON."),this.h()},l(t){e=T(t,"P",{class:!0});var n=E(e);l=j(n,"No fields selected. Please select at least one field to preview in JSON."),n.forEach(c),this.h()},h(){S(e,"class","text-gray-600")},m(t,n){D(t,e,n),v(e,l)},d(t){t&&c(e)}}}function ku(i){let e,l,t,n;return e=new Ot({props:{hideCloseButton:!0,kind:"info",lowContrast:!0,title:"The preview below is not identical to the exported file which depends on the format selected above."}}),t=new cr({props:{value:JSON.stringify(i[16].data,null,2),readonly:!0,rows:20,placeholder:"3 rows of data for previewing the response",class:"mb-2 font-mono"}}),{c(){P(e.$$.fragment),l=U(),P(t.$$.fragment)},l(a){L(e.$$.fragment,a),l=Q(a),L(t.$$.fragment,a)},m(a,r){F(e,a,r),D(a,l,r),F(t,a,r),n=!0},p(a,r){const s={};r[0]&65536&&(s.value=JSON.stringify(a[16].data,null,2)),t.$set(s)},i(a){n||(b(e.$$.fragment,a),b(t.$$.fragment,a),n=!0)},o(a){w(e.$$.fragment,a),w(t.$$.fragment,a),n=!1},d(a){R(e,a),a&&c(l),R(t,a)}}}function $u(i){let e,l;return e=new it({props:{paragraph:!0}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p:O,i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Eu(i){let e,l,t,n,a,r,s,o,f,u,p,m,d,_,h,k,$,g,y,I,V,C,M=(i[11].length>0?3:2)+"",A,H,J,G,W,te,z,B,K,x,ee,_e,he,ne,ze,le,fe,De,X=(i[11].length>0?4:3)+"",Y,oe,Z,ye,ve,pe,we,Ce;function Ze(ue){i[26](ue)}let rt={fields:i[15]};i[2]!==void 0&&(rt.checkedFields=i[2]),_=new El({props:rt}),Ue.push(()=>Xe(_,"checkedFields",Ze));let Re=i[11].length>0&&bi(i),Qe=i[14].length>0&&vi(i),Ye=i[11].length>0&&wi(i);function ll(ue){i[33](ue)}let Vt={$$slots:{default:[_u]},$$scope:{ctx:i}};i[7]!==void 0&&(Vt.selected=i[7]),W=new Ns({props:Vt}),Ue.push(()=>Xe(W,"selected",ll));function nl(ue){i[34](ue)}let qt={labelText:"Output filepath",invalid:i[1].length===0,invalidText:"The file path is required",placeholder:"Enter a file path for the exported dataset"};i[1]!==void 0&&(qt.value=i[1]),K=new ir({props:qt}),Ue.push(()=>Xe(K,"value",nl));let Ge=i[7]==="json"&&Ei(i);const jt=[gu,pu,hu],de=[];function Ve(ue,Ie){return ue[6].isError?0:ue[6].isLoading?1:ue[6].data?2:-1}~(he=Ve(i))&&(ne=de[he]=jt[he](i));let Be=i[5].length===0&&yi();const qe=[$u,ku],je=[];function Oe(ue,Ie){return ue[16]&&ue[16].isFetching?0:ue[13]&&ue[16]?1:-1}return~(pe=Oe(i))&&(we=je[pe]=qe[pe](i)),{c(){e=N("div"),l=N("section"),t=N("h2"),n=q("Step 1: Fields to export"),a=U(),r=N("p"),s=q("No fields selected. Please select at least one field to export."),o=U(),f=N("div"),u=N("section"),p=N("h4"),m=q("Source fields"),d=U(),P(_.$$.fragment),k=U(),Re&&Re.c(),$=U(),Qe&&Qe.c(),g=U(),Ye&&Ye.c(),y=U(),I=N("section"),V=N("h2"),C=q("Step "),A=q(M),H=q(": Export format"),J=U(),G=N("div"),P(W.$$.fragment),z=U(),B=N("div"),P(K.$$.fragment),ee=U(),Ge&&Ge.c(),_e=U(),ne&&ne.c(),ze=U(),le=N("section"),fe=N("h2"),De=q("Step "),Y=q(X),oe=q(": JSON preview"),Z=U(),Be&&Be.c(),ye=U(),ve=N("div"),we&&we.c(),this.h()},l(ue){e=T(ue,"DIV",{class:!0});var Ie=E(e);l=T(Ie,"SECTION",{});var ft=E(l);t=T(ft,"H2",{class:!0});var We=E(t);n=j(We,"Step 1: Fields to export"),We.forEach(c),a=Q(ft),r=T(ft,"P",{class:!0});var Je=E(r);s=j(Je,"No fields selected. Please select at least one field to export."),Je.forEach(c),o=Q(ft),f=T(ft,"DIV",{class:!0});var ut=E(f);u=T(ut,"SECTION",{});var ct=E(u);p=T(ct,"H4",{class:!0});var Ct=E(p);m=j(Ct,"Source fields"),Ct.forEach(c),d=Q(ct),L(_.$$.fragment,ct),ct.forEach(c),k=Q(ut),Re&&Re.l(ut),$=Q(ut),Qe&&Qe.l(ut),ut.forEach(c),ft.forEach(c),g=Q(Ie),Ye&&Ye.l(Ie),y=Q(Ie),I=T(Ie,"SECTION",{});var st=E(I);V=T(st,"H2",{class:!0});var Ut=E(V);C=j(Ut,"Step "),A=j(Ut,M),H=j(Ut,": Export format"),Ut.forEach(c),J=Q(st),G=T(st,"DIV",{});var yl=E(G);L(W.$$.fragment,yl),yl.forEach(c),z=Q(st),B=T(st,"DIV",{class:!0});var Il=E(B);L(K.$$.fragment,Il),Il.forEach(c),ee=Q(st),Ge&&Ge.l(st),_e=Q(st),ne&&ne.l(st),st.forEach(c),ze=Q(Ie),le=T(Ie,"SECTION",{});var $t=E(le);fe=T($t,"H2",{class:!0});var Qt=E(fe);De=j(Qt,"Step "),Y=j(Qt,X),oe=j(Qt,": JSON preview"),Qt.forEach(c),Z=Q($t),Be&&Be.l($t),ye=Q($t),ve=T($t,"DIV",{class:!0});var Sl=E(ve);we&&we.l(Sl),Sl.forEach(c),$t.forEach(c),Ie.forEach(c),this.h()},h(){S(t,"class","svelte-196x1u0"),S(r,"class","text-red-600"),se(r,"invisible",i[5].length>0),S(p,"class","svelte-196x1u0"),S(f,"class","flex flex-wrap gap-x-12"),S(V,"class","svelte-196x1u0"),S(B,"class","mt-4 max-w-lg pt-2"),S(fe,"class","svelte-196x1u0"),S(ve,"class","preview svelte-196x1u0"),S(e,"class","flex flex-col gap-y-10")},m(ue,Ie){D(ue,e,Ie),v(e,l),v(l,t),v(t,n),v(l,a),v(l,r),v(r,s),v(l,o),v(l,f),v(f,u),v(u,p),v(p,m),v(u,d),F(_,u,null),v(f,k),Re&&Re.m(f,null),v(f,$),Qe&&Qe.m(f,null),v(e,g),Ye&&Ye.m(e,null),v(e,y),v(e,I),v(I,V),v(V,C),v(V,A),v(V,H),v(I,J),v(I,G),F(W,G,null),v(I,z),v(I,B),F(K,B,null),v(I,ee),Ge&&Ge.m(I,null),v(I,_e),~he&&de[he].m(I,null),v(e,ze),v(e,le),v(le,fe),v(fe,De),v(fe,Y),v(fe,oe),v(le,Z),Be&&Be.m(le,null),v(le,ye),v(le,ve),~pe&&je[pe].m(ve,null),Ce=!0},p(ue,Ie){(!Ce||Ie[0]&32)&&se(r,"invisible",ue[5].length>0);const ft={};Ie[0]&32768&&(ft.fields=ue[15]),!h&&Ie[0]&4&&(h=!0,ft.checkedFields=ue[2],xe(()=>h=!1)),_.$set(ft),ue[11].length>0?Re?(Re.p(ue,Ie),Ie[0]&2048&&b(Re,1)):(Re=bi(ue),Re.c(),b(Re,1),Re.m(f,$)):Re&&(ie(),w(Re,1,1,()=>{Re=null}),re()),ue[14].length>0?Qe?(Qe.p(ue,Ie),Ie[0]&16384&&b(Qe,1)):(Qe=vi(ue),Qe.c(),b(Qe,1),Qe.m(f,null)):Qe&&(ie(),w(Qe,1,1,()=>{Qe=null}),re()),ue[11].length>0?Ye?(Ye.p(ue,Ie),Ie[0]&2048&&b(Ye,1)):(Ye=wi(ue),Ye.c(),b(Ye,1),Ye.m(e,y)):Ye&&(ie(),w(Ye,1,1,()=>{Ye=null}),re()),(!Ce||Ie[0]&2048)&&M!==(M=(ue[11].length>0?3:2)+"")&&ae(A,M);const We={};Ie[1]&32768&&(We.$$scope={dirty:Ie,ctx:ue}),!te&&Ie[0]&128&&(te=!0,We.selected=ue[7],xe(()=>te=!1)),W.$set(We);const Je={};Ie[0]&2&&(Je.invalid=ue[1].length===0),!x&&Ie[0]&2&&(x=!0,Je.value=ue[1],xe(()=>x=!1)),K.$set(Je),ue[7]==="json"?Ge?(Ge.p(ue,Ie),Ie[0]&128&&b(Ge,1)):(Ge=Ei(ue),Ge.c(),b(Ge,1),Ge.m(I,_e)):Ge&&(ie(),w(Ge,1,1,()=>{Ge=null}),re());let ut=he;he=Ve(ue),he===ut?~he&&de[he].p(ue,Ie):(ne&&(ie(),w(de[ut],1,1,()=>{de[ut]=null}),re()),~he?(ne=de[he],ne?ne.p(ue,Ie):(ne=de[he]=jt[he](ue),ne.c()),b(ne,1),ne.m(I,null)):ne=null),(!Ce||Ie[0]&2048)&&X!==(X=(ue[11].length>0?4:3)+"")&&ae(Y,X),ue[5].length===0?Be||(Be=yi(),Be.c(),Be.m(le,ye)):Be&&(Be.d(1),Be=null);let ct=pe;pe=Oe(ue),pe===ct?~pe&&je[pe].p(ue,Ie):(we&&(ie(),w(je[ct],1,1,()=>{je[ct]=null}),re()),~pe?(we=je[pe],we?we.p(ue,Ie):(we=je[pe]=qe[pe](ue),we.c()),b(we,1),we.m(ve,null)):we=null)},i(ue){Ce||(b(_.$$.fragment,ue),b(Re),b(Qe),b(Ye),b(W.$$.fragment,ue),b(K.$$.fragment,ue),b(Ge),b(ne),b(we),Ce=!0)},o(ue){w(_.$$.fragment,ue),w(Re),w(Qe),w(Ye),w(W.$$.fragment,ue),w(K.$$.fragment,ue),w(Ge),w(ne),w(we),Ce=!1},d(ue){ue&&c(e),R(_),Re&&Re.d(),Qe&&Qe.d(),Ye&&Ye.d(),R(W),R(K),Ge&&Ge.d(),~he&&de[he].d(),Be&&Be.d(),~pe&&je[pe].d()}}}function yu(i){let e,l,t,n,a,r;return e=new gl({props:{title:"Export dataset"}}),t=new bl({props:{hasForm:!0,$$slots:{default:[Eu]},$$scope:{ctx:i}}}),a=new vl({props:{primaryButtonText:"Export dataset",primaryButtonDisabled:i[12],secondaryButtonText:"Cancel"}}),a.$on("click:button--secondary",i[21]),{c(){P(e.$$.fragment),l=U(),P(t.$$.fragment),n=U(),P(a.$$.fragment)},l(s){L(e.$$.fragment,s),l=Q(s),L(t.$$.fragment,s),n=Q(s),L(a.$$.fragment,s)},m(s,o){F(e,s,o),D(s,l,o),F(t,s,o),D(s,n,o),F(a,s,o),r=!0},p(s,o){const f={};o[0]&126974|o[1]&32768&&(f.$$scope={dirty:o,ctx:s}),t.$set(f);const u={};o[0]&4096&&(u.primaryButtonDisabled=s[12]),a.$set(u)},i(s){r||(b(e.$$.fragment,s),b(t.$$.fragment,s),b(a.$$.fragment,s),r=!0)},o(s){w(e.$$.fragment,s),w(t.$$.fragment,s),w(a.$$.fragment,s),r=!1},d(s){R(e,s),s&&c(l),R(t,s),s&&c(n),R(a,s)}}}function Iu(i){let e,l;return e=new pl({props:{size:"lg",open:i[0],$$slots:{default:[yu]},$$scope:{ctx:i}}}),e.$on("submit",i[20]),e.$on("close",i[37]),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const a={};n[0]&1&&(a.open=t[0]),n[0]&131070|n[1]&32768&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Su(i,e,l){let t,n,a,r,s,o,f,u,p,m=O,d=()=>(m(),m=Ne(s,Z=>l(16,p=Z)),s);i.$$.on_destroy.push(()=>m());let{open:_=!1}=e,{schema:h}=e;const k=["json","csv","parquet"];let $="json",g="",y=!1;const I=Dt(),V=xr();Ae(i,V,Z=>l(6,f=Z));const C=lt();Ae(i,C,Z=>l(25,u=Z));let M=[],A=[],H=[],J=[],G=[];function W(Z){const ye=bt(Z),pe=Wi(Z).filter(Ze=>{var rt;return["embedding"].indexOf(((rt=Ze.dtype)==null?void 0:rt.type)||"")===-1}).filter(Ze=>!It(Ze)&&!hl(Ze)),we=ye.filter(Ze=>Ze.label!=null),Ce=ye.filter(Ze=>el(Ze)).filter(Ze=>!bt(Ze).some(rt=>{var Re;return((Re=rt.dtype)==null?void 0:Re.type)==="embedding"}));return{sourceFields:pe,enrichedFields:Ce,labelFields:we}}async function te(){const Z=u.namespace,ye=u.datasetName,ve={format:$,filepath:g,jsonl:y,columns:r.map(pe=>pe.path),include_labels:a.filter((pe,we)=>J[we]).map(pe=>pe.path[0]),exclude_labels:a.filter((pe,we)=>G[we]).map(pe=>pe.path[0])};f.mutate([Z,ye,ve])}function z(){l(0,_=!1),I("close")}function B(Z,ye){ye?l(10,G[Z]=!1,G):l(9,J[Z]=!1,J)}function K(){return`/api/v1/datasets/serve_dataset?filepath=${f.data}`}function x(Z){M=Z,l(2,M)}function ee(Z){A=Z,l(3,A)}function _e(Z){H=Z,l(4,H)}function he(Z,ye){i.$$.not_equal(J[ye],Z)&&(J[ye]=Z,l(9,J))}const ne=Z=>B(Z,!0);function ze(Z,ye){i.$$.not_equal(G[ye],Z)&&(G[ye]=Z,l(10,G))}const le=Z=>B(Z,!1);function fe(Z){$=Z,l(7,$)}function De(Z){g=Z,l(1,g)}function X(Z){y=Z,l(8,y)}const Y=()=>window.open(K(),"_blank"),oe=()=>l(0,_=!1);return i.$$set=Z=>{"open"in Z&&l(0,_=Z.open),"schema"in Z&&l(24,h=Z.schema)},i.$$.update=()=>{i.$$.dirty[0]&16777216&&l(15,{sourceFields:t,enrichedFields:n,labelFields:a}=W(h),t,(l(14,n),l(24,h)),(l(11,a),l(24,h))),i.$$.dirty[0]&28&&l(5,r=[...M,...A,...H]),i.$$.dirty[0]&33554464&&d(l(13,s=r.length>0?wl(u.namespace,u.datasetName,{columns:r.map(Z=>Z.path),limit:3,combine_columns:!1}):null)),i.$$.dirty[0]&98&&l(12,o=r.length===0||g.length===0||f.isLoading)},[_,g,M,A,H,r,f,$,y,J,G,a,o,s,n,t,p,k,V,C,te,z,B,K,h,u,x,ee,_e,he,ne,ze,le,fe,De,X,Y,oe]}class Du extends $e{constructor(e){super(),Ee(this,e,Su,Iu,ke,{open:0,schema:24},null,[-1,-1])}}function Ii(i){let e;return{c(){e=N("div"),this.h()},l(l){e=T(l,"DIV",{class:!0}),E(e).forEach(c),this.h()},h(){S(e,"class","hidden")},m(l,t){D(l,e,t)},d(l){l&&c(e)}}}function Nu(i){var t;let e,l=((t=i[2])==null?void 0:t.data)!=null&&Ii();return{c(){l&&l.c(),e=ce()},l(n){l&&l.l(n),e=ce()},m(n,a){l&&l.m(n,a),D(n,e,a)},p(n,[a]){var r;((r=n[2])==null?void 0:r.data)!=null?l||(l=Ii(),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:O,o:O,d(n){l&&l.d(n),n&&c(e)}}}function Tu(i,e,l){let t,n,a,r,s,o,f=O,u=()=>(f(),f=Ne(r,$=>l(8,o=$)),r),p,m,d=O,_=()=>(d(),d=Ne(s,$=>l(2,m=$)),s);i.$$.on_destroy.push(()=>f()),i.$$.on_destroy.push(()=>d());let{rowId:h}=e;const k=lt();return Ae(i,k,$=>l(9,p=$)),i.$$set=$=>{"rowId"in $&&l(4,h=$.rowId)},i.$$.update=()=>{var $;i.$$.dirty&512&&l(7,t=p.namespace),i.$$.dirty&512&&l(6,n=p.datasetName),i.$$.dirty&512&&l(5,a=_l(p)),i.$$.dirty&704&&u(l(1,r=_t(t,n,ht(p)))),i.$$.dirty&496&&_(l(0,s=!o.isFetching&&(($=o==null?void 0:o.data)==null?void 0:$.schema)!=null&&a!=null&&h!=null?ts(t,n,h,a,o.data.schema):null))},[s,r,m,k,h,a,n,t,o,p]}class Vu extends $e{constructor(e){super(),Ee(this,e,Tu,Nu,ke,{rowId:4})}}function Cu(i,e,l){let t,n,a,r,s=O,o=()=>(s(),s=Ne(a,k=>l(6,r=k)),a),f,u=O,p=()=>(u(),u=Ne(t,k=>l(7,f=k)),t),m;i.$$.on_destroy.push(()=>s()),i.$$.on_destroy.push(()=>u());let{limit:d}=e,{rowsResponse:_=void 0}=e;const h=lt();return Ae(i,h,k=>l(8,m=k)),i.$$set=k=>{"limit"in k&&l(4,d=k.limit),"rowsResponse"in k&&l(3,_=k.rowsResponse)},i.$$.update=()=>{var k;i.$$.dirty&256&&p(l(1,t=_t(m.namespace,m.datasetName,ht(m)))),i.$$.dirty&256&&l(5,n=_l(m,!0)),i.$$.dirty&432&&o(l(0,a=wl(m.namespace,m.datasetName,{...n,columns:[vt],limit:d},(k=f.data)==null?void 0:k.schema))),i.$$.dirty&64&&(r!=null&&r.data!=null&&!r.isPreviousData&&!r.isFetching?l(3,_=r.data):l(3,_=void 0))},[a,t,h,_,d,n,r,f,m]}class Si extends $e{constructor(e){super(),Ee(this,e,Cu,null,ke,{limit:4,rowsResponse:3})}}function Di(i,e,l){const t=i.slice();t[24]=e[l];const n=wt.value(t[24][vt],"string");return t[4]=n,t}function Mu(i){var M;let e,l,t,n,a,r,s,o,f,u,p,m,d,_,h=i[4]!=null&&i[2]!=null&&i[2]>0&&Ni(i);const k=[Bu,Au],$=[];function g(A,H){return A[2]!=null&&A[2]>=0?0:1}r=g(i),s=$[r]=k[r](i);const y=[Fu,Pu],I=[];function V(A,H){var J;return((J=A[1])==null?void 0:J.total_num_rows)!=null?0:1}u=V(i),p=I[u]=y[u](i);let C=i[2]!=null&&i[2]<(((M=i[1])==null?void 0:M.total_num_rows)||0)-1&&Ti(i);return{c(){e=N("div"),h&&h.c(),l=U(),t=N("div"),n=N("div"),a=N("span"),s.c(),o=q(`
        of
        `),f=N("span"),p.c(),m=U(),d=N("div"),C&&C.c(),this.h()},l(A){e=T(A,"DIV",{class:!0});var H=E(e);h&&h.l(H),H.forEach(c),l=Q(A),t=T(A,"DIV",{class:!0});var J=E(t);n=T(J,"DIV",{class:!0});var G=E(n);a=T(G,"SPAN",{class:!0});var W=E(a);s.l(W),W.forEach(c),o=j(G,`
        of
        `),f=T(G,"SPAN",{class:!0});var te=E(f);p.l(te),te.forEach(c),G.forEach(c),J.forEach(c),m=Q(A),d=T(A,"DIV",{class:!0});var z=E(d);C&&C.l(z),z.forEach(c),this.h()},h(){S(e,"class","flex-0"),S(a,"class","inline-flex"),S(f,"class","inline-flex"),S(n,"class","min-w-0 max-w-lg truncate text-center text-lg"),S(t,"class","flex-col items-center justify-items-center"),S(d,"class","flex-0")},m(A,H){D(A,e,H),h&&h.m(e,null),D(A,l,H),D(A,t,H),v(t,n),v(n,a),$[r].m(a,null),v(n,o),v(n,f),I[u].m(f,null),D(A,m,H),D(A,d,H),C&&C.m(d,null),_=!0},p(A,H){var W;A[4]!=null&&A[2]!=null&&A[2]>0?h?(h.p(A,H),H&20&&b(h,1)):(h=Ni(A),h.c(),b(h,1),h.m(e,null)):h&&(ie(),w(h,1,1,()=>{h=null}),re());let J=r;r=g(A),r===J?$[r].p(A,H):(ie(),w($[J],1,1,()=>{$[J]=null}),re(),s=$[r],s?s.p(A,H):(s=$[r]=k[r](A),s.c()),b(s,1),s.m(a,null));let G=u;u=V(A),u===G?I[u].p(A,H):(ie(),w(I[G],1,1,()=>{I[G]=null}),re(),p=I[u],p?p.p(A,H):(p=I[u]=y[u](A),p.c()),b(p,1),p.m(f,null)),A[2]!=null&&A[2]<(((W=A[1])==null?void 0:W.total_num_rows)||0)-1?C?(C.p(A,H),H&6&&b(C,1)):(C=Ti(A),C.c(),b(C,1),C.m(d,null)):C&&(ie(),w(C,1,1,()=>{C=null}),re())},i(A){_||(b(h),b(s),b(p),b(C),_=!0)},o(A){w(h),w(s),w(p),w(C),_=!1},d(A){A&&c(e),h&&h.d(),A&&c(l),A&&c(t),$[r].d(),I[u].d(),A&&c(m),A&&c(d),C&&C.d()}}}function zu(i){let e,l;return{c(){e=N("div"),l=q("No results found"),this.h()},l(t){e=T(t,"DIV",{class:!0});var n=E(e);l=j(n,"No results found"),n.forEach(c),this.h()},h(){S(e,"class","w-full text-center")},m(t,n){D(t,e,n),v(e,l)},p:O,i:O,o:O,d(t){t&&c(e)}}}function Ni(i){let e,l,t,n,a;return l=new dr({props:{title:"Previous item",size:24}}),{c(){e=N("button"),P(l.$$.fragment)},l(r){e=T(r,"BUTTON",{});var s=E(e);L(l.$$.fragment,s),s.forEach(c)},m(r,s){D(r,e,s),F(l,e,null),t=!0,n||(a=Pe(e,"click",i[20]),n=!0)},p:O,i(r){t||(b(l.$$.fragment,r),t=!0)},o(r){w(l.$$.fragment,r),t=!1},d(r){r&&c(e),R(l),n=!1,a()}}}function Au(i){let e,l;return e=new it({props:{lines:1,class:"!w-10"}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p:O,i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Bu(i){let e=i[2]+1+"",l;return{c(){l=q(e)},l(t){l=j(t,e)},m(t,n){D(t,l,n)},p(t,n){n&4&&e!==(e=t[2]+1+"")&&ae(l,e)},i:O,o:O,d(t){t&&c(l)}}}function Pu(i){let e,l;return e=new it({props:{lines:1,class:"!w-20"}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p:O,i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Fu(i){var t;let e=Me((t=i[1])==null?void 0:t.total_num_rows)+"",l;return{c(){l=q(e)},l(n){l=j(n,e)},m(n,a){D(n,l,a)},p(n,a){var r;a&2&&e!==(e=Me((r=n[1])==null?void 0:r.total_num_rows)+"")&&ae(l,e)},i:O,o:O,d(n){n&&c(l)}}}function Ti(i){let e,l,t,n,a;return l=new mr({props:{title:"Next item",size:24}}),{c(){e=N("button"),P(l.$$.fragment)},l(r){e=T(r,"BUTTON",{});var s=E(e);L(l.$$.fragment,s),s.forEach(c)},m(r,s){D(r,e,s),F(l,e,null),t=!0,n||(a=Pe(e,"click",i[21]),n=!0)},p:O,i(r){t||(b(l.$$.fragment,r),t=!0)},o(r){w(l.$$.fragment,r),t=!1},d(r){r&&c(e),R(l),n=!1,a()}}}function Vi(i){let e,l;return e=new Vu({props:{rowId:i[4]}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const a={};n&8&&(a.rowId=t[4]),e.$set(a)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Ci(i){let e,l,t;return l=new or({props:{rowId:i[4],mediaFields:i[7],highlightedFields:i[6]}}),{c(){e=N("div"),P(l.$$.fragment),this.h()},l(n){e=T(n,"DIV",{class:!0});var a=E(e);L(l.$$.fragment,a),a.forEach(c),this.h()},h(){S(e,"class","flex h-full w-full flex-col overflow-y-scroll pb-32 pl-5 pr-2")},m(n,a){D(n,e,a),F(l,e,null),t=!0},p(n,a){const r={};a&16&&(r.rowId=n[4]),a&128&&(r.mediaFields=n[7]),a&64&&(r.highlightedFields=n[6]),l.$set(r)},i(n){t||(b(l.$$.fragment,n),t=!0)},o(n){w(l.$$.fragment,n),t=!1},d(n){n&&c(e),R(l)}}}function Ru(i){var te;let e,l,t,n,a,r,s,o,f,u,p,m,d,_,h,k,$;e=new wr({props:{totalNumRows:(te=i[1])==null?void 0:te.total_num_rows,manifest:i[11].data}});const g=[zu,Mu],y=[];function I(z,B){var K;return((K=z[3])==null?void 0:K.length)===0?0:1}n=I(i),a=y[n]=g[n](i);function V(z){i[22](z)}let C={limit:i[0]};i[1]!==void 0&&(C.rowsResponse=i[1]),s=new Si({props:C}),Ue.push(()=>Xe(s,"rowsResponse",V));function M(z){i[23](z)}let A={limit:i[0]*2};i[5]!==void 0&&(A.rowsResponse=i[5]),u=new Si({props:A}),Ue.push(()=>Xe(u,"rowsResponse",M));let H=i[3]||[],J=[];for(let z=0;z<H.length;z+=1)J[z]=Vi(Di(i,H,z));const G=z=>w(J[z],1,1,()=>{J[z]=null});let W=i[4]!=null&&Ci(i);return{c(){P(e.$$.fragment),l=U(),t=N("div"),a.c(),r=U(),P(s.$$.fragment),f=U(),P(u.$$.fragment),m=U();for(let z=0;z<J.length;z+=1)J[z].c();d=U(),W&&W.c(),_=ce(),this.h()},l(z){L(e.$$.fragment,z),l=Q(z),t=T(z,"DIV",{class:!0});var B=E(t);a.l(B),B.forEach(c),r=Q(z),L(s.$$.fragment,z),f=Q(z),L(u.$$.fragment,z),m=Q(z);for(let K=0;K<J.length;K+=1)J[K].l(z);d=Q(z),W&&W.l(z),_=ce(),this.h()},h(){S(t,"class","mx-5 my-2 flex items-center justify-between rounded-lg border border-neutral-300 bg-neutral-100 py-2")},m(z,B){F(e,z,B),D(z,l,B),D(z,t,B),y[n].m(t,null),D(z,r,B),F(s,z,B),D(z,f,B),F(u,z,B),D(z,m,B);for(let K=0;K<J.length;K+=1)J[K]&&J[K].m(z,B);D(z,d,B),W&&W.m(z,B),D(z,_,B),h=!0,k||($=Pe(window,"keydown",i[14]),k=!0)},p(z,[B]){var he;const K={};B&2&&(K.totalNumRows=(he=z[1])==null?void 0:he.total_num_rows),B&2048&&(K.manifest=z[11].data),e.$set(K);let x=n;n=I(z),n===x?y[n].p(z,B):(ie(),w(y[x],1,1,()=>{y[x]=null}),re(),a=y[n],a?a.p(z,B):(a=y[n]=g[n](z),a.c()),b(a,1),a.m(t,null));const ee={};B&1&&(ee.limit=z[0]),!o&&B&2&&(o=!0,ee.rowsResponse=z[1],xe(()=>o=!1)),s.$set(ee);const _e={};if(B&1&&(_e.limit=z[0]*2),!p&&B&32&&(p=!0,_e.rowsResponse=z[5],xe(()=>p=!1)),u.$set(_e),B&8){H=z[3]||[];let ne;for(ne=0;ne<H.length;ne+=1){const ze=Di(z,H,ne);J[ne]?(J[ne].p(ze,B),b(J[ne],1)):(J[ne]=Vi(ze),J[ne].c(),b(J[ne],1),J[ne].m(d.parentNode,d))}for(ie(),ne=H.length;ne<J.length;ne+=1)G(ne);re()}z[4]!=null?W?(W.p(z,B),B&16&&b(W,1)):(W=Ci(z),W.c(),b(W,1),W.m(_.parentNode,_)):W&&(ie(),w(W,1,1,()=>{W=null}),re())},i(z){if(!h){b(e.$$.fragment,z),b(a),b(s.$$.fragment,z),b(u.$$.fragment,z);for(let B=0;B<H.length;B+=1)b(J[B]);b(W),h=!0}},o(z){w(e.$$.fragment,z),w(a),w(s.$$.fragment,z),w(u.$$.fragment,z),J=J.filter(Boolean);for(let B=0;B<J.length;B+=1)w(J[B]);w(W),h=!1},d(z){R(e,z),z&&c(l),z&&c(t),y[n].d(),z&&c(r),R(s,z),z&&c(f),R(u,z),z&&c(m),tt(J,z),z&&c(d),W&&W.d(z),z&&c(_),k=!1,$()}}}const Hu=5;function Lu(i,e,l){let t,n,a,r,s,o,f,u,p,m,d,_=O,h=()=>(_(),_=Ne(t,x=>l(17,d=x)),t),k,$,g=O,y=()=>(g(),g=Ne(u,x=>l(19,$=x)),u),I,V=O,C=()=>(V(),V=Ne(a,x=>l(11,I=x)),a);i.$$.on_destroy.push(()=>_()),i.$$.on_destroy.push(()=>g()),i.$$.on_destroy.push(()=>V());const M=lt();Ae(i,M,x=>l(18,k=x));let A=Hu,H,J;function G(x){if(o==null)return;const ee=x?o+1:Math.max(o-1,0),_e=wt.value(J==null?void 0:J.rows[ee][vt],"string");if(_e!=null){M.setRowId(_e);return}}function W(x){x.code==="ArrowLeft"?G(!1):x.code==="ArrowRight"&&G(!0)}const te=()=>G(!1),z=()=>G(!0);function B(x){H=x,l(1,H)}function K(x){J=x,l(5,J)}return i.$$.update=()=>{var x;i.$$.dirty&262144&&h(l(10,t=_t(k.namespace,k.datasetName,ht(k)))),i.$$.dirty&2&&l(3,n=H==null?void 0:H.rows),i.$$.dirty&262144&&C(l(9,a=Zi(k.namespace,k.datasetName))),i.$$.dirty&8&&l(16,r=n&&n.length>0?wt.value(n[0][vt],"string"):void 0),i.$$.dirty&327680&&l(4,s=k.rowId||r),i.$$.dirty&24&&l(2,o=s!=null&&n!=null?n.findIndex(ee=>wt.value(ee[vt],"string")===s):void 0),i.$$.dirty&12&&l(15,f=n!=null&&o!=null&&(o===-1||o>=n.length)),i.$$.dirty&32771&&l(0,A=f&&(H!=null&&H.total_num_rows)?Math.min(A*2,H.total_num_rows):A),i.$$.dirty&262144&&y(l(8,u=Tt(k.namespace,k.datasetName))),i.$$.dirty&655360&&l(7,p=$.data?xi((x=d==null?void 0:d.data)==null?void 0:x.schema,$.data):[]),i.$$.dirty&393216&&l(6,m=Xi(k.query,d==null?void 0:d.data))},[A,H,o,n,s,J,m,p,u,a,t,I,M,G,W,f,r,d,k,$,te,z,B,K]}class Ou extends $e{constructor(e){super(),Ee(this,e,Lu,Ru,ke,{})}}function Mi(i,e,l){const t=i.slice();t[12]=e[l];const n=t[3](t[12]);t[13]=n;const a=t[4](t[12]);return t[14]=a,t}function qu(i){let e,l,t,n,a,r,s,o,f;s=new ml({props:{size:"small",tooltipPosition:"left",icon:Ki,iconDescription:"Sort dataset by concept score"}}),s.$on("click",i[5]);let u=i[2].data.rows,p=[];for(let d=0;d<u.length;d+=1)p[d]=zi(Mi(i,u,d));const m=d=>w(p[d],1,1,()=>{p[d]=null});return{c(){e=N("div"),l=N("div"),t=N("div"),n=q("Items with highest score"),a=U(),r=N("div"),P(s.$$.fragment),o=U();for(let d=0;d<p.length;d+=1)p[d].c();this.h()},l(d){e=T(d,"DIV",{class:!0});var _=E(e);l=T(_,"DIV",{class:!0});var h=E(l);t=T(h,"DIV",{});var k=E(t);n=j(k,"Items with highest score"),k.forEach(c),a=Q(h),r=T(h,"DIV",{});var $=E(r);L(s.$$.fragment,$),$.forEach(c),h.forEach(c),o=Q(_);for(let g=0;g<p.length;g+=1)p[g].l(_);_.forEach(c),this.h()},h(){S(l,"class","flex h-8 justify-between text-lg"),S(e,"class","flex flex-col gap-y-4")},m(d,_){D(d,e,_),v(e,l),v(l,t),v(t,n),v(l,a),v(l,r),F(s,r,null),v(e,o);for(let h=0;h<p.length;h+=1)p[h]&&p[h].m(e,null);f=!0},p(d,_){if(_&29){u=d[2].data.rows;let h;for(h=0;h<u.length;h+=1){const k=Mi(d,u,h);p[h]?(p[h].p(k,_),b(p[h],1)):(p[h]=zi(k),p[h].c(),b(p[h],1),p[h].m(e,null))}for(ie(),h=u.length;h<p.length;h+=1)m(h);re()}},i(d){if(!f){b(s.$$.fragment,d);for(let _=0;_<u.length;_+=1)b(p[_]);f=!0}},o(d){w(s.$$.fragment,d),p=p.filter(Boolean);for(let _=0;_<p.length;_+=1)w(p[_]);f=!1},d(d){d&&c(e),R(s),tt(p,d)}}}function ju(i){let e,l;return e=new it({}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p:O,i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function zi(i){let e,l,t,n,a,r,s,o,f,u=Me(i[14])+"",p,m,d;return t=new $s({props:{text:i[13],row:i[12],spanPaths:i[0].spanPaths,spanValueInfos:i[0].spanValueInfos,embeddings:[]}}),{c(){e=N("div"),l=N("div"),P(t.$$.fragment),n=U(),a=N("div"),r=N("div"),s=q("Max score"),o=U(),f=N("div"),p=q(u),m=U(),this.h()},l(_){e=T(_,"DIV",{class:!0});var h=E(e);l=T(h,"DIV",{class:!0});var k=E(l);L(t.$$.fragment,k),k.forEach(c),n=Q(h),a=T(h,"DIV",{class:!0});var $=E(a);r=T($,"DIV",{class:!0});var g=E(r);s=j(g,"Max score"),g.forEach(c),o=Q($),f=T($,"DIV",{class:!0});var y=E(f);p=j(y,u),y.forEach(c),$.forEach(c),m=Q(h),h.forEach(c),this.h()},h(){S(l,"class","flex-grow"),S(r,"class","text-sm text-gray-500"),S(f,"class","text-lg"),S(a,"class","flex flex-none flex-col items-end"),S(e,"class","flex gap-x-4 rounded border border-gray-300 px-4 py-2")},m(_,h){D(_,e,h),v(e,l),F(t,l,null),v(e,n),v(e,a),v(a,r),v(r,s),v(a,o),v(a,f),v(f,p),v(e,m),d=!0},p(_,h){const k={};h&4&&(k.text=_[13]),h&4&&(k.row=_[12]),h&1&&(k.spanPaths=_[0].spanPaths),h&1&&(k.spanValueInfos=_[0].spanValueInfos),t.$set(k),(!d||h&4)&&u!==(u=Me(_[14])+"")&&ae(p,u)},i(_){d||(b(t.$$.fragment,_),d=!0)},o(_){w(t.$$.fragment,_),d=!1},d(_){_&&c(e),R(t)}}}function Uu(i){let e,l,t,n;const a=[ju,qu],r=[];function s(o,f){return o[2].isFetching?0:o[2].data?1:-1}return~(e=s(i))&&(l=r[e]=a[e](i)),{c(){l&&l.c(),t=ce()},l(o){l&&l.l(o),t=ce()},m(o,f){~e&&r[e].m(o,f),D(o,t,f),n=!0},p(o,[f]){let u=e;e=s(o),e===u?~e&&r[e].p(o,f):(l&&(ie(),w(r[u],1,1,()=>{r[u]=null}),re()),~e?(l=r[e],l?l.p(o,f):(l=r[e]=a[e](o),l.c()),b(l,1),l.m(t.parentNode,t)):l=null)},i(o){n||(b(l),n=!0)},o(o){w(l),n=!1},d(o){~e&&r[e].d(o),o&&c(t)}}}const Qu=5;function Yu(i,e,l){let t,n,a,r,s=O,o=()=>(s(),s=Ne(t,$=>l(2,r=$)),t);i.$$.on_destroy.push(()=>s());let{schema:f}=e,{namespace:u}=e,{datasetName:p}=e,{mediaPath:m}=e,{scorePath:d}=e;function _($){return wt.value(Yt($,m),"string")}function h($){const g=d.slice(0,d.length-2),y=Yt($,g);let I=0;for(const V of y){const C=wt.value(Yt(V,["score"]),"float32");I=Math.max(I,C)}return I}function k(){const $=sr(u,p);$.query.sort_by=[d],$.query.sort_order="DESC",$.insightsOpen=!1,ol(rr(u,p,$))}return i.$$set=$=>{"schema"in $&&l(6,f=$.schema),"namespace"in $&&l(7,u=$.namespace),"datasetName"in $&&l(8,p=$.datasetName),"mediaPath"in $&&l(9,m=$.mediaPath),"scorePath"in $&&l(10,d=$.scorePath)},i.$$.update=()=>{i.$$.dirty&1984&&o(l(1,t=wl(u,p,{columns:[m,d],limit:Qu,combine_columns:!0,sort_by:[d]},f))),i.$$.dirty&1088&&l(11,n=[fl(f,d)]),i.$$.dirty&2112&&l(0,a=ls(f,n))},[a,t,r,_,h,k,f,u,p,m,d,n]}class Gu extends $e{constructor(e){super(),Ee(this,e,Yu,Uu,ke,{schema:6,namespace:7,datasetName:8,mediaPath:9,scorePath:10})}}function Wu(i){let e,l;return e=new it({props:{lines:1,width:"200px"}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p:O,i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Ju(i){let e,l;return{c(){e=N("div"),l=q(i[9]),this.h()},l(t){e=T(t,"DIV",{class:!0});var n=E(e);l=j(n,i[9]),n.forEach(c),this.h()},h(){S(e,"class","text-sm text-gray-500")},m(t,n){D(t,e,n),v(e,l)},p(t,n){n&512&&ae(l,t[9])},i:O,o:O,d(t){t&&c(e)}}}function Ku(i){let e,l=i[7].toFixed(2)+"",t,n,a=Me(i[3])+"",r,s;return{c(){e=N("div"),t=q(l),n=q("% ("),r=q(a),s=q(" items)"),this.h()},l(o){e=T(o,"DIV",{class:!0});var f=E(e);t=j(f,l),n=j(f,"% ("),r=j(f,a),s=j(f," items)"),f.forEach(c),this.h()},h(){S(e,"class","text-lg font-bold")},m(o,f){D(o,e,f),v(e,t),v(e,n),v(e,r),v(e,s)},p(o,f){f&128&&l!==(l=o[7].toFixed(2)+"")&&ae(t,l),f&8&&a!==(a=Me(o[3])+"")&&ae(r,a)},i:O,o:O,d(o){o&&c(e)}}}function Zu(i){let e,l;return e=new it({props:{lines:1,width:"200px"}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p:O,i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Xu(i){let e,l,t,n,a=i[13].namespace+"",r,s,o=i[13].concept_name+"",f,u,p,m,d,_,h,k,$,g,y,I;const V=[Ju,Wu],C=[];function M(G,W){return G[9]?0:1}m=M(i),d=C[m]=V[m](i);const A=[Zu,Ku],H=[];function J(G,W){return G[6].isFetching?0:1}return k=J(i),$=H[k]=A[k](i),{c(){e=N("div"),l=N("div"),t=N("div"),n=N("span"),r=q(a),s=q(" / "),f=q(o),p=U(),d.c(),_=U(),h=N("div"),$.c(),this.h()},l(G){e=T(G,"DIV",{slot:!0,class:!0});var W=E(e);l=T(W,"DIV",{class:!0});var te=E(l);t=T(te,"DIV",{class:!0});var z=E(t);n=T(z,"SPAN",{});var B=E(n);r=j(B,a),s=j(B," / "),f=j(B,o),B.forEach(c),z.forEach(c),p=Q(te),d.l(te),te.forEach(c),_=Q(W),h=T(W,"DIV",{class:!0});var K=E(h);$.l(K),K.forEach(c),W.forEach(c),this.h()},h(){S(t,"class","text-lg"),S(l,"class","w-full flex-grow"),S(h,"class","flex-none"),S(e,"slot","above"),S(e,"class","flex w-full items-center")},m(G,W){D(G,e,W),v(e,l),v(l,t),v(t,n),v(n,r),v(n,s),v(n,f),v(l,p),C[m].m(l,null),v(e,_),v(e,h),H[k].m(h,null),g=!0,y||(I=He(u=Le.call(null,n,{text:`version: ${i[8]}`})),y=!0)},p(G,W){u&&et(u.update)&&W&256&&u.update.call(null,{text:`version: ${G[8]}`});let te=m;m=M(G),m===te?C[m].p(G,W):(ie(),w(C[te],1,1,()=>{C[te]=null}),re(),d=C[m],d?d.p(G,W):(d=C[m]=V[m](G),d.c()),b(d,1),d.m(l,null));let z=k;k=J(G),k===z?H[k].p(G,W):(ie(),w(H[z],1,1,()=>{H[z]=null}),re(),$=H[k],$?$.p(G,W):($=H[k]=A[k](G),$.c()),b($,1),$.m(h,null))},i(G){g||(b(d),b($),g=!0)},o(G){w(d),w($),g=!1},d(G){G&&c(e),C[m].d(),H[k].d(),y=!1,I()}}}function xu(i){let e,l;return e=new it({}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p:O,i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function ec(i){let e,l;return e=new Gu({props:{schema:i[0],namespace:i[1],datasetName:i[2],mediaPath:i[12],scorePath:i[4]}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const a={};n&1&&(a.schema=t[0]),n&2&&(a.namespace=t[1]),n&4&&(a.datasetName=t[2]),n&4096&&(a.mediaPath=t[12]),n&16&&(a.scorePath=t[4]),e.$set(a)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function tc(i){let e,l,t,n;const a=[ec,xu],r=[];function s(o,f){return o[5].data?0:1}return l=s(i),t=r[l]=a[l](i),{c(){e=N("div"),t.c(),this.h()},l(o){e=T(o,"DIV",{slot:!0});var f=E(e);t.l(f),f.forEach(c),this.h()},h(){S(e,"slot","below")},m(o,f){D(o,e,f),r[l].m(e,null),n=!0},p(o,f){let u=l;l=s(o),l===u?r[l].p(o,f):(ie(),w(r[u],1,1,()=>{r[u]=null}),re(),t=r[l],t?t.p(o,f):(t=r[l]=a[l](o),t.c()),b(t,1),t.m(e,null))},i(o){n||(b(t),n=!0)},o(o){w(t),n=!1},d(o){o&&c(e),r[l].d()}}}function lc(i){let e,l;return e=new Vs({props:{$$slots:{below:[tc],above:[Xu]},$$scope:{ctx:i}}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,[n]){const a={};n&70655&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}const nc="In concept",ic="Not in concept";function rc(i,e,l){let t,n,a,r,s,o,f,u,p,m,d=O,_=()=>(d(),d=Ne(r,M=>l(5,m=M)),r),h,k=O,$=()=>(k(),k=Ne(a,M=>l(6,h=M)),a);i.$$.on_destroy.push(()=>d()),i.$$.on_destroy.push(()=>k());let{field:g}=e,{schema:y}=e,{namespace:I}=e,{datasetName:V}=e,C=g.signal;return i.$$set=M=>{"field"in M&&l(14,g=M.field),"schema"in M&&l(0,y=M.schema),"namespace"in M&&l(1,I=M.namespace),"datasetName"in M&&l(2,V=M.datasetName)},i.$$.update=()=>{var M,A,H,J,G,W,te;i.$$.dirty&16384&&l(4,t=[...g.path,At,"score"]),i.$$.dirty&16384&&l(12,n=g.parent.path),i.$$.dirty&22&&$(l(11,a=cl(I,V,{leaf_path:t}))),i.$$.dirty&32&&l(9,s=(A=(M=m.data)==null?void 0:M.metadata)==null?void 0:A.description),i.$$.dirty&64&&l(15,o=((J=(H=h.data)==null?void 0:H.counts.find(([z,B])=>z===ic))==null?void 0:J[1])||0),i.$$.dirty&64&&l(3,f=((W=(G=h.data)==null?void 0:G.counts.find(([z,B])=>z===nc))==null?void 0:W[1])||0),i.$$.dirty&32&&l(8,u=(te=m.data)==null?void 0:te.version),i.$$.dirty&32776&&l(7,p=f/(f+o)*100)},_(l(10,r=Ji(C.namespace,C.concept_name))),[y,I,V,f,t,m,h,p,u,s,r,a,n,C,g,o]}class sc extends $e{constructor(e){super(),Ee(this,e,rc,lc,ke,{field:14,schema:0,namespace:1,datasetName:2})}}function Ai(i,e,l){const t=i.slice();return t[9]=e[l],t}function ac(i){let e,l;return e=new it({props:{paragraph:!0,lines:2,width:"200px"}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p:O,i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function oc(i){let e,l=Me(i[5])+"",t,n,a,r,s,o;return{c(){e=N("div"),t=q(l),n=q(" items"),a=U(),r=N("div"),s=q(i[6]),o=q(" chars on average")},l(f){e=T(f,"DIV",{});var u=E(e);t=j(u,l),n=j(u," items"),u.forEach(c),a=Q(f),r=T(f,"DIV",{});var p=E(r);s=j(p,i[6]),o=j(p," chars on average"),p.forEach(c)},m(f,u){D(f,e,u),v(e,t),v(e,n),D(f,a,u),D(f,r,u),v(r,s),v(r,o)},p(f,u){u&32&&l!==(l=Me(f[5])+"")&&ae(t,l),u&64&&ae(s,f[6])},i:O,o:O,d(f){f&&c(e),f&&c(a),f&&c(r)}}}function Bi(i){let e,l;return e=new sc({props:{schema:i[2],namespace:i[3],datasetName:i[4],field:i[9]}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const a={};n&4&&(a.schema=t[2]),n&8&&(a.namespace=t[3]),n&16&&(a.datasetName=t[4]),n&1&&(a.field=t[9]),e.$set(a)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function fc(i){let e,l,t,n,a,r,s,o,f,u;const p=[oc,ac],m=[];function d($,g){return $[5]&&$[6]?0:1}s=d(i),o=m[s]=p[s](i);let _=i[0],h=[];for(let $=0;$<_.length;$+=1)h[$]=Bi(Ai(i,_,$));const k=$=>w(h[$],1,1,()=>{h[$]=null});return{c(){e=N("div"),l=N("div"),t=N("div"),n=q(i[1]),a=U(),r=N("div"),o.c(),f=U();for(let $=0;$<h.length;$+=1)h[$].c();this.h()},l($){e=T($,"DIV",{class:!0});var g=E(e);l=T(g,"DIV",{class:!0});var y=E(l);t=T(y,"DIV",{class:!0});var I=E(t);n=j(I,i[1]),I.forEach(c),a=Q(y),r=T(y,"DIV",{class:!0});var V=E(r);o.l(V),V.forEach(c),y.forEach(c),f=Q(g);for(let C=0;C<h.length;C+=1)h[C].l(g);g.forEach(c),this.h()},h(){S(t,"class","flex-grow text-2xl font-semibold text-slate-900"),S(r,"class","flex-none text-sm text-gray-500"),S(l,"class","sticky top-0 flex rounded-xl border border-gray-300 bg-slate-50/80 px-4 py-3 backdrop-blur-sm"),S(e,"class","relative flex flex-col gap-y-4")},m($,g){D($,e,g),v(e,l),v(l,t),v(t,n),v(l,a),v(l,r),m[s].m(r,null),v(e,f);for(let y=0;y<h.length;y+=1)h[y]&&h[y].m(e,null);u=!0},p($,[g]){(!u||g&2)&&ae(n,$[1]);let y=s;if(s=d($),s===y?m[s].p($,g):(ie(),w(m[y],1,1,()=>{m[y]=null}),re(),o=m[s],o?o.p($,g):(o=m[s]=p[s]($),o.c()),b(o,1),o.m(r,null)),g&29){_=$[0];let I;for(I=0;I<_.length;I+=1){const V=Ai($,_,I);h[I]?(h[I].p(V,g),b(h[I],1)):(h[I]=Bi(V),h[I].c(),b(h[I],1),h[I].m(e,null))}for(ie(),I=_.length;I<h.length;I+=1)k(I);re()}},i($){if(!u){b(o);for(let g=0;g<_.length;g+=1)b(h[g]);u=!0}},o($){w(o),h=h.filter(Boolean);for(let g=0;g<h.length;g+=1)w(h[g]);u=!1},d($){$&&c(e),m[s].d(),tt(h,$)}}}function uc(i,e,l){let t,n,a,r,s=O,o=()=>(s(),s=Ne(t,_=>l(8,r=_)),t);i.$$.on_destroy.push(()=>s());let{concepts:f}=e,{mediaPath:u}=e,{schema:p}=e,{namespace:m}=e,{datasetName:d}=e;return i.$$set=_=>{"concepts"in _&&l(0,f=_.concepts),"mediaPath"in _&&l(1,u=_.mediaPath),"schema"in _&&l(2,p=_.schema),"namespace"in _&&l(3,m=_.namespace),"datasetName"in _&&l(4,d=_.datasetName)},i.$$.update=()=>{var _,h;i.$$.dirty&26&&o(l(7,t=nr(m,d,{leaf_path:u}))),i.$$.dirty&256&&l(6,n=(_=r.data)==null?void 0:_.avg_text_length),i.$$.dirty&256&&l(5,a=(h=r.data)==null?void 0:h.total_count)},[f,u,p,m,d,a,n,t,r]}class cc extends $e{constructor(e){super(),Ee(this,e,uc,fc,ke,{concepts:0,mediaPath:1,schema:2,namespace:3,datasetName:4})}}function Pi(i,e,l){const t=i.slice();t[8]=e[l];const n=t[5](t[8]);return t[9]=n,t}function Fi(i){let e,l;return e=new cc({props:{mediaPath:i[8],schema:i[0],namespace:i[1],datasetName:i[2],concepts:i[9]}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const a={};n&8&&(a.mediaPath=t[8]),n&1&&(a.schema=t[0]),n&2&&(a.namespace=t[1]),n&4&&(a.datasetName=t[2]),n&8&&(a.concepts=t[9]),e.$set(a)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function dc(i){let e,l,t=i[3],n=[];for(let r=0;r<t.length;r+=1)n[r]=Fi(Pi(i,t,r));const a=r=>w(n[r],1,1,()=>{n[r]=null});return{c(){e=N("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=T(r,"DIV",{class:!0});var s=E(e);for(let o=0;o<n.length;o+=1)n[o].l(s);s.forEach(c),this.h()},h(){S(e,"class","flex flex-col gap-y-6")},m(r,s){D(r,e,s);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);l=!0},p(r,[s]){if(s&47){t=r[3];let o;for(o=0;o<t.length;o+=1){const f=Pi(r,t,o);n[o]?(n[o].p(f,s),b(n[o],1)):(n[o]=Fi(f),n[o].c(),b(n[o],1),n[o].m(e,null))}for(ie(),o=t.length;o<n.length;o+=1)a(o);re()}},i(r){if(!l){for(let s=0;s<t.length;s+=1)b(n[s]);l=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)w(n[s]);l=!1},d(r){r&&c(e),tt(n,r)}}}function mc(i,e,l){let t,n,a,r,s=O,o=()=>(s(),s=Ne(n,d=>l(6,r=d)),n);i.$$.on_destroy.push(()=>s());let{schema:f}=e,{namespace:u}=e,{datasetName:p}=e;function m(d){return t.filter(_=>tr(_.path,d))}return i.$$set=d=>{"schema"in d&&l(0,f=d.schema),"namespace"in d&&l(1,u=d.namespace),"datasetName"in d&&l(2,p=d.datasetName)},i.$$.update=()=>{var d,_;i.$$.dirty&1&&(t=bt(f).filter(h=>{var k;return((k=h.signal)==null?void 0:k.signal_name)=="concept_score"})),i.$$.dirty&6&&o(l(4,n=Tt(u,p))),i.$$.dirty&64&&l(3,a=(((_=(d=r.data)==null?void 0:d.ui)==null?void 0:_.media_paths)||[]).map(h=>Array.isArray(h)?h:[h]))},[f,u,p,a,n,m,r]}class _c extends $e{constructor(e){super(),Ee(this,e,mc,dc,ke,{schema:0,namespace:1,datasetName:2})}}function hc(i){let e,l;return e=new Ou({}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function pc(i){let e,l;return e=new Lo({}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Ri(i){let e,l,t,n,a,r,s,o;function f(d){i[27](d)}let u={namespace:i[0],name:i[1]};i[4]!==void 0&&(u.open=i[4]),e=new eu({props:u}),Ue.push(()=>Xe(e,"open",f));function p(d){i[28](d)}let m={schema:i[14].data};return i[5]!==void 0&&(m.open=i[5]),n=new Du({props:m}),Ue.push(()=>Xe(n,"open",p)),s=new pl({props:{size:"lg",open:i[3].insightsOpen,$$slots:{default:[bc]},$$scope:{ctx:i}}}),s.$on("close",i[29]),s.$on("submit",i[30]),{c(){P(e.$$.fragment),t=U(),P(n.$$.fragment),r=U(),P(s.$$.fragment)},l(d){L(e.$$.fragment,d),t=Q(d),L(n.$$.fragment,d),r=Q(d),L(s.$$.fragment,d)},m(d,_){F(e,d,_),D(d,t,_),F(n,d,_),D(d,r,_),F(s,d,_),o=!0},p(d,_){const h={};_[0]&1&&(h.namespace=d[0]),_[0]&2&&(h.name=d[1]),!l&&_[0]&16&&(l=!0,h.open=d[4],xe(()=>l=!1)),e.$set(h);const k={};_[0]&16384&&(k.schema=d[14].data),!a&&_[0]&32&&(a=!0,k.open=d[5],xe(()=>a=!1)),n.$set(k);const $={};_[0]&8&&($.open=d[3].insightsOpen),_[0]&16395|_[1]&8&&($.$$scope={dirty:_,ctx:d}),s.$set($)},i(d){o||(b(e.$$.fragment,d),b(n.$$.fragment,d),b(s.$$.fragment,d),o=!0)},o(d){w(e.$$.fragment,d),w(n.$$.fragment,d),w(s.$$.fragment,d),o=!1},d(d){R(e,d),d&&c(t),R(n,d),d&&c(r),R(s,d)}}}function Hi(i){let e,l;return e=new _c({props:{schema:i[14].data,namespace:i[0],datasetName:i[1]}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const a={};n[0]&16384&&(a.schema=t[14].data),n[0]&1&&(a.namespace=t[0]),n[0]&2&&(a.datasetName=t[1]),e.$set(a)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function gc(i){let e,l,t=i[3].insightsOpen&&Hi(i);return{c(){t&&t.c(),e=ce()},l(n){t&&t.l(n),e=ce()},m(n,a){t&&t.m(n,a),D(n,e,a),l=!0},p(n,a){n[3].insightsOpen?t?(t.p(n,a),a[0]&8&&b(t,1)):(t=Hi(n),t.c(),b(t,1),t.m(e.parentNode,e)):t&&(ie(),w(t,1,1,()=>{t=null}),re())},i(n){l||(b(t),l=!0)},o(n){w(t),l=!1},d(n){t&&t.d(n),n&&c(e)}}}function bc(i){let e,l,t,n,a,r;return e=new gl({props:{title:"Insights"}}),t=new bl({props:{$$slots:{default:[gc]},$$scope:{ctx:i}}}),a=new vl({props:{primaryButtonText:"Close"}}),{c(){P(e.$$.fragment),l=U(),P(t.$$.fragment),n=U(),P(a.$$.fragment)},l(s){L(e.$$.fragment,s),l=Q(s),L(t.$$.fragment,s),n=Q(s),L(a.$$.fragment,s)},m(s,o){F(e,s,o),D(s,l,o),F(t,s,o),D(s,n,o),F(a,s,o),r=!0},p(s,o){const f={};o[0]&16395|o[1]&8&&(f.$$scope={dirty:o,ctx:s}),t.$set(f)},i(s){r||(b(e.$$.fragment,s),b(t.$$.fragment,s),b(a.$$.fragment,s),r=!0)},o(s){w(e.$$.fragment,s),w(t.$$.fragment,s),w(a.$$.fragment,s),r=!1},d(s){R(e,s),s&&c(l),R(t,s),s&&c(n),R(a,s)}}}function Li(i){let e,l;return e=new kl({props:{open:!0,modalHeading:"Dataset config",primaryButtonText:"Ok",secondaryButtonText:"Cancel",$$slots:{default:[kc]},$$scope:{ctx:i}}}),e.$on("click:button--secondary",i[31]),e.$on("close",i[32]),e.$on("submit",i[33]),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const a={};n[0]&32768|n[1]&8&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function vc(i){let e,l;return e=new cr({props:{value:`${i[15].data}`,readonly:!0,rows:15,placeholder:"3 rows of data for previewing the response",class:"mb-2 font-mono"}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const a={};n[0]&32768&&(a.value=`${t[15].data}`),e.$set(a)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function wc(i){let e,l;return e=new it({}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p:O,i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function kc(i){let e,l,t,n,a,r,s,o,f,u;const p=[wc,vc],m=[];function d(_,h){var k,$;return(k=_[15])!=null&&k.isFetching?0:($=_[15])!=null&&$.data?1:-1}return~(s=d(i))&&(o=m[s]=p[s](i)),{c(){e=N("div"),l=q(`This dataset configuration represents the transformations that created the dataset,
        including signals, embeddings, and user settings. This can be used with lilac.load to
        generate the dataset with the same view as presented.`),t=U(),n=N("div"),a=q("config.yml"),r=U(),o&&o.c(),f=ce(),this.h()},l(_){e=T(_,"DIV",{class:!0});var h=E(e);l=j(h,`This dataset configuration represents the transformations that created the dataset,
        including signals, embeddings, and user settings. This can be used with lilac.load to
        generate the dataset with the same view as presented.`),h.forEach(c),t=Q(_),n=T(_,"DIV",{class:!0});var k=E(n);a=j(k,"config.yml"),k.forEach(c),r=Q(_),o&&o.l(_),f=ce(),this.h()},h(){S(e,"class","mb-4 text-sm"),S(n,"class","font-mono text-xs")},m(_,h){D(_,e,h),v(e,l),D(_,t,h),D(_,n,h),v(n,a),D(_,r,h),~s&&m[s].m(_,h),D(_,f,h),u=!0},p(_,h){let k=s;s=d(_),s===k?~s&&m[s].p(_,h):(o&&(ie(),w(m[k],1,1,()=>{m[k]=null}),re()),~s?(o=m[s],o?o.p(_,h):(o=m[s]=p[s](_),o.c()),b(o,1),o.m(f.parentNode,f)):o=null)},i(_){u||(b(o),u=!0)},o(_){w(o),u=!1},d(_){_&&c(e),_&&c(t),_&&c(n),_&&c(r),~s&&m[s].d(_),_&&c(f)}}}function $c(i){let e,l,t,n,a,r,s,o,f,u,p,m;t=new Uf({});const d=[pc,hc],_=[];function h(g,y){return g[12]=="scroll"?0:g[12]=="single_item"?1:-1}~(s=h(i))&&(o=_[s]=d[s](i));let k=i[14].data&&Ri(i),$=i[2]&&Li(i);return{c(){e=N("div"),l=N("div"),P(t.$$.fragment),a=U(),r=N("div"),o&&o.c(),f=U(),k&&k.c(),u=U(),$&&$.c(),p=ce(),this.h()},l(g){e=T(g,"DIV",{class:!0});var y=E(e);l=T(y,"DIV",{class:!0});var I=E(l);L(t.$$.fragment,I),I.forEach(c),a=Q(y),r=T(y,"DIV",{class:!0});var V=E(r);o&&o.l(V),V.forEach(c),y.forEach(c),f=Q(g),k&&k.l(g),u=Q(g),$&&$.l(g),p=ce(),this.h()},h(){S(l,"class",n=Dl(`schema-container relative h-full ${i[11]?"w-0":"w-1/3"} border-r border-gray-200`)+" svelte-1xlsh2v"),S(r,"class","h-full w-2/3 flex-grow"),S(e,"class","flex h-full w-full")},m(g,y){D(g,e,y),v(e,l),F(t,l,null),v(e,a),v(e,r),~s&&_[s].m(r,null),D(g,f,y),k&&k.m(g,y),D(g,u,y),$&&$.m(g,y),D(g,p,y),m=!0},p(g,y){(!m||y[0]&2048&&n!==(n=Dl(`schema-container relative h-full ${g[11]?"w-0":"w-1/3"} border-r border-gray-200`)+" svelte-1xlsh2v"))&&S(l,"class",n);let I=s;s=h(g),s!==I&&(o&&(ie(),w(_[I],1,1,()=>{_[I]=null}),re()),~s?(o=_[s],o||(o=_[s]=d[s](g),o.c()),b(o,1),o.m(r,null)):o=null),g[14].data?k?(k.p(g,y),y[0]&16384&&b(k,1)):(k=Ri(g),k.c(),b(k,1),k.m(u.parentNode,u)):k&&(ie(),w(k,1,1,()=>{k=null}),re()),g[2]?$?($.p(g,y),y[0]&4&&b($,1)):($=Li(g),$.c(),b($,1),$.m(p.parentNode,p)):$&&(ie(),w($,1,1,()=>{$=null}),re())},i(g){m||(b(t.$$.fragment,g),b(o),b(k),b($),m=!0)},o(g){w(t.$$.fragment,g),w(o),w(k),w($),m=!1},d(g){g&&c(e),R(t),~s&&_[s].d(),g&&c(f),k&&k.d(g),g&&c(u),$&&$.d(g),g&&c(p)}}}function Ec(i){let e,l,t=i[3].namespace+"",n,a,r=i[3].datasetName+"",s,o,f;return{c(){e=N("div"),l=N("a"),n=q(t),a=q("/"),s=q(r),this.h()},l(u){e=T(u,"DIV",{class:!0});var p=E(e);l=T(p,"A",{class:!0,href:!0});var m=E(l);n=j(m,t),a=j(m,"/"),s=j(m,r),m.forEach(c),p.forEach(c),this.h()},h(){S(l,"class","font-semibold text-black"),S(l,"href",i[8]),S(e,"class","dataset-name svelte-1xlsh2v")},m(u,p){D(u,e,p),v(e,l),v(l,n),v(l,a),v(l,s),o||(f=Pe(l,"click",i[24]),o=!0)},p(u,p){p[0]&8&&t!==(t=u[3].namespace+"")&&ae(n,t),p[0]&8&&r!==(r=u[3].datasetName+"")&&ae(s,r),p[0]&256&&S(l,"href",u[8])},d(u){u&&c(e),o=!1,f()}}}function yc(i){let e,l,t,n,a,r,s,o,f,u,p,m,d,_,h;return t=new fa({}),r=new mt({props:{type:"outline",$$slots:{default:[Ec]},$$scope:{ctx:i}}}),f=new Bt({}),m=new Xs({}),{c(){e=N("div"),l=N("button"),P(t.$$.fragment),a=U(),P(r.$$.fragment),s=U(),o=N("button"),P(f.$$.fragment),u=U(),p=N("button"),P(m.$$.fragment),this.h()},l(k){e=T(k,"DIV",{slot:!0,class:!0});var $=E(e);l=T($,"BUTTON",{class:!0});var g=E(l);L(t.$$.fragment,g),g.forEach(c),a=Q($),L(r.$$.fragment,$),s=Q($),o=T($,"BUTTON",{});var y=E(o);L(f.$$.fragment,y),y.forEach(c),u=Q($),p=T($,"BUTTON",{});var I=E(p);L(m.$$.fragment,I),I.forEach(c),$.forEach(c),this.h()},h(){S(l,"class","mr-2"),se(l,"bg-blue-100",!i[11]),se(l,"outline-blue-400",!i[11]),se(l,"outline",!i[11]),S(e,"slot","header-subtext"),S(e,"class","flex flex-row items-center gap-x-1")},m(k,$){D(k,e,$),v(e,l),F(t,l,null),v(e,a),F(r,e,null),v(e,s),v(e,o),F(f,o,null),v(e,u),v(e,p),F(m,p,null),d=!0,_||(h=[He(n=Le.call(null,l,{text:i[11]?"Show Schema":"Hide Schema"})),Pe(l,"click",i[17]),Pe(l,"keypress",i[17]),Pe(o,"click",i[25]),He(Le.call(null,o,{text:"Dataset information"})),He(Le.call(null,p,{text:"Dataset insights"})),Pe(p,"click",i[26])],_=!0)},p(k,$){n&&et(n.update)&&$[0]&2048&&n.update.call(null,{text:k[11]?"Show Schema":"Hide Schema"}),(!d||$[0]&2048)&&se(l,"bg-blue-100",!k[11]),(!d||$[0]&2048)&&se(l,"outline-blue-400",!k[11]),(!d||$[0]&2048)&&se(l,"outline",!k[11]);const g={};$[0]&264|$[1]&8&&(g.$$scope={dirty:$,ctx:k}),r.$set(g)},i(k){d||(b(t.$$.fragment,k),b(r.$$.fragment,k),b(f.$$.fragment,k),b(m.$$.fragment,k),d=!0)},o(k){w(t.$$.fragment,k),w(r.$$.fragment,k),w(f.$$.fragment,k),w(m.$$.fragment,k),d=!1},d(k){k&&c(e),R(t),R(r),R(f),R(m),_=!1,dt(h)}}}function Ic(i){let e,l,t;return l=new rf({}),{c(){e=N("div"),P(l.$$.fragment),this.h()},l(n){e=T(n,"DIV",{slot:!0,class:!0});var a=E(e);L(l.$$.fragment,a),a.forEach(c),this.h()},h(){S(e,"slot","header-center"),S(e,"class","flex w-full items-center")},m(n,a){D(n,e,a),F(l,e,null),t=!0},p:O,i(n){t||(b(l.$$.fragment,n),t=!0)},o(n){w(l.$$.fragment,n),t=!1},d(n){n&&c(e),R(l)}}}function Oi(i){let e,l,t,n;return{c(){e=N("div"),l=q("Copied!"),this.h()},l(a){e=T(a,"DIV",{class:!0});var r=E(e);l=j(r,"Copied!"),r.forEach(c),this.h()},h(){S(e,"class","absolute right-12 z-50 mt-2 rounded border border-neutral-300 bg-neutral-50 px-4 py-1 text-xs")},m(a,r){D(a,e,r),v(e,l),n=!0},i(a){n||(t&&t.end(1),n=!0)},o(a){t=Ir(e,Ss,{}),n=!1},d(a){a&&c(e),a&&t&&t.end()}}}function Sc(i){let e,l,t,n,a,r,s,o,f,u,p,m,d,_,h,k,$,g,y,I=i[6]&&Oi();return s=new _s({}),u=new js({}),_=new Ds({}),{c(){e=N("div"),l=N("div"),t=N("div"),n=N("div"),I&&I.c(),a=U(),r=N("button"),P(s.$$.fragment),o=U(),f=N("button"),P(u.$$.fragment),p=U(),m=N("div"),d=N("button"),P(_.$$.fragment),this.h()},l(V){e=T(V,"DIV",{slot:!0});var C=E(e);l=T(C,"DIV",{class:!0});var M=E(l);t=T(M,"DIV",{class:!0});var A=E(t);n=T(A,"DIV",{class:!0});var H=E(n);I&&I.l(H),a=Q(H),r=T(H,"BUTTON",{});var J=E(r);L(s.$$.fragment,J),J.forEach(c),H.forEach(c),o=Q(A),f=T(A,"BUTTON",{});var G=E(f);L(u.$$.fragment,G),G.forEach(c),p=Q(A),m=T(A,"DIV",{class:!0});var W=E(m);d=T(W,"BUTTON",{});var te=E(d);L(_.$$.fragment,te),te.forEach(c),W.forEach(c),A.forEach(c),M.forEach(c),C.forEach(c),this.h()},h(){S(n,"class","relative"),d.disabled=h=!i[9],S(m,"class","mr-2"),se(m,"opacity-40",!i[9]),S(t,"class","flex"),S(l,"class","flex h-full flex-col"),S(e,"slot","header-right")},m(V,C){D(V,e,C),v(e,l),v(l,t),v(t,n),I&&I.m(n,null),v(n,a),v(n,r),F(s,r,null),v(t,o),v(t,f),F(u,f,null),v(t,p),v(t,m),v(m,d),F(_,d,null),$=!0,g||(y=[He(Le.call(null,r,{text:"Copy the URL"})),Pe(r,"click",i[21]),He(Le.call(null,f,{text:"Export data"})),Pe(f,"click",i[22]),He(Le.call(null,d,{text:"Dataset settings"})),Pe(d,"click",i[23]),He(k=Le.call(null,m,{text:i[9]?"":"User does not have access to update settings of this dataset."}))],g=!0)},p(V,C){V[6]?I?C[0]&64&&b(I,1):(I=Oi(),I.c(),b(I,1),I.m(n,a)):I&&(ie(),w(I,1,1,()=>{I=null}),re()),(!$||C[0]&512&&h!==(h=!V[9]))&&(d.disabled=h),k&&et(k.update)&&C[0]&512&&k.update.call(null,{text:V[9]?"":"User does not have access to update settings of this dataset."}),(!$||C[0]&512)&&se(m,"opacity-40",!V[9])},i(V){$||(b(I),b(s.$$.fragment,V),b(u.$$.fragment,V),b(_.$$.fragment,V),$=!0)},o(V){w(I),w(s.$$.fragment,V),w(u.$$.fragment,V),w(_.$$.fragment,V),$=!1},d(V){V&&c(e),I&&I.d(),R(s),R(u),R(_),g=!1,dt(y)}}}function Dc(i){let e,l;return e=new Dr({props:{$$slots:{"header-right":[Sc],"header-center":[Ic],"header-subtext":[yc],default:[$c]},$$scope:{ctx:i}}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const a={};n[0]&56191|n[1]&8&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Nc(i,e,l){let t,n,a,r,s,o,f,u,p,m,d=O,_=()=>(d(),d=Ne(t,Y=>l(20,m=Y)),t),h,k=O,$=()=>(k(),k=Ne(r,Y=>l(14,h=Y)),r),g,y=O,I=()=>(y(),y=Ne(f,Y=>l(15,g=Y)),f);i.$$.on_destroy.push(()=>d()),i.$$.on_destroy.push(()=>k()),i.$$.on_destroy.push(()=>y());let{namespace:V}=e,{datasetName:C}=e;const M=lt();Ae(i,M,Y=>l(3,p=Y));function A(){il(M,p.schemaCollapsed=!p.schemaCollapsed,p)}let H=!1,J=!1;const G=xt();Ae(i,G,Y=>l(19,u=Y));let W=!1,te=!1;const z=()=>navigator.clipboard.writeText(location.href).then(()=>{l(6,W=!0),setTimeout(()=>l(6,W=!1),2e3)},()=>{throw Error("Error copying link to clipboard.")}),B=()=>l(5,J=!0),K=()=>l(4,H=!0),x=()=>ol(o),ee=()=>l(2,te=!0),_e=()=>M.setInsightsOpen(!0);function he(Y){H=Y,l(4,H)}function ne(Y){J=Y,l(5,J)}const ze=()=>M.setInsightsOpen(!1),le=()=>M.setInsightsOpen(!1),fe=()=>l(2,te=!1),De=()=>l(2,te=!1),X=()=>l(2,te=!1);return i.$$set=Y=>{"namespace"in Y&&l(0,V=Y.namespace),"datasetName"in Y&&l(1,C=Y.datasetName)},i.$$.update=()=>{var Y,oe,Z;i.$$.dirty[0]&3&&_(l(13,t=Tt(V,C))),i.$$.dirty[0]&1048576&&l(12,n=((oe=(Y=m.data)==null?void 0:Y.ui)==null?void 0:oe.view_type)||"single_item"),i.$$.dirty[0]&8&&l(11,a=p.schemaCollapsed),i.$$.dirty[0]&8&&$(l(10,r=Nt(p.namespace,p.datasetName))),i.$$.dirty[0]&524288&&l(9,s=(Z=u.data)==null?void 0:Z.access.dataset.update_settings),i.$$.dirty[0]&3&&l(8,o=rr(V,C)),i.$$.dirty[0]&7&&I(l(7,f=te?ns(V,C,"yaml"):null))},[V,C,te,p,H,J,W,f,o,s,r,a,n,t,h,g,M,A,G,u,m,z,B,K,x,ee,_e,he,ne,ze,le,fe,De,X]}class Tc extends $e{constructor(e){super(),Ee(this,e,Nc,Dc,ke,{namespace:0,datasetName:1},null,[-1,-1])}}function Vc(i){let e;return{c(){e=q("Page not found! Please specify a dataset.")},l(l){e=j(l,"Page not found! Please specify a dataset.")},m(l,t){D(l,e,t)},p:O,i:O,o:O,d(l){l&&c(e)}}}function Cc(i){let e=i[2],l,t,n=qi(i);return{c(){n.c(),l=ce()},l(a){n.l(a),l=ce()},m(a,r){n.m(a,r),D(a,l,r),t=!0},p(a,r){r&4&&ke(e,e=a[2])?(ie(),w(n,1,1,O),re(),n=qi(a),n.c(),b(n,1),n.m(l.parentNode,l)):n.p(a,r)},i(a){t||(b(n),t=!0)},o(a){w(n),t=!1},d(a){a&&c(l),n.d(a)}}}function qi(i){let e,l;return e=new Tc({props:{namespace:i[0],datasetName:i[1]}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const a={};n&1&&(a.namespace=t[0]),n&2&&(a.datasetName=t[1]),e.$set(a)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Mc(i){let e,l,t,n;const a=[Cc,Vc],r=[];function s(o,f){return o[2]&&o[0]&&o[1]?0:1}return e=s(i),l=r[e]=a[e](i),{c(){l.c(),t=ce()},l(o){l.l(o),t=ce()},m(o,f){r[e].m(o,f),D(o,t,f),n=!0},p(o,[f]){let u=e;e=s(o),e===u?r[e].p(o,f):(ie(),w(r[u],1,1,()=>{r[u]=null}),re(),l=r[e],l?l.p(o,f):(l=r[e]=a[e](o),l.c()),b(l,1),l.m(t.parentNode,t))},i(o){n||(b(l),n=!0)},o(o){w(l),n=!1},d(o){r[e].d(o),o&&c(t)}}}function zc(i,e,l){let t,n,a,r;const s=is();return Ae(i,s,o=>l(4,n=o)),i.$$.update=()=>{if(i.$$.dirty&19&&n.page==="datasets")if(n.identifier==""||n.identifier==null)l(0,a=void 0),l(1,r=void 0);else{const[o,f]=n.identifier.split("/");(a!=o||r!=f)&&(l(0,a=o),l(1,r=f))}if(i.$$.dirty&3&&l(2,t=a&&r?fs(a,r):null),i.$$.dirty&7&&t!=null){const o=sr(a,r);rs("datasets",`${a}/${r}`,t,s,f=>os(f,o),f=>as(f,o))}i.$$.dirty&4&&t!=null&&ss(t)},[a,r,t,s,n]}class Xc extends $e{constructor(e){super(),Ee(this,e,zc,Mc,ke,{})}}export{Xc as component};
