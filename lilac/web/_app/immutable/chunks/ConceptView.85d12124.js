import{S as _e,i as pe,s as ge,D as re,Z as ne,_ as ae,m as v,h as d,n as D,$ as be,b as B,a0 as h,K as ye,a1 as K,M as ve,Q as we,q as O,r as F,u as le,w as Te,U as $e,k as I,y as Y,a as G,l as A,z as U,c as Q,A as q,V as Se,g as C,v as de,f as me,d as z,B as W,a2 as qe,N as Ht,F as Ae,G as Qe,a7 as We,a8 as Ct,L as Mt,a6 as Je,O as ze,ab as Pe,o as Ot,e as Ze,p as xe,af as It}from"./index.6d58eddb.js";import{g as At}from"./navigation.aea35273.js";import{I as Ft,h as je,V as Me,aW as Lt,aX as Zt,B as Ge,aY as Ke,S as Yt,an as zt,aZ as Ut,a_ as qt,a$ as Wt,b0 as jt,aO as Gt,d as Tt,b as Qt,ah as He,ai as Oe,a8 as Fe,b1 as Kt,b2 as $t,aM as et,ab as Xt,aV as St,y as Rt,b3 as Jt,a1 as Pt,a as xt,f as el}from"./Commands.f21feee1.js";import{T as Xe}from"./ToastNotification.0ea457ce.js";import{S as tl,T as yt,a as Bt}from"./StringSpanHighlight.548230dd.js";import{D as Nt,E as Le}from"./DatasetFieldEmbeddingSelector.5b207ebd.js";import{g as ll}from"./settingsStore.3abd8af5.js";import{T as nl}from"./TextArea.b1aacf82.js";import{c as tt}from"./colors.f6cbcb11.js";function lt(a){let e,t;return{c(){e=ne("title"),t=O(a[1])},l(l){e=ae(l,"title",{});var n=v(e);t=F(n,a[1]),n.forEach(d)},m(l,n){B(l,e,n),h(e,t)},p(l,n){n&2&&le(t,l[1])},d(l){l&&d(e)}}}function al(a){let e,t,l,n=a[1]&&lt(a),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:a[0]},{height:a[0]},a[2],a[3]],r={};for(let s=0;s<o.length;s+=1)r=re(r,o[s]);return{c(){e=ne("svg"),n&&n.c(),t=ne("path"),l=ne("path"),this.h()},l(s){e=ae(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=v(e);n&&n.l(i),t=ae(i,"path",{d:!0}),v(t).forEach(d),l=ae(i,"path",{d:!0}),v(l).forEach(d),i.forEach(d),this.h()},h(){D(t,"d","M11,11V21H21V11Zm8,8H13V13h6Z"),D(l,"d","M30,13V11H26V8a2,2,0,0,0-2-2H21V2H19V6H13V2H11V6H8A2,2,0,0,0,6,8v3H2v2H6v6H2v2H6v3a2,2,0,0,0,2,2h3v4h2V26h6v4h2V26h3a2,2,0,0,0,2-2V21h4V19H26V13ZM24,24H8V8H24Z"),be(e,r)},m(s,i){B(s,e,i),n&&n.m(e,null),h(e,t),h(e,l)},p(s,[i]){s[1]?n?n.p(s,i):(n=lt(s),n.c(),n.m(e,t)):n&&(n.d(1),n=null),be(e,r=ye(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:s[0]},i&1&&{height:s[0]},i&4&&s[2],i&8&&s[3]]))},i:K,o:K,d(s){s&&d(e),n&&n.d()}}}function sl(a,e,t){let l,n;const o=["size","title"];let r=ve(e,o),{size:s=16}=e,{title:i=void 0}=e;return a.$$set=c=>{t(5,e=re(re({},e),we(c))),t(3,r=ve(e,o)),"size"in c&&t(0,s=c.size),"title"in c&&t(1,i=c.title)},a.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||i),t(2,n={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=we(e),[s,i,n,r,l]}class nt extends _e{constructor(e){super(),pe(this,e,sl,al,ge,{size:0,title:1})}}function at(a){let e,t;return{c(){e=ne("title"),t=O(a[1])},l(l){e=ae(l,"title",{});var n=v(e);t=F(n,a[1]),n.forEach(d)},m(l,n){B(l,e,n),h(e,t)},p(l,n){n&2&&le(t,l[1])},d(l){l&&d(e)}}}function rl(a){let e,t,l=a[1]&&at(a),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:a[0]},{height:a[0]},a[2],a[3]],o={};for(let r=0;r<n.length;r+=1)o=re(o,n[r]);return{c(){e=ne("svg"),l&&l.c(),t=ne("path"),this.h()},l(r){e=ae(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=v(e);l&&l.l(s),t=ae(s,"path",{d:!0}),v(t).forEach(d),s.forEach(d),this.h()},h(){D(t,"d","M16,2A14,14,0,1,0,30,16,14.0158,14.0158,0,0,0,16,2Zm0,26A12,12,0,0,1,16,4V16l8.4812,8.4814A11.9625,11.9625,0,0,1,16,28Z"),be(e,o)},m(r,s){B(r,e,s),l&&l.m(e,null),h(e,t)},p(r,[s]){r[1]?l?l.p(r,s):(l=at(r),l.c(),l.m(e,t)):l&&(l.d(1),l=null),be(e,o=ye(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:K,o:K,d(r){r&&d(e),l&&l.d()}}}function il(a,e,t){let l,n;const o=["size","title"];let r=ve(e,o),{size:s=16}=e,{title:i=void 0}=e;return a.$$set=c=>{t(5,e=re(re({},e),we(c))),t(3,r=ve(e,o)),"size"in c&&t(0,s=c.size),"title"in c&&t(1,i=c.title)},a.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||i),t(2,n={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=we(e),[s,i,n,r,l]}class Vn extends _e{constructor(e){super(),pe(this,e,il,rl,ge,{size:0,title:1})}}function st(a){let e,t;return{c(){e=ne("title"),t=O(a[1])},l(l){e=ae(l,"title",{});var n=v(e);t=F(n,a[1]),n.forEach(d)},m(l,n){B(l,e,n),h(e,t)},p(l,n){n&2&&le(t,l[1])},d(l){l&&d(e)}}}function ol(a){let e,t,l=a[1]&&st(a),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:a[0]},{height:a[0]},a[2],a[3]],o={};for(let r=0;r<n.length;r+=1)o=re(o,n[r]);return{c(){e=ne("svg"),l&&l.c(),t=ne("path"),this.h()},l(r){e=ae(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=v(e);l&&l.l(s),t=ae(s,"path",{d:!0}),v(t).forEach(d),s.forEach(d),this.h()},h(){D(t,"d","M23,20a5,5,0,0,0-3.89,1.89L11.8,17.32a4.46,4.46,0,0,0,0-2.64l7.31-4.57A5,5,0,1,0,18,7a4.79,4.79,0,0,0,.2,1.32l-7.31,4.57a5,5,0,1,0,0,6.22l7.31,4.57A4.79,4.79,0,0,0,18,25a5,5,0,1,0,5-5ZM23,4a3,3,0,1,1-3,3A3,3,0,0,1,23,4ZM7,19a3,3,0,1,1,3-3A3,3,0,0,1,7,19Zm16,9a3,3,0,1,1,3-3A3,3,0,0,1,23,28Z"),be(e,o)},m(r,s){B(r,e,s),l&&l.m(e,null),h(e,t)},p(r,[s]){r[1]?l?l.p(r,s):(l=st(r),l.c(),l.m(e,t)):l&&(l.d(1),l=null),be(e,o=ye(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:K,o:K,d(r){r&&d(e),l&&l.d()}}}function cl(a,e,t){let l,n;const o=["size","title"];let r=ve(e,o),{size:s=16}=e,{title:i=void 0}=e;return a.$$set=c=>{t(5,e=re(re({},e),we(c))),t(3,r=ve(e,o)),"size"in c&&t(0,s=c.size),"title"in c&&t(1,i=c.title)},a.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||i),t(2,n={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=we(e),[s,i,n,r,l]}class Dn extends _e{constructor(e){super(),pe(this,e,cl,ol,ge,{size:0,title:1})}}function rt(a){let e,t;return{c(){e=ne("title"),t=O(a[1])},l(l){e=ae(l,"title",{});var n=v(e);t=F(n,a[1]),n.forEach(d)},m(l,n){B(l,e,n),h(e,t)},p(l,n){n&2&&le(t,l[1])},d(l){l&&d(e)}}}function fl(a){let e,t,l,n=a[1]&&rt(a),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:a[0]},{height:a[0]},a[2],a[3]],r={};for(let s=0;s<o.length;s+=1)r=re(r,o[s]);return{c(){e=ne("svg"),n&&n.c(),t=ne("path"),l=ne("path"),this.h()},l(s){e=ae(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=v(e);n&&n.l(i),t=ae(i,"path",{d:!0}),v(t).forEach(d),l=ae(i,"path",{d:!0}),v(l).forEach(d),i.forEach(d),this.h()},h(){D(t,"d","M12 12H14V24H12zM18 12H20V24H18z"),D(l,"d","M4 6V8H6V28a2 2 0 002 2H24a2 2 0 002-2V8h2V6zM8 28V8H24V28zM12 2H20V4H12z"),be(e,r)},m(s,i){B(s,e,i),n&&n.m(e,null),h(e,t),h(e,l)},p(s,[i]){s[1]?n?n.p(s,i):(n=rt(s),n.c(),n.m(e,t)):n&&(n.d(1),n=null),be(e,r=ye(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:s[0]},i&1&&{height:s[0]},i&4&&s[2],i&8&&s[3]]))},i:K,o:K,d(s){s&&d(e),n&&n.d()}}}function ul(a,e,t){let l,n;const o=["size","title"];let r=ve(e,o),{size:s=16}=e,{title:i=void 0}=e;return a.$$set=c=>{t(5,e=re(re({},e),we(c))),t(3,r=ve(e,o)),"size"in c&&t(0,s=c.size),"title"in c&&t(1,i=c.title)},a.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||i),t(2,n={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=we(e),[s,i,n,r,l]}class dl extends _e{constructor(e){super(),pe(this,e,ul,fl,ge,{size:0,title:1})}}function it(a){let e,t;return{c(){e=ne("title"),t=O(a[1])},l(l){e=ae(l,"title",{});var n=v(e);t=F(n,a[1]),n.forEach(d)},m(l,n){B(l,e,n),h(e,t)},p(l,n){n&2&&le(t,l[1])},d(l){l&&d(e)}}}function ml(a){let e,t,l,n=a[1]&&it(a),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:a[0]},{height:a[0]},a[2],a[3]],r={};for(let s=0;s<o.length;s+=1)r=re(r,o[s]);return{c(){e=ne("svg"),n&&n.c(),t=ne("path"),l=ne("path"),this.h()},l(s){e=ae(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=v(e);n&&n.l(i),t=ae(i,"path",{d:!0}),v(t).forEach(d),l=ae(i,"path",{d:!0}),v(l).forEach(d),i.forEach(d),this.h()},h(){D(t,"d","M30.94,15.66A16.69,16.69,0,0,0,16,5,16.69,16.69,0,0,0,1.06,15.66a1,1,0,0,0,0,.68A16.69,16.69,0,0,0,16,27,16.69,16.69,0,0,0,30.94,16.34,1,1,0,0,0,30.94,15.66ZM16,25c-5.3,0-10.9-3.93-12.93-9C5.1,10.93,10.7,7,16,7s10.9,3.93,12.93,9C26.9,21.07,21.3,25,16,25Z"),D(l,"d","M16,10a6,6,0,1,0,6,6A6,6,0,0,0,16,10Zm0,10a4,4,0,1,1,4-4A4,4,0,0,1,16,20Z"),be(e,r)},m(s,i){B(s,e,i),n&&n.m(e,null),h(e,t),h(e,l)},p(s,[i]){s[1]?n?n.p(s,i):(n=it(s),n.c(),n.m(e,t)):n&&(n.d(1),n=null),be(e,r=ye(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:s[0]},i&1&&{height:s[0]},i&4&&s[2],i&8&&s[3]]))},i:K,o:K,d(s){s&&d(e),n&&n.d()}}}function hl(a,e,t){let l,n;const o=["size","title"];let r=ve(e,o),{size:s=16}=e,{title:i=void 0}=e;return a.$$set=c=>{t(5,e=re(re({},e),we(c))),t(3,r=ve(e,o)),"size"in c&&t(0,s=c.size),"title"in c&&t(1,i=c.title)},a.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||i),t(2,n={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=we(e),[s,i,n,r,l]}class _l extends _e{constructor(e){super(),pe(this,e,hl,ml,ge,{size:0,title:1})}}function ot(a){let e,t;return{c(){e=ne("title"),t=O(a[1])},l(l){e=ae(l,"title",{});var n=v(e);t=F(n,a[1]),n.forEach(d)},m(l,n){B(l,e,n),h(e,t)},p(l,n){n&2&&le(t,l[1])},d(l){l&&d(e)}}}function pl(a){let e,t,l,n=a[1]&&ot(a),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:a[0]},{height:a[0]},a[2],a[3]],r={};for(let s=0;s<o.length;s+=1)r=re(r,o[s]);return{c(){e=ne("svg"),n&&n.c(),t=ne("path"),l=ne("path"),this.h()},l(s){e=ae(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=v(e);n&&n.l(i),t=ae(i,"path",{d:!0}),v(t).forEach(d),l=ae(i,"path",{d:!0}),v(l).forEach(d),i.forEach(d),this.h()},h(){D(t,"d","M5.24,22.51l1.43-1.42A14.06,14.06,0,0,1,3.07,16C5.1,10.93,10.7,7,16,7a12.38,12.38,0,0,1,4,.72l1.55-1.56A14.72,14.72,0,0,0,16,5,16.69,16.69,0,0,0,1.06,15.66a1,1,0,0,0,0,.68A16,16,0,0,0,5.24,22.51Z"),D(l,"d","M12 15.73a4 4 0 013.7-3.7l1.81-1.82a6 6 0 00-7.33 7.33zM30.94 15.66A16.4 16.4 0 0025.2 8.22L30 3.41 28.59 2 2 28.59 3.41 30l5.1-5.1A15.29 15.29 0 0016 27 16.69 16.69 0 0030.94 16.34 1 1 0 0030.94 15.66zM20 16a4 4 0 01-6 3.44L19.44 14A4 4 0 0120 16zm-4 9a13.05 13.05 0 01-6-1.58l2.54-2.54a6 6 0 008.35-8.35l2.87-2.87A14.54 14.54 0 0128.93 16C26.9 21.07 21.3 25 16 25z"),be(e,r)},m(s,i){B(s,e,i),n&&n.m(e,null),h(e,t),h(e,l)},p(s,[i]){s[1]?n?n.p(s,i):(n=ot(s),n.c(),n.m(e,t)):n&&(n.d(1),n=null),be(e,r=ye(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:s[0]},i&1&&{height:s[0]},i&4&&s[2],i&8&&s[3]]))},i:K,o:K,d(s){s&&d(e),n&&n.d()}}}function gl(a,e,t){let l,n;const o=["size","title"];let r=ve(e,o),{size:s=16}=e,{title:i=void 0}=e;return a.$$set=c=>{t(5,e=re(re({},e),we(c))),t(3,r=ve(e,o)),"size"in c&&t(0,s=c.size),"title"in c&&t(1,i=c.title)},a.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||i),t(2,n={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=we(e),[s,i,n,r,l]}class bl extends _e{constructor(e){super(),pe(this,e,gl,pl,ge,{size:0,title:1})}}function ct(a,e,t){const l=a.slice();return l[7]=e[t],l}function ft(a){let e,t,l=a[7].text+"",n,o,r,s,i,c,f,p,u,m,g;i=new dl({props:{size:16}});function b(){return a[6](a[7])}return{c(){e=I("div"),t=I("span"),n=O(l),o=G(),r=I("div"),s=I("button"),Y(i.$$.fragment),p=G(),this.h()},l(k){e=A(k,"DIV",{class:!0});var _=v(e);t=A(_,"SPAN",{class:!0});var w=v(t);n=F(w,l),w.forEach(d),o=Q(_),r=A(_,"DIV",{});var V=v(r);s=A(V,"BUTTON",{title:!0,class:!0});var E=v(s);U(i.$$.fragment,E),E.forEach(d),V.forEach(d),p=Q(_),_.forEach(d),this.h()},h(){D(t,"class","shrink"),D(s,"title","Remove sample"),D(s,"class","shrink-0 opacity-50 hover:text-red-400 hover:opacity-100"),s.disabled=c=!a[1],Ae(r,"opacity-40",!a[1]),D(e,"class","flex w-full justify-between gap-x-2 border-b border-gray-200 p-2 hover:bg-gray-50")},m(k,_){B(k,e,_),h(e,t),h(t,n),h(e,o),h(e,r),h(r,s),q(i,s,null),h(e,p),u=!0,m||(g=[Qe(s,"click",b),We(f=je.call(null,r,{text:a[1]?"":"User does not have access to edit this concept."}))],m=!0)},p(k,_){a=k,(!u||_&1)&&l!==(l=a[7].text+"")&&le(n,l),(!u||_&2&&c!==(c=!a[1]))&&(s.disabled=c),f&&Ct(f.update)&&_&2&&f.update.call(null,{text:a[1]?"":"User does not have access to edit this concept."}),(!u||_&2)&&Ae(r,"opacity-40",!a[1])},i(k){u||(C(i.$$.fragment,k),u=!0)},o(k){z(i.$$.fragment,k),u=!1},d(k){k&&d(e),W(i),m=!1,Mt(g)}}}function vl(a){let e,t,l,n,o,r;function s(u){a[4](u)}let i={labelText:"Add example"};a[2]!==void 0&&(i.value=a[2]),t=new Ft({props:i}),Te.push(()=>$e(t,"value",s)),t.$on("keydown",a[5]);let c=[...a[0]].reverse(),f=[];for(let u=0;u<c.length;u+=1)f[u]=ft(ct(a,c,u));const p=u=>z(f[u],1,1,()=>{f[u]=null});return{c(){e=I("div"),Y(t.$$.fragment),n=G(),o=I("div");for(let u=0;u<f.length;u+=1)f[u].c();this.h()},l(u){e=A(u,"DIV",{class:!0});var m=v(e);U(t.$$.fragment,m),m.forEach(d),n=Q(u),o=A(u,"DIV",{class:!0});var g=v(o);for(let b=0;b<f.length;b+=1)f[b].l(g);g.forEach(d),this.h()},h(){D(e,"class",""),D(o,"class","flex h-full w-full flex-col overflow-y-auto overflow-x-clip border border-gray-200")},m(u,m){B(u,e,m),q(t,e,null),B(u,n,m),B(u,o,m);for(let g=0;g<f.length;g+=1)f[g]&&f[g].m(o,null);r=!0},p(u,[m]){const g={};if(!l&&m&4&&(l=!0,g.value=u[2],Se(()=>l=!1)),t.$set(g),m&11){c=[...u[0]].reverse();let b;for(b=0;b<c.length;b+=1){const k=ct(u,c,b);f[b]?(f[b].p(k,m),C(f[b],1)):(f[b]=ft(k),f[b].c(),C(f[b],1),f[b].m(o,null))}for(de(),b=c.length;b<f.length;b+=1)p(b);me()}},i(u){if(!r){C(t.$$.fragment,u);for(let m=0;m<c.length;m+=1)C(f[m]);r=!0}},o(u){z(t.$$.fragment,u),f=f.filter(Boolean);for(let m=0;m<f.length;m+=1)z(f[m]);r=!1},d(u){u&&d(e),W(t),u&&d(n),u&&d(o),qe(f,u)}}}function wl(a,e,t){let{data:l}=e,{canEditConcept:n}=e,o;const r=Ht();function s(f){o=f,t(2,o)}const i=f=>{f.key==="Enter"&&(r("add",o),t(2,o=""))},c=f=>r("remove",f.id);return a.$$set=f=>{"data"in f&&t(0,l=f.data),"canEditConcept"in f&&t(1,n=f.canEditConcept)},[l,n,o,r,s,i,c]}class ut extends _e{constructor(e){super(),pe(this,e,wl,vl,ge,{data:0,canEditConcept:1})}}const Ye={not_good:"text-red-600",ok:"text-yellow-600",good:"text-green-600",very_good:"text-blue-600",great:"text-purple-600"},Ue={not_good:"Not good",ok:"OK",good:"Good",very_good:"Very good",great:"Great"};function kl(a){let e,t,l,n,o,r=Ue[a[0].overall]+"",s,i,c,f,p,u,m,g=Me(a[0].f1)+"",b,k,_,w,V,E,$=Me(a[0].recall)+"",M,S,Z,j,N,P,R=Me(a[0].precision)+"",x,H,X,T,ie,ce,oe=Me(a[0].roc_auc)+"",Ie;return{c(){e=I("table"),t=I("tr"),l=I("td"),n=O("Overall score"),o=I("td"),s=O(r),c=G(),f=I("tr"),p=I("td"),u=O("F1"),m=I("td"),b=O(g),k=G(),_=I("tr"),w=I("td"),V=O("Recall"),E=I("td"),M=O($),S=G(),Z=I("tr"),j=I("td"),N=O("Precision"),P=I("td"),x=O(R),H=G(),X=I("tr"),T=I("td"),ie=O("Area under ROC"),ce=I("td"),Ie=O(oe),this.h()},l(ee){e=A(ee,"TABLE",{class:!0});var J=v(e);t=A(J,"TR",{});var Re=v(t);l=A(Re,"TD",{class:!0});var Ve=v(l);n=F(Ve,"Overall score"),Ve.forEach(d),o=A(Re,"TD",{class:!0});var Be=v(o);s=F(Be,r),Be.forEach(d),Re.forEach(d),c=Q(J),f=A(J,"TR",{});var se=v(f);p=A(se,"TD",{class:!0});var te=v(p);u=F(te,"F1"),te.forEach(d),m=A(se,"TD",{class:!0});var Ne=v(m);b=F(Ne,g),Ne.forEach(d),se.forEach(d),k=Q(J),_=A(J,"TR",{});var y=v(_);w=A(y,"TD",{class:!0});var L=v(w);V=F(L,"Recall"),L.forEach(d),E=A(y,"TD",{class:!0});var fe=v(E);M=F(fe,$),fe.forEach(d),y.forEach(d),S=Q(J),Z=A(J,"TR",{});var ue=v(Z);j=A(ue,"TD",{class:!0});var De=v(j);N=F(De,"Precision"),De.forEach(d),P=A(ue,"TD",{class:!0});var Ce=v(P);x=F(Ce,R),Ce.forEach(d),ue.forEach(d),H=Q(J),X=A(J,"TR",{});var he=v(X);T=A(he,"TD",{class:!0});var ke=v(T);ie=F(ke,"Area under ROC"),ke.forEach(d),ce=A(he,"TD",{class:!0});var Ee=v(ce);Ie=F(Ee,oe),Ee.forEach(d),he.forEach(d),J.forEach(d),this.h()},h(){D(l,"class","svelte-zc5pc5"),D(o,"class",i=Je(Ye[a[0].overall])+" svelte-zc5pc5"),D(p,"class","svelte-zc5pc5"),D(m,"class","svelte-zc5pc5"),D(w,"class","svelte-zc5pc5"),D(E,"class","svelte-zc5pc5"),D(j,"class","svelte-zc5pc5"),D(P,"class","svelte-zc5pc5"),D(T,"class","svelte-zc5pc5"),D(ce,"class","svelte-zc5pc5"),D(e,"class","svelte-zc5pc5")},m(ee,J){B(ee,e,J),h(e,t),h(t,l),h(l,n),h(t,o),h(o,s),h(e,c),h(e,f),h(f,p),h(p,u),h(f,m),h(m,b),h(e,k),h(e,_),h(_,w),h(w,V),h(_,E),h(E,M),h(e,S),h(e,Z),h(Z,j),h(j,N),h(Z,P),h(P,x),h(e,H),h(e,X),h(X,T),h(T,ie),h(X,ce),h(ce,Ie)},p(ee,[J]){J&1&&r!==(r=Ue[ee[0].overall]+"")&&le(s,r),J&1&&i!==(i=Je(Ye[ee[0].overall])+" svelte-zc5pc5")&&D(o,"class",i),J&1&&g!==(g=Me(ee[0].f1)+"")&&le(b,g),J&1&&$!==($=Me(ee[0].recall)+"")&&le(M,$),J&1&&R!==(R=Me(ee[0].precision)+"")&&le(x,R),J&1&&oe!==(oe=Me(ee[0].roc_auc)+"")&&le(Ie,oe)},i:K,o:K,d(ee){ee&&d(e)}}}function El(a,e,t){let{metrics:l}=e;return a.$$set=n=>{"metrics"in n&&t(0,l=n.metrics)},[l]}class dt extends _e{constructor(e){super(),pe(this,e,El,kl,ge,{metrics:0})}}function Vl(a){const e=a.slice(),t=!0;return e[7]=t,e}function Dl(a){let e,t;function l(){return a[6](a[7])}return e=new Ge({props:{icon:a[4].isLoading?Ke:nt,class:"w-28 text-3xl",$$slots:{default:[Il]},$$scope:{ctx:a}}}),e.$on("click",l),{c(){Y(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,o){q(e,n,o),t=!0},p(n,o){a=n;const r={};o&16&&(r.icon=a[4].isLoading?Ke:nt),o&256&&(r.$$scope={dirty:o,ctx:a}),e.$set(r)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){z(e.$$.fragment,n),t=!1},d(n){W(e,n)}}}function Cl(a){let e,t=Ue[a[3].data.metrics.overall]+"",l,n,o,r,s;return{c(){e=I("div"),l=O(t),this.h()},l(i){e=A(i,"DIV",{class:!0});var c=v(e);l=F(c,t),c.forEach(d),this.h()},h(){D(e,"class",n="concept-score-pill cursor-default text-2xl font-light "+Ye[a[3].data.metrics.overall])},m(i,c){B(i,e,c),h(e,l),r||(s=We(o=je.call(null,e,{component:dt,props:{metrics:a[3].data.metrics}})),r=!0)},p(i,c){c&8&&t!==(t=Ue[i[3].data.metrics.overall]+"")&&le(l,t),c&8&&n!==(n="concept-score-pill cursor-default text-2xl font-light "+Ye[i[3].data.metrics.overall])&&D(e,"class",n),o&&Ct(o.update)&&c&8&&o.update.call(null,{component:dt,props:{metrics:i[3].data.metrics}})},i:K,o:K,d(i){i&&d(e),r=!1,s()}}}function Ml(a){let e,t,l;return t=new Ke({}),{c(){e=I("div"),Y(t.$$.fragment),this.h()},l(n){e=A(n,"DIV",{class:!0});var o=v(e);U(t.$$.fragment,o),o.forEach(d),this.h()},h(){D(e,"class","flex flex-col items-center")},m(n,o){B(n,e,o),q(t,e,null),l=!0},p:K,i(n){l||(C(t.$$.fragment,n),l=!0)},o(n){z(t.$$.fragment,n),l=!1},d(n){n&&d(e),W(t)}}}function Il(a){let e;return{c(){e=O("Compute")},l(t){e=F(t,"Compute")},m(t,l){B(t,e,l)},d(t){t&&d(e)}}}function Al(a){let e,t,l,n,o,r,s;const i=[Ml,Cl,Dl],c=[];function f(u,m){var g,b;return u[3].isFetching?0:(b=(g=u[3])==null?void 0:g.data)!=null&&b.metrics?1:2}function p(u,m){return m===2?Vl(u):u}return o=f(a),r=c[o]=i[o](p(a,o)),{c(){e=I("div"),t=I("div"),l=O(a[1]),n=G(),r.c(),this.h()},l(u){e=A(u,"DIV",{class:!0});var m=v(e);t=A(m,"DIV",{class:!0});var g=v(t);l=F(g,a[1]),g.forEach(d),n=Q(m),r.l(m),m.forEach(d),this.h()},h(){D(t,"class","text-gray-500"),D(e,"class","flex w-36 flex-col items-center gap-y-2 rounded-md border border-b-0 border-gray-200 p-4 shadow-md")},m(u,m){B(u,e,m),h(e,t),h(t,l),h(e,n),c[o].m(e,null),s=!0},p(u,[m]){(!s||m&2)&&le(l,u[1]);let g=o;o=f(u),o===g?c[o].p(p(u,o),m):(de(),z(c[g],1,1,()=>{c[g]=null}),me(),r=c[o],r?r.p(p(u,o),m):(r=c[o]=i[o](p(u,o)),r.c()),C(r,1),r.m(e,null))},i(u){s||(C(r),s=!0)},o(u){z(r),s=!1},d(u){u&&d(e),c[o].d()}}}function zl(a,e,t){let l,n,o=K,r=()=>(o(),o=Pe(l,u=>t(3,n=u)),l),s;a.$$.on_destroy.push(()=>o());let{concept:i}=e,{embedding:c}=e;const f=Lt();ze(a,f,u=>t(4,s=u));const p=u=>s.mutate([i.namespace,i.concept_name,c,u]);return a.$$set=u=>{"concept"in u&&t(0,i=u.concept),"embedding"in u&&t(1,c=u.embedding)},a.$$.update=()=>{a.$$.dirty&3&&r(t(2,l=Zt(i.namespace,i.concept_name,c)))},[i,c,l,n,s,f,p]}class Tl extends _e{constructor(e){super(),pe(this,e,zl,Al,ge,{concept:0,embedding:1})}}function mt(a,e,t){const l=a.slice();return l[22]=e[t],l}function $l(a){let e;return{c(){e=O("Compute")},l(t){e=F(t,"Compute")},m(t,l){B(t,e,l)},d(t){t&&d(e)}}}function ht(a){let e,t;return e=new Qt({props:{value:a[22].name}}),{c(){Y(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){q(e,l,n),t=!0},p(l,n){const o={};n&1024&&(o.value=l[22].name),e.$set(o)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){z(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function Sl(a){var r;let e,t,l=((r=a[10])==null?void 0:r.data)||[],n=[];for(let s=0;s<l.length;s+=1)n[s]=ht(mt(a,l,s));const o=s=>z(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=Ze()},l(s){for(let i=0;i<n.length;i+=1)n[i].l(s);e=Ze()},m(s,i){for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(s,i);B(s,e,i),t=!0},p(s,i){var c;if(i&1024){l=((c=s[10])==null?void 0:c.data)||[];let f;for(f=0;f<l.length;f+=1){const p=mt(s,l,f);n[f]?(n[f].p(p,i),C(n[f],1)):(n[f]=ht(p),n[f].c(),C(n[f],1),n[f].m(e.parentNode,e))}for(de(),f=l.length;f<n.length;f+=1)o(f);me()}},i(s){if(!t){for(let i=0;i<l.length;i+=1)C(n[i]);t=!0}},o(s){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)z(n[i]);t=!1},d(s){qe(n,s),s&&d(e)}}}function Rl(a){let e,t,l,n,o,r=a[2].toFixed(3)+"",s,i,c,f;return c=new tl({props:{text:a[0],row:a[5],spanPaths:a[7],spanValueInfos:a[6],embeddings:a[1]?[a[1]]:[]}}),{c(){e=I("div"),t=I("span"),l=O("Max score:"),n=G(),o=I("span"),s=O(r),i=G(),Y(c.$$.fragment),this.h()},l(p){e=A(p,"DIV",{class:!0});var u=v(e);t=A(u,"SPAN",{class:!0});var m=v(t);l=F(m,"Max score:"),m.forEach(d),n=Q(u),o=A(u,"SPAN",{class:!0});var g=v(o);s=F(g,r),g.forEach(d),u.forEach(d),i=Q(p),U(c.$$.fragment,p),this.h()},h(){D(t,"class","font-medium"),D(o,"class","rounded p-0.5"),xe(o,"background-color",tt(a[2])),D(e,"class","my-2")},m(p,u){B(p,e,u),h(e,t),h(t,l),h(e,n),h(e,o),h(o,s),B(p,i,u),q(c,p,u),f=!0},p(p,u){(!f||u&4)&&r!==(r=p[2].toFixed(3)+"")&&le(s,r),u&4&&xe(o,"background-color",tt(p[2]));const m={};u&1&&(m.text=p[0]),u&32&&(m.row=p[5]),u&128&&(m.spanPaths=p[7]),u&64&&(m.spanValueInfos=p[6]),u&2&&(m.embeddings=p[1]?[p[1]]:[]),c.$set(m)},i(p){f||(C(c.$$.fragment,p),f=!0)},o(p){z(c.$$.fragment,p),f=!1},d(p){p&&d(e),p&&d(i),W(c,p)}}}function Pl(a){let e,t;return e=new Tt({}),{c(){Y(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){q(e,l,n),t=!0},p:K,i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){z(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function yl(a){let e,t,l,n,o,r,s,i,c,f,p,u,m,g,b,k;l=new nl({props:{value:a[4],cols:50,placeholder:"Paste text to try the concept.",rows:6,class:"mb-2"}}),l.$on("input",a[13]),s=new Ge({props:{$$slots:{default:[$l]},$$scope:{ctx:a}}}),s.$on("click",a[19]);function _(M){a[20](M)}let w={labelText:"Embedding",$$slots:{default:[Sl]},$$scope:{ctx:a}};a[1]!==void 0&&(w.selected=a[1]),f=new Yt({props:w}),Te.push(()=>$e(f,"selected",_));const V=[Pl,Rl],E=[];function $(M,S){var Z;return M[8]&&((Z=M[3])!=null&&Z.isFetching)?0:M[5]!=null&&M[0]!=null?1:-1}return~(g=$(a))&&(b=E[g]=V[g](a)),{c(){e=I("div"),t=I("div"),Y(l.$$.fragment),n=G(),o=I("div"),r=I("div"),Y(s.$$.fragment),i=G(),c=I("div"),Y(f.$$.fragment),u=G(),m=I("div"),b&&b.c(),this.h()},l(M){e=A(M,"DIV",{class:!0});var S=v(e);t=A(S,"DIV",{});var Z=v(t);U(l.$$.fragment,Z),n=Q(Z),o=A(Z,"DIV",{class:!0});var j=v(o);r=A(j,"DIV",{class:!0});var N=v(r);U(s.$$.fragment,N),N.forEach(d),i=Q(j),c=A(j,"DIV",{class:!0});var P=v(c);U(f.$$.fragment,P),P.forEach(d),j.forEach(d),Z.forEach(d),u=Q(S),m=A(S,"DIV",{class:!0});var R=v(m);b&&b.l(R),R.forEach(d),S.forEach(d),this.h()},h(){D(r,"class","pt-4"),D(c,"class","mb-2 w-32"),D(o,"class","flex flex-row justify-between"),D(m,"class","mt-4 border-gray-200"),Ae(m,"border-t",a[0]!=null),D(e,"class","flex flex-col gap-x-8")},m(M,S){B(M,e,S),h(e,t),q(l,t,null),h(t,n),h(t,o),h(o,r),q(s,r,null),h(o,i),h(o,c),q(f,c,null),h(e,u),h(e,m),~g&&E[g].m(m,null),k=!0},p(M,[S]){const Z={};S&16&&(Z.value=M[4]),l.$set(Z);const j={};S&33554432&&(j.$$scope={dirty:S,ctx:M}),s.$set(j);const N={};S&33555456&&(N.$$scope={dirty:S,ctx:M}),!p&&S&2&&(p=!0,N.selected=M[1],Se(()=>p=!1)),f.$set(N);let P=g;g=$(M),g===P?~g&&E[g].p(M,S):(b&&(de(),z(E[P],1,1,()=>{E[P]=null}),me()),~g?(b=E[g],b?b.p(M,S):(b=E[g]=V[g](M),b.c()),C(b,1),b.m(m,null)):b=null),(!k||S&1)&&Ae(m,"border-t",M[0]!=null)},i(M){k||(C(l.$$.fragment,M),C(s.$$.fragment,M),C(f.$$.fragment,M),C(b),k=!0)},o(M){z(l.$$.fragment,M),z(s.$$.fragment,M),z(f.$$.fragment,M),z(b),k=!1},d(M){M&&d(e),W(l),W(s),W(f),~g&&E[g].d()}}}function Bl(a,e,t){var x;let l,n,o,r,s=K,i=()=>(s(),s=Pe(o,H=>t(3,r=H)),o),c,f=K,p=()=>(f(),f=Pe(n,H=>t(18,c=H)),n),u,m;a.$$.on_destroy.push(()=>s()),a.$$.on_destroy.push(()=>f());let{concept:g}=e,{example:b}=e;const k=zt();ze(a,k,H=>t(10,m=H));const _=ll();ze(a,_,H=>t(21,u=H));let w=(x=b.text)==null?void 0:x.trim();Ot(()=>{M()});function V(H){t(4,w=H.target.value),t(0,E=void 0)}let E,$=u.embedding;function M(){t(0,E=w)}let S,Z,j,N;const P=()=>M();function R(H){$=H,t(1,$)}return a.$$set=H=>{"concept"in H&&t(15,g=H.concept),"example"in H&&t(16,b=H.example)},a.$$.update=()=>{var H;if(a.$$.dirty&65536&&b.text&&(t(4,w=b.text.trim()),t(0,E=void 0)),a.$$.dirty&32770&&t(17,l={signal_name:"concept_score",concept_name:g.concept_name,namespace:g.namespace,embedding:$}),a.$$.dirty&131072&&p(t(9,n=l.embedding?Ut({signal:l}):void 0)),a.$$.dirty&32771&&i(t(8,o=$!=null&&E!=null?qt(g.namespace,g.concept_name,$,{examples:[{text:E}]}):null)),a.$$.dirty&393226&&(r==null?void 0:r.data)!=null&&$!=null&&((H=c==null?void 0:c.data)==null?void 0:H.fields)!=null){const X=Wt(c.data.fields);X.signal=l,t(5,S=jt(r.data[0],X));const T=Gt(X);t(7,j=T.spanPaths),t(6,Z=T.spanValueInfos)}if(a.$$.dirty&12&&(r==null?void 0:r.data)!=null){t(2,N=0);for(const X of r.data[0]){const T=X.score;t(2,N=Math.max(T,N))}}},[E,$,N,r,w,S,Z,j,o,n,m,k,_,V,M,g,b,l,c,P,R]}class Nl extends _e{constructor(e){super(),pe(this,e,Bl,yl,ge,{concept:15,example:16})}}function Hl(a,e,t,l,n,o){const r={...a};if(e==null||t==null)return r;const s=[...e,...t],i=new Set,c=[];for(const g of s){const b=He.value(Oe(g,[Fe]),"string");if(b==null||i.has(b))continue;i.add(b);const k=Oe(g,n);if(k==null)continue;const _=He.value(k,"string");if(_==null)continue;const w=`${l.namespace}/${l.concept_name}`,V=Oe(k,[`${w}/${o}/preview`]);if(V==null)continue;const E=Oe(k,[`${w}/labels`]),$=[];if(E!=null)for(const M of E){const S=He.span(M);S!=null&&$.push(S)}for(const M of V){const S=He.span(M);if(S==null||!$.every(P=>P.start>S.end||P.end<S.start))continue;const j=Oe(M,["score"]);if(j==null)continue;const N=He.value(j,"float32");N!=null&&c.push({rowid:b,text:_,span:S,score:N})}}function f(g){return{rowid:g.rowid,text:Kt(g.text,g.span.start,g.span.end),score:g.score}}c.sort((g,b)=>b.score-g.score);const p=c[0],u=c.slice().reverse().find(g=>g!=p);c.sort((g,b)=>Math.abs(g.score-.5)-Math.abs(b.score-.5));const m=c.find(g=>g!=p&&g!=u);return p!=null&&r.positive==null&&(r.positive=f(p)),m!=null&&r.neutral==null&&(r.neutral=f(m)),u!=null&&r.negative==null&&(r.negative=f(u)),r}function _t(a,e,t){const l=a.slice();return l[21]=e[t],l}function Ol(a){const e=a.slice(),t=Yl(e[21].score);e[24]=t;const l=Ul(e[21].score);return e[25]=l,e}function Fl(a){let e,t,l,n,o,r,s,i,c,f=a[21].text+"",p,u,m,g=a[25]+"",b,k,_=Me(a[21].score,2)+"",w,V,E,$,M,S;n=new yt({});function Z(){return a[18](a[21])}s=new Bt({});function j(){return a[19](a[21])}return{c(){e=I("div"),t=I("div"),l=I("button"),Y(n.$$.fragment),o=G(),r=I("button"),Y(s.$$.fragment),i=G(),c=I("div"),p=O(f),u=G(),m=I("div"),b=O(g),k=G(),w=O(_),V=G(),this.h()},l(N){e=A(N,"DIV",{class:!0});var P=v(e);t=A(P,"DIV",{class:!0});var R=v(t);l=A(R,"BUTTON",{class:!0});var x=v(l);U(n.$$.fragment,x),x.forEach(d),o=Q(R),r=A(R,"BUTTON",{class:!0});var H=v(r);U(s.$$.fragment,H),H.forEach(d),R.forEach(d),i=Q(P),c=A(P,"DIV",{class:!0});var X=v(c);p=F(X,f),X.forEach(d),u=Q(P),m=A(P,"DIV",{class:!0});var T=v(m);b=F(T,g),k=Q(T),w=F(T,_),T.forEach(d),V=Q(P),P.forEach(d),this.h()},h(){D(l,"class","p-2 hover:bg-gray-200"),Ae(l,"text-blue-500",a[21].label===!0),D(r,"class","p-2 hover:bg-gray-200"),Ae(r,"text-red-500",a[21].label===!1),D(t,"class","mr-2 flex flex-shrink-0 gap-x-1"),D(c,"class","flex-grow"),D(m,"class","w-40 flex-shrink-0 text-right"),D(e,"class",E=`flex flex-grow items-center whitespace-break-spaces rounded-md border border-gray-300 p-4 pl-2 ${a[24]}`)},m(N,P){B(N,e,P),h(e,t),h(t,l),q(n,l,null),h(t,o),h(t,r),q(s,r,null),h(e,i),h(e,c),h(c,p),h(e,u),h(e,m),h(m,b),h(m,k),h(m,w),h(e,V),$=!0,M||(S=[Qe(l,"click",Z),Qe(r,"click",j)],M=!0)},p(N,P){a=N,(!$||P&2)&&Ae(l,"text-blue-500",a[21].label===!0),(!$||P&2)&&Ae(r,"text-red-500",a[21].label===!1),(!$||P&2)&&f!==(f=a[21].text+"")&&le(p,f),(!$||P&2)&&g!==(g=a[25]+"")&&le(b,g),(!$||P&2)&&_!==(_=Me(a[21].score,2)+"")&&le(w,_),(!$||P&2&&E!==(E=`flex flex-grow items-center whitespace-break-spaces rounded-md border border-gray-300 p-4 pl-2 ${a[24]}`))&&D(e,"class",E)},i(N){$||(C(n.$$.fragment,N),C(s.$$.fragment,N),$=!0)},o(N){z(n.$$.fragment,N),z(s.$$.fragment,N),$=!1},d(N){N&&d(e),W(n),W(s),M=!1,Mt(S)}}}function Ll(a){let e,t;return e=new Tt({props:{paragraph:!0,lines:2}}),{c(){Y(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){q(e,l,n),t=!0},p:K,i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){z(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function pt(a){let e,t,l,n,o;const r=[Ll,Fl],s=[];function i(f,p){return p&3&&(e=null),e==null&&(e=!!(f[21]==null||f[0].includes(f[21].rowid))),e?0:1}function c(f,p){return p===1?Ol(f):f}return t=i(a,-1),l=s[t]=r[t](c(a,t)),{c(){l.c(),n=Ze()},l(f){l.l(f),n=Ze()},m(f,p){s[t].m(f,p),B(f,n,p),o=!0},p(f,p){let u=t;t=i(f,p),t===u?s[t].p(c(f,t),p):(de(),z(s[u],1,1,()=>{s[u]=null}),me(),l=s[t],l?l.p(c(f,t),p):(l=s[t]=r[t](c(f,t)),l.c()),C(l,1),l.m(n.parentNode,n))},i(f){o||(C(l),o=!0)},o(f){z(l),o=!1},d(f){s[t].d(f),f&&d(n)}}}function Zl(a){let e,t,l=a[1],n=[];for(let r=0;r<l.length;r+=1)n[r]=pt(_t(a,l,r));const o=r=>z(n[r],1,1,()=>{n[r]=null});return{c(){e=I("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=A(r,"DIV",{class:!0});var s=v(e);for(let i=0;i<n.length;i+=1)n[i].l(s);s.forEach(d),this.h()},h(){D(e,"class","flex flex-col gap-y-4")},m(r,s){B(r,e,s);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);t=!0},p(r,[s]){if(s&35){l=r[1];let i;for(i=0;i<l.length;i+=1){const c=_t(r,l,i);n[i]?(n[i].p(c,s),C(n[i],1)):(n[i]=pt(c),n[i].c(),C(n[i],1),n[i].m(e,null))}for(de(),i=l.length;i<n.length;i+=1)o(i);me()}},i(r){if(!t){for(let s=0;s<l.length;s+=1)C(n[s]);t=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)z(n[s]);t=!1},d(r){r&&d(e),qe(n,r)}}}const gt=100;function Yl(a){return a<.2?"bg-red-500/10":a<.8?"bg-yellow-500/10":"bg-blue-500/10"}function Ul(a){return a<.2?"Likely not in concept":a<.8?"Uncertain":"Likely in concept"}function ql(a,e,t){let l,n,o,r,s,i,c,f,p=K,u=()=>(p(),p=Pe(s,R=>t(16,f=R)),s),m,g=K,b=()=>(g(),g=Pe(n,R=>t(17,m=R)),n);a.$$.on_destroy.push(()=>p()),a.$$.on_destroy.push(()=>g());let{dataset:k}=e,{concept:_}=e,{fieldPath:w}=e,{schema:V}=e,{embedding:E}=e;const $=$t();ze(a,$,R=>t(20,c=R));let M={},S={},Z=[];function j(R,x){if(R==null)return;const H={text:R.text,label:x},X=Object.keys(S).find(T=>S[T]===R);t(11,M={...S}),t(0,Z=[R.rowid,...Z]),c.mutate([_.namespace,_.concept_name,{insert:[H]}],{onSuccess:()=>{t(11,M={...M,[X]:void 0})},onSettled:()=>{t(0,Z=Z.filter(T=>T!==R.rowid))}})}const N=R=>j(R,!0),P=R=>j(R,!1);return a.$$set=R=>{"dataset"in R&&t(6,k=R.dataset),"concept"in R&&t(7,_=R.concept),"fieldPath"in R&&t(8,w=R.fieldPath),"schema"in R&&t(9,V=R.schema),"embedding"in R&&t(10,E=R.embedding)},a.$$.update=()=>{var R,x;a.$$.dirty&1408&&t(15,l={path:w,type:"concept",concept_namespace:_.namespace,concept_name:_.concept_name,embedding:E}),a.$$.dirty&33600&&b(t(3,n=et(k.namespace,k.name,{columns:[Fe,w],limit:gt,combine_columns:!0,searches:[l]},V))),a.$$.dirty&1152&&t(14,o={signal_name:"concept_score",namespace:_.namespace,concept_name:_.concept_name,embedding:E}),a.$$.dirty&128&&t(13,r={signal_name:"concept_labels",namespace:_.namespace,concept_name:_.concept_name}),a.$$.dirty&25408&&u(t(2,s=et(k.namespace,k.name,{columns:[Fe,w,{path:w,signal_udf:o},{path:w,signal_udf:r}],limit:gt,combine_columns:!0,sort_by:[Fe]},V))),a.$$.dirty&200064&&t(12,S=Hl(M,m.isFetching||(R=m.data)==null?void 0:R.rows,f.isFetching||(x=f.data)==null?void 0:x.rows,_,w,E)),a.$$.dirty&4096&&t(1,i=[S.positive,S.neutral,S.negative])},[Z,i,s,n,$,j,k,_,w,V,E,M,S,r,o,l,f,m,N,P]}class Wl extends _e{constructor(e){super(),pe(this,e,ql,Zl,ge,{dataset:6,concept:7,fieldPath:8,schema:9,embedding:10})}}function bt(a){let e,t;return e=new Ge({props:{class:"dataset-link top-7 h-8",icon:Xt,iconDescription:"Open dataset and apply concept."}}),e.$on("click",a[7]),{c(){Y(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){q(e,l,n),t=!0},p:K,i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){z(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function vt(a){let e,t,l;return t=new Wl({props:{concept:a[0],dataset:a[1],fieldPath:a[2],schema:a[3],embedding:a[4]}}),{c(){e=I("div"),Y(t.$$.fragment)},l(n){e=A(n,"DIV",{});var o=v(e);U(t.$$.fragment,o),o.forEach(d)},m(n,o){B(n,e,o),q(t,e,null),l=!0},p(n,o){const r={};o&1&&(r.concept=n[0]),o&2&&(r.dataset=n[1]),o&4&&(r.fieldPath=n[2]),o&8&&(r.schema=n[3]),o&16&&(r.embedding=n[4]),t.$set(r)},i(n){l||(C(t.$$.fragment,n),l=!0)},o(n){z(t.$$.fragment,n),l=!1},d(n){n&&d(e),W(t)}}}function wt(a){let e,t;return e=new Xe({props:{hideCloseButton:!0,kind:"warning",fullWidth:!0,lowContrast:!0,title:"No embeddings",caption:"Dataset has no fields with computed embeddings. Please compute an embedding index before using the labeler on this dataset."}}),{c(){Y(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){q(e,l,n),t=!0},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){z(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function jl(a){let e,t,l,n,o,r,s,i,c,f,p;function u(V){a[9](V)}function m(V){a[10](V)}function g(V){a[11](V)}let b={};a[1]!==void 0&&(b.dataset=a[1]),a[2]!==void 0&&(b.path=a[2]),a[4]!==void 0&&(b.embedding=a[4]),n=new Nt({props:b}),Te.push(()=>$e(n,"dataset",u)),Te.push(()=>$e(n,"path",m)),Te.push(()=>$e(n,"embedding",g));let k=a[5]!=null&&a[4]!=null&&bt(a),_=a[1]!=null&&a[2]!=null&&a[3]!=null&&a[4]!=null&&vt(a),w=a[4]==null&&wt();return{c(){e=I("div"),t=I("div"),l=I("div"),Y(n.$$.fragment),i=G(),k&&k.c(),c=G(),_&&_.c(),f=G(),w&&w.c(),this.h()},l(V){e=A(V,"DIV",{class:!0});var E=v(e);t=A(E,"DIV",{class:!0});var $=v(t);l=A($,"DIV",{class:!0});var M=v(l);U(n.$$.fragment,M),M.forEach(d),i=Q($),k&&k.l($),$.forEach(d),c=Q(E),_&&_.l(E),f=Q(E),w&&w.l(E),E.forEach(d),this.h()},h(){D(l,"class","flex-grow"),D(t,"class","flex flex-row gap-x-4"),D(e,"class","flex flex-col gap-y-4")},m(V,E){B(V,e,E),h(e,t),h(t,l),q(n,l,null),h(t,i),k&&k.m(t,null),h(e,c),_&&_.m(e,null),h(e,f),w&&w.m(e,null),p=!0},p(V,[E]){const $={};!o&&E&2&&(o=!0,$.dataset=V[1],Se(()=>o=!1)),!r&&E&4&&(r=!0,$.path=V[2],Se(()=>r=!1)),!s&&E&16&&(s=!0,$.embedding=V[4],Se(()=>s=!1)),n.$set($),V[5]!=null&&V[4]!=null?k?(k.p(V,E),E&48&&C(k,1)):(k=bt(V),k.c(),C(k,1),k.m(t,null)):k&&(de(),z(k,1,1,()=>{k=null}),me()),V[1]!=null&&V[2]!=null&&V[3]!=null&&V[4]!=null?_?(_.p(V,E),E&30&&C(_,1)):(_=vt(V),_.c(),C(_,1),_.m(e,f)):_&&(de(),z(_,1,1,()=>{_=null}),me()),V[4]==null?w?E&16&&C(w,1):(w=wt(),w.c(),C(w,1),w.m(e,null)):w&&(de(),z(w,1,1,()=>{w=null}),me())},i(V){p||(C(n.$$.fragment,V),C(k),C(_),C(w),p=!0)},o(V){z(n.$$.fragment,V),z(k),z(_),z(w),p=!1},d(V){V&&d(e),W(n),k&&k.d(),_&&_.d(),w&&w.d()}}}function Gl(a,e,t){let l,n,o,r=K,s=()=>(r(),r=Pe(l,_=>t(8,o=_)),l);a.$$.on_destroy.push(()=>r());let{concept:i}=e,c,f,p,u;function m(){if(n==null||u==null||c==null)return;const _=St(c.namespace,c.name);_.addSearch({path:[n],type:"concept",concept_namespace:i.namespace,concept_name:i.concept_name,embedding:u}),At(Rt(c.namespace,c.name,It(_)))}function g(_){c=_,t(1,c)}function b(_){p=_,t(2,p)}function k(_){u=_,t(4,u)}return a.$$set=_=>{"concept"in _&&t(0,i=_.concept)},a.$$.update=()=>{a.$$.dirty&2&&s(t(6,l=c!=null&&c.namespace&&(c!=null&&c.name)?Jt(c.namespace,c.name):null)),a.$$.dirty&256&&t(3,f=o==null?void 0:o.data),a.$$.dirty&4&&t(5,n=p?Pt(p):void 0)},[i,c,p,f,u,n,l,m,o,g,b,k]}class Ql extends _e{constructor(e){super(),pe(this,e,Gl,jl,ge,{concept:0})}}function kt(a,e,t){const l=a.slice();return l[29]=e[t],l}function Kl(a){let e,t,l,n,o;return t=new _l({props:{class:"ml-2"}}),{c(){e=I("div"),Y(t.$$.fragment)},l(r){e=A(r,"DIV",{});var s=v(e);U(t.$$.fragment,s),s.forEach(d)},m(r,s){B(r,e,s),q(t,e,null),l=!0,n||(o=We(je.call(null,e,{text:"This concept is publicly visible."})),n=!0)},i(r){l||(C(t.$$.fragment,r),l=!0)},o(r){z(t.$$.fragment,r),l=!1},d(r){r&&d(e),W(t),n=!1,o()}}}function Xl(a){let e,t,l,n,o;return t=new bl({props:{class:"ml-2"}}),{c(){e=I("div"),Y(t.$$.fragment)},l(r){e=A(r,"DIV",{});var s=v(e);U(t.$$.fragment,s),s.forEach(d)},m(r,s){B(r,e,s),q(t,e,null),l=!0,n||(o=We(je.call(null,e,{text:"Your concepts are only visible to you when logged in with Google."})),n=!0)},i(r){l||(C(t.$$.fragment,r),l=!0)},o(r){z(t.$$.fragment,r),l=!1},d(r){r&&d(e),W(t),n=!1,o()}}}function Et(a){let e,t=a[0].metadata.description+"",l;return{c(){e=I("div"),l=O(t),this.h()},l(n){e=A(n,"DIV",{class:!0});var o=v(e);l=F(o,t),o.forEach(d),this.h()},h(){D(e,"class","text text-base text-gray-600")},m(n,o){B(n,e,o),h(e,l)},p(n,o){o[0]&1&&t!==(t=n[0].metadata.description+"")&&le(l,t)},d(n){n&&d(e)}}}function Jl(a){let e,t;return{c(){e=I("div"),t=O("Try it"),this.h()},l(l){e=A(l,"DIV",{slot:!0,class:!0});var n=v(e);t=F(n,"Try it"),n.forEach(d),this.h()},h(){D(e,"slot","above"),D(e,"class","text-md font-semibold")},m(l,n){B(l,e,n),h(e,t)},p:K,d(l){l&&d(e)}}}function xl(a){let e,t;return e=new Nl({props:{example:a[5],concept:a[0],slot:"below"}}),{c(){Y(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){q(e,l,n),t=!0},p(l,n){const o={};n[0]&32&&(o.example=l[5]),n[0]&1&&(o.concept=l[0]),e.$set(o)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){z(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function en(a){let e,t;return{c(){e=I("div"),t=O("Apply to a dataset"),this.h()},l(l){e=A(l,"DIV",{slot:!0,class:!0});var n=v(e);t=F(n,"Apply to a dataset"),n.forEach(d),this.h()},h(){D(e,"slot","above"),D(e,"class","text-md font-semibold")},m(l,n){B(l,e,n),h(e,t)},p:K,d(l){l&&d(e)}}}function tn(a){let e,t;return e=new Xe({props:{hideCloseButton:!0,kind:"warning",fullWidth:!0,lowContrast:!0,title:"Choose a dataset with a computed embedding",caption:"Dataset has no fields with computed embeddings. Please compute an embedding index before you can search by concept."}}),{c(){Y(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){q(e,l,n),t=!0},p:K,i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){z(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function ln(a){let e,t,l;return t=new Ge({props:{iconDescription:"Open dataset and apply concept.",$$slots:{default:[nn]},$$scope:{ctx:a}}}),t.$on("click",a[23]),{c(){e=I("div"),Y(t.$$.fragment),this.h()},l(n){e=A(n,"DIV",{class:!0});var o=v(e);U(t.$$.fragment,o),o.forEach(d),this.h()},h(){D(e,"class","mt-4")},m(n,o){B(n,e,o),q(t,e,null),l=!0},p(n,o){const r={};o[1]&2&&(r.$$scope={dirty:o,ctx:n}),t.$set(r)},i(n){l||(C(t.$$.fragment,n),l=!0)},o(n){z(t.$$.fragment,n),l=!1},d(n){n&&d(e),W(t)}}}function nn(a){let e;return{c(){e=O("Search by concept")},l(t){e=F(t,"Search by concept")},m(t,l){B(t,e,l)},d(t){t&&d(e)}}}function an(a){let e,t,l,n,o,r,s,i,c;function f(_){a[20](_)}function p(_){a[21](_)}function u(_){a[22](_)}let m={};a[2]!==void 0&&(m.dataset=a[2]),a[3]!==void 0&&(m.path=a[3]),a[4]!==void 0&&(m.embedding=a[4]),t=new Nt({props:m}),Te.push(()=>$e(t,"dataset",f)),Te.push(()=>$e(t,"path",p)),Te.push(()=>$e(t,"embedding",u));const g=[ln,tn],b=[];function k(_,w){return _[2]!=null&&_[3]!=null&&_[4]!=null?0:1}return s=k(a),i=b[s]=g[s](a),{c(){e=I("div"),Y(t.$$.fragment),r=G(),i.c(),this.h()},l(_){e=A(_,"DIV",{slot:!0});var w=v(e);U(t.$$.fragment,w),r=Q(w),i.l(w),w.forEach(d),this.h()},h(){D(e,"slot","below")},m(_,w){B(_,e,w),q(t,e,null),h(e,r),b[s].m(e,null),c=!0},p(_,w){const V={};!l&&w[0]&4&&(l=!0,V.dataset=_[2],Se(()=>l=!1)),!n&&w[0]&8&&(n=!0,V.path=_[3],Se(()=>n=!1)),!o&&w[0]&16&&(o=!0,V.embedding=_[4],Se(()=>o=!1)),t.$set(V);let E=s;s=k(_),s===E?b[s].p(_,w):(de(),z(b[E],1,1,()=>{b[E]=null}),me(),i=b[s],i?i.p(_,w):(i=b[s]=g[s](_),i.c()),C(i,1),i.m(e,null))},i(_){c||(C(t.$$.fragment,_),C(i),c=!0)},o(_){z(t.$$.fragment,_),z(i),c=!1},d(_){_&&d(e),W(t),b[s].d()}}}function Vt(a){let e,t;return e=new Le({props:{expanded:!0,$$slots:{below:[rn],above:[sn]},$$scope:{ctx:a}}}),{c(){Y(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){q(e,l,n),t=!0},p(l,n){const o={};n[0]&513|n[1]&2&&(o.$$scope={dirty:n,ctx:l}),e.$set(o)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){z(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function sn(a){let e,t;return{c(){e=I("div"),t=O("Metrics"),this.h()},l(l){e=A(l,"DIV",{slot:!0,class:!0});var n=v(e);t=F(n,"Metrics"),n.forEach(d),this.h()},h(){D(e,"slot","above"),D(e,"class","text-md font-semibold")},m(l,n){B(l,e,n),h(e,t)},p:K,d(l){l&&d(e)}}}function Dt(a){let e,t;return e=new Tl({props:{concept:a[0],embedding:a[29].name}}),{c(){Y(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){q(e,l,n),t=!0},p(l,n){const o={};n[0]&1&&(o.concept=l[0]),n[0]&512&&(o.embedding=l[29].name),e.$set(o)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){z(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function rn(a){let e,t,l=a[9].data,n=[];for(let r=0;r<l.length;r+=1)n[r]=Dt(kt(a,l,r));const o=r=>z(n[r],1,1,()=>{n[r]=null});return{c(){e=I("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=A(r,"DIV",{slot:!0,class:!0});var s=v(e);for(let i=0;i<n.length;i+=1)n[i].l(s);s.forEach(d),this.h()},h(){D(e,"slot","below"),D(e,"class","model-metrics flex gap-x-4")},m(r,s){B(r,e,s);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);t=!0},p(r,s){if(s[0]&513){l=r[9].data;let i;for(i=0;i<l.length;i+=1){const c=kt(r,l,i);n[i]?(n[i].p(c,s),C(n[i],1)):(n[i]=Dt(c),n[i].c(),C(n[i],1),n[i].m(e,null))}for(de(),i=l.length;i<n.length;i+=1)o(i);me()}},i(r){if(!t){for(let s=0;s<l.length;s+=1)C(n[s]);t=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)z(n[s]);t=!1},d(r){r&&d(e),qe(n,r)}}}function on(a){let e,t;return{c(){e=I("div"),t=O("Collect labels"),this.h()},l(l){e=A(l,"DIV",{slot:!0,class:!0});var n=v(e);t=F(n,"Collect labels"),n.forEach(d),this.h()},h(){D(e,"slot","above"),D(e,"class","text-md font-semibold")},m(l,n){B(l,e,n),h(e,t)},p:K,d(l){l&&d(e)}}}function cn(a){let e,t;return e=new Xe({props:{hideCloseButton:!0,kind:"warning",fullWidth:!0,lowContrast:!0,title:"You don't have permission to edit this concept",caption:"You can only edit concepts you created."}}),{c(){Y(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){q(e,l,n),t=!0},p:K,i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){z(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function fn(a){let e,t;return e=new Ql({props:{concept:a[0]}}),{c(){Y(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){q(e,l,n),t=!0},p(l,n){const o={};n[0]&1&&(o.concept=l[0]),e.$set(o)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){z(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function un(a){let e,t,l,n;const o=[fn,cn],r=[];function s(i,c){return i[7]?0:1}return t=s(a),l=r[t]=o[t](a),{c(){e=I("div"),l.c(),this.h()},l(i){e=A(i,"DIV",{slot:!0,class:!0});var c=v(e);l.l(c),c.forEach(d),this.h()},h(){D(e,"slot","below"),D(e,"class","w-full")},m(i,c){B(i,e,c),r[t].m(e,null),n=!0},p(i,c){let f=t;t=s(i),t===f?r[t].p(i,c):(de(),z(r[f],1,1,()=>{r[f]=null}),me(),l=r[t],l?l.p(i,c):(l=r[t]=o[t](i),l.c()),C(l,1),l.m(e,null))},i(i){n||(C(l),n=!0)},o(i){z(l),n=!1},d(i){i&&d(e),r[t].d()}}}function dn(a){var Ne;let e,t,l,n=a[0].concept_name+"",o,r,s,i,c,f,p,u,m,g,b,k,_,w,V,E,$,M,S=a[1].length+"",Z,j,N,P,R,x,H,X,T,ie=a[6].length+"",ce,oe,Ie,ee,J;const Re=[Xl,Kl],Ve=[];function Be(y,L){var fe,ue;return y[8]==y[0].namespace&&!((fe=y[0].metadata)!=null&&fe.is_public)?0:(ue=y[0].metadata)!=null&&ue.is_public?1:-1}~(s=Be(a))&&(i=Ve[s]=Re[s](a));let se=((Ne=a[0].metadata)==null?void 0:Ne.description)&&Et(a);p=new Le({props:{expanded:!0,$$slots:{below:[xl],above:[Jl]},$$scope:{ctx:a}}}),m=new Le({props:{$$slots:{below:[an],above:[en]},$$scope:{ctx:a}}});let te=a[9].data&&Vt(a);return k=new Le({props:{$$slots:{below:[un],above:[on]},$$scope:{ctx:a}}}),$=new yt({}),P=new ut({props:{data:a[1],canEditConcept:a[7]}}),P.$on("remove",a[24]),P.$on("add",a[25]),X=new Bt({}),ee=new ut({props:{data:a[6],canEditConcept:a[7]}}),ee.$on("remove",a[26]),ee.$on("add",a[27]),{c(){e=I("div"),t=I("div"),l=I("div"),o=O(n),r=G(),i&&i.c(),c=G(),se&&se.c(),f=G(),Y(p.$$.fragment),u=G(),Y(m.$$.fragment),g=G(),te&&te.c(),b=G(),Y(k.$$.fragment),_=G(),w=I("div"),V=I("div"),E=I("span"),Y($.$$.fragment),M=O(" In concept ("),Z=O(S),j=O(" examples)"),N=G(),Y(P.$$.fragment),R=G(),x=I("div"),H=I("span"),Y(X.$$.fragment),T=O("Not in concept ("),ce=O(ie),oe=O(" examples)"),Ie=G(),Y(ee.$$.fragment),this.h()},l(y){e=A(y,"DIV",{class:!0});var L=v(e);t=A(L,"DIV",{});var fe=v(t);l=A(fe,"DIV",{class:!0});var ue=v(l);o=F(ue,n),r=Q(ue),i&&i.l(ue),ue.forEach(d),c=Q(fe),se&&se.l(fe),fe.forEach(d),f=Q(L),U(p.$$.fragment,L),u=Q(L),U(m.$$.fragment,L),g=Q(L),te&&te.l(L),b=Q(L),U(k.$$.fragment,L),_=Q(L),w=A(L,"DIV",{class:!0});var De=v(w);V=A(De,"DIV",{class:!0});var Ce=v(V);E=A(Ce,"SPAN",{class:!0});var he=v(E);U($.$$.fragment,he),M=F(he," In concept ("),Z=F(he,S),j=F(he," examples)"),he.forEach(d),N=Q(Ce),U(P.$$.fragment,Ce),Ce.forEach(d),R=Q(De),x=A(De,"DIV",{class:!0});var ke=v(x);H=A(ke,"SPAN",{class:!0});var Ee=v(H);U(X.$$.fragment,Ee),T=F(Ee,"Not in concept ("),ce=F(Ee,ie),oe=F(Ee," examples)"),Ee.forEach(d),Ie=Q(ke),U(ee.$$.fragment,ke),ke.forEach(d),De.forEach(d),L.forEach(d),this.h()},h(){D(l,"class","flex flex-row items-center text-2xl font-semibold"),D(E,"class","flex items-center gap-x-2 text-lg"),D(V,"class","flex w-0 flex-grow flex-col gap-y-4"),D(H,"class","flex items-center gap-x-2 text-lg"),D(x,"class","flex w-0 flex-grow flex-col gap-y-4"),D(w,"class","flex gap-x-4"),D(e,"class","flex h-full w-full flex-col gap-y-8 px-10")},m(y,L){B(y,e,L),h(e,t),h(t,l),h(l,o),h(l,r),~s&&Ve[s].m(l,null),h(t,c),se&&se.m(t,null),h(e,f),q(p,e,null),h(e,u),q(m,e,null),h(e,g),te&&te.m(e,null),h(e,b),q(k,e,null),h(e,_),h(e,w),h(w,V),h(V,E),q($,E,null),h(E,M),h(E,Z),h(E,j),h(V,N),q(P,V,null),h(w,R),h(w,x),h(x,H),q(X,H,null),h(H,T),h(H,ce),h(H,oe),h(x,Ie),q(ee,x,null),J=!0},p(y,L){var Ee;(!J||L[0]&1)&&n!==(n=y[0].concept_name+"")&&le(o,n);let fe=s;s=Be(y),s!==fe&&(i&&(de(),z(Ve[fe],1,1,()=>{Ve[fe]=null}),me()),~s?(i=Ve[s],i||(i=Ve[s]=Re[s](y),i.c()),C(i,1),i.m(l,null)):i=null),(Ee=y[0].metadata)!=null&&Ee.description?se?se.p(y,L):(se=Et(y),se.c(),se.m(t,null)):se&&(se.d(1),se=null);const ue={};L[0]&33|L[1]&2&&(ue.$$scope={dirty:L,ctx:y}),p.$set(ue);const De={};L[0]&28|L[1]&2&&(De.$$scope={dirty:L,ctx:y}),m.$set(De),y[9].data?te?(te.p(y,L),L[0]&512&&C(te,1)):(te=Vt(y),te.c(),C(te,1),te.m(e,b)):te&&(de(),z(te,1,1,()=>{te=null}),me());const Ce={};L[0]&129|L[1]&2&&(Ce.$$scope={dirty:L,ctx:y}),k.$set(Ce),(!J||L[0]&2)&&S!==(S=y[1].length+"")&&le(Z,S);const he={};L[0]&2&&(he.data=y[1]),L[0]&128&&(he.canEditConcept=y[7]),P.$set(he),(!J||L[0]&64)&&ie!==(ie=y[6].length+"")&&le(ce,ie);const ke={};L[0]&64&&(ke.data=y[6]),L[0]&128&&(ke.canEditConcept=y[7]),ee.$set(ke)},i(y){J||(C(i),C(p.$$.fragment,y),C(m.$$.fragment,y),C(te),C(k.$$.fragment,y),C($.$$.fragment,y),C(P.$$.fragment,y),C(X.$$.fragment,y),C(ee.$$.fragment,y),J=!0)},o(y){z(i),z(p.$$.fragment,y),z(m.$$.fragment,y),z(te),z(k.$$.fragment,y),z($.$$.fragment,y),z(P.$$.fragment,y),z(X.$$.fragment,y),z(ee.$$.fragment,y),J=!1},d(y){y&&d(e),~s&&Ve[s].d(),se&&se.d(),W(p),W(m),te&&te.d(),W(k),W($),W(P),W(X),W(ee)}}}function mn(a,e,t){let l,n,o,r,s,i,c,f,p,u,{concept:m}=e;const g=xt();ze(a,g,T=>t(19,p=T));const b=el();ze(a,b,T=>t(18,f=T));const k=$t();ze(a,k,T=>t(28,c=T));const _=zt();ze(a,_,T=>t(9,u=T));let w,V,E;function $(){const T=V?Pt(V):void 0;if(T==null||E==null||w==null)return;const ie=St(w.namespace,w.name);ie.addSearch({path:[T],type:"concept",concept_namespace:m.namespace,concept_name:m.concept_name,embedding:E}),At(Rt(w.namespace,w.name,It(ie)))}function M(T){!m.namespace||!m.concept_name||c.mutate([m.namespace,m.concept_name,{remove:[T]}])}function S(T,ie){!m.namespace||!m.concept_name||c.mutate([m.namespace,m.concept_name,{insert:[{text:T,label:ie}]}])}function Z(T){w=T,t(2,w)}function j(T){V=T,t(3,V)}function N(T){E=T,t(4,E)}const P=()=>$(),R=T=>M(T.detail),x=T=>S(T.detail,!0),H=T=>M(T.detail),X=T=>S(T.detail,!1);return a.$$set=T=>{"concept"in T&&t(0,m=T.concept)},a.$$.update=()=>{var T,ie,ce;a.$$.dirty[0]&524288&&t(8,l=(ie=(T=p.data)==null?void 0:T.user)==null?void 0:ie.id),a.$$.dirty[0]&262145&&t(17,n=(ce=f.data)==null?void 0:ce.find(oe=>oe.namespace===m.namespace&&oe.name===m.concept_name)),a.$$.dirty[0]&131072&&t(7,o=(n==null?void 0:n.acls.write)==!0),a.$$.dirty[0]&1&&t(1,r=Object.values(m.data).filter(oe=>oe.label==!0)),a.$$.dirty[0]&1&&t(6,s=Object.values(m.data).filter(oe=>oe.label==!1)),a.$$.dirty[0]&2&&t(5,i=r[Math.floor(Math.random()*r.length)])},[m,r,w,V,E,i,s,o,l,u,g,b,k,_,$,M,S,n,f,p,Z,j,N,P,R,x,H,X]}class Cn extends _e{constructor(e){super(),pe(this,e,mn,dn,ge,{concept:0},null,[-1,-1])}}export{Cn as C,Vn as I,Dn as S,dl as T,bl as V,_l as a,nt as b};
