import{S as me,i as de,s as ge,C as Z,k as O,a as R,l as Q,m as U,c as W,h as S,n as q,F as x,b as A,a0 as N,G as ve,H as ee,I as te,J as le,v as L,d as p,f as j,g,y as D,z,A as I,B as F,N as ye,O as ne,w as we,U as Ee,V as Se,e as G,a2 as M,a1 as X,ab as De}from"./index.6d58eddb.js";import{C as ze,a as Ie}from"./ChevronUp.d4050376.js";import{e as Fe,b3 as Ce,a3 as H,az as Ve,a1 as J,R as Be,S as Y,W as Ne,al as he,bb as pe,b as K}from"./Commands.f21feee1.js";import{g as Pe}from"./settingsStore.3abd8af5.js";const Te=i=>({}),re=i=>({}),Oe=i=>({}),se=i=>({});function Qe(i){let t,l;return t=new ze({}),{c(){D(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,n){I(t,e,n),l=!0},i(e){l||(g(t.$$.fragment,e),l=!0)},o(e){p(t.$$.fragment,e),l=!1},d(e){F(t,e)}}}function Ue(i){let t,l;return t=new Ie({}),{c(){D(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,n){I(t,e,n),l=!0},i(e){l||(g(t.$$.fragment,e),l=!0)},o(e){p(t.$$.fragment,e),l=!1},d(e){F(t,e)}}}function qe(i){let t,l,e,n,o,r,a,s,f,_,y;const B=i[2].above,b=Z(B,i,i[1],se),C=[Ue,Qe],w=[];function h(c,d){return c[0]?0:1}o=h(i),r=w[o]=C[o](i);const $=i[2].below,u=Z($,i,i[1],re);return{c(){t=O("div"),l=O("button"),e=O("div"),b&&b.c(),n=R(),r.c(),a=R(),s=O("div"),u&&u.c(),this.h()},l(c){t=Q(c,"DIV",{class:!0});var d=U(t);l=Q(d,"BUTTON",{class:!0});var v=U(l);e=Q(v,"DIV",{class:!0});var k=U(e);b&&b.l(k),n=W(k),r.l(k),k.forEach(S),v.forEach(S),a=W(d),s=Q(d,"DIV",{class:!0});var P=U(s);u&&u.l(P),P.forEach(S),d.forEach(S),this.h()},h(){q(e,"class","flex items-center justify-between gap-x-3"),q(l,"class","w-full p-4 text-left hover:bg-gray-200"),q(s,"class","p-4"),x(s,"hidden",!i[0]),q(t,"class","rounded-xl border border-gray-300")},m(c,d){A(c,t,d),N(t,l),N(l,e),b&&b.m(e,null),N(e,n),w[o].m(e,null),N(t,a),N(t,s),u&&u.m(s,null),f=!0,_||(y=ve(l,"click",i[3]),_=!0)},p(c,[d]){b&&b.p&&(!f||d&2)&&ee(b,B,c,c[1],f?le(B,c[1],d,Oe):te(c[1]),se);let v=o;o=h(c),o!==v&&(L(),p(w[v],1,1,()=>{w[v]=null}),j(),r=w[o],r||(r=w[o]=C[o](c),r.c()),g(r,1),r.m(e,null)),u&&u.p&&(!f||d&2)&&ee(u,$,c,c[1],f?le($,c[1],d,Te):te(c[1]),re),(!f||d&1)&&x(s,"hidden",!c[0])},i(c){f||(g(b,c),g(r),g(u,c),f=!0)},o(c){p(b,c),p(r),p(u,c),f=!1},d(c){c&&S(t),b&&b.d(c),w[o].d(),u&&u.d(c),_=!1,y()}}}function Le(i,t,l){let{$$slots:e={},$$scope:n}=t,{expanded:o=!1}=t;const r=()=>l(0,o=!o);return i.$$set=a=>{"expanded"in a&&l(0,o=a.expanded),"$$scope"in a&&l(1,n=a.$$scope)},[o,n,e,r]}class lt extends me{constructor(t){super(),de(this,t,Le,qe,ge,{expanded:0})}}function ie(i,t,l){const e=i.slice();return e[22]=t[l],e}function ae(i,t,l){const e=i.slice();return e[25]=t[l],e}function oe(i,t,l){const e=i.slice();return e[1]=t[l],e}function je(i){let t,l;return t=new Y({props:{size:i[2],labelText:"Dataset",selected:i[8],$$slots:{default:[He]},$$scope:{ctx:i}}}),t.$on("change",i[12]),{c(){D(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,n){I(t,e,n),l=!0},p(e,n){const o={};n&4&&(o.size=e[2]),n&256&&(o.selected=e[8]),n&1073741856&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){l||(g(t.$$.fragment,e),l=!0)},o(e){p(t.$$.fragment,e),l=!1},d(e){F(t,e)}}}function Ae(i){let t,l;return t=new he({props:{kind:"error",title:"Error",subtitle:i[5].error.message,hideCloseButton:!0}}),{c(){D(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,n){I(t,e,n),l=!0},p(e,n){const o={};n&32&&(o.subtitle=e[5].error.message),t.$set(o)},i(e){l||(g(t.$$.fragment,e),l=!0)},o(e){p(t.$$.fragment,e),l=!1},d(e){F(t,e)}}}function Ge(i){let t,l;return t=new pe({}),{c(){D(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,n){I(t,e,n),l=!0},p:X,i(e){l||(g(t.$$.fragment,e),l=!0)},o(e){p(t.$$.fragment,e),l=!1},d(e){F(t,e)}}}function ce(i){let t,l;return t=new K({props:{value:`${i[1].namespace}/${i[1].dataset_name}`}}),{c(){D(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,n){I(t,e,n),l=!0},p(e,n){const o={};n&32&&(o.value=`${e[1].namespace}/${e[1].dataset_name}`),t.$set(o)},i(e){l||(g(t.$$.fragment,e),l=!0)},o(e){p(t.$$.fragment,e),l=!1},d(e){F(t,e)}}}function He(i){let t,l,e,n;t=new K({props:{value:"",text:"none"}});let o=i[5].data,r=[];for(let s=0;s<o.length;s+=1)r[s]=ce(oe(i,o,s));const a=s=>p(r[s],1,1,()=>{r[s]=null});return{c(){D(t.$$.fragment),l=R();for(let s=0;s<r.length;s+=1)r[s].c();e=G()},l(s){z(t.$$.fragment,s),l=W(s);for(let f=0;f<r.length;f+=1)r[f].l(s);e=G()},m(s,f){I(t,s,f),A(s,l,f);for(let _=0;_<r.length;_+=1)r[_]&&r[_].m(s,f);A(s,e,f),n=!0},p(s,f){if(f&32){o=s[5].data;let _;for(_=0;_<o.length;_+=1){const y=oe(s,o,_);r[_]?(r[_].p(y,f),g(r[_],1)):(r[_]=ce(y),r[_].c(),g(r[_],1),r[_].m(e.parentNode,e))}for(L(),_=o.length;_<r.length;_+=1)a(_);j()}},i(s){if(!n){g(t.$$.fragment,s);for(let f=0;f<o.length;f+=1)g(r[f]);n=!0}},o(s){p(t.$$.fragment,s),r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)p(r[f]);n=!1},d(s){F(t,s),s&&S(l),M(r,s),s&&S(e)}}}function Je(i){let t,l;return t=new Y({props:{size:i[2],labelText:"Field",selected:i[7],$$slots:{default:[Ke]},$$scope:{ctx:i}}}),t.$on("change",i[13]),{c(){D(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,n){I(t,e,n),l=!0},p(e,n){const o={};n&4&&(o.size=e[2]),n&128&&(o.selected=e[7]),n&1073741832&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){l||(g(t.$$.fragment,e),l=!0)},o(e){p(t.$$.fragment,e),l=!1},d(e){F(t,e)}}}function Re(i){let t,l;return t=new he({props:{kind:"error",title:"Error",subtitle:i[4].error.message,hideCloseButton:!0}}),{c(){D(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,n){I(t,e,n),l=!0},p(e,n){const o={};n&16&&(o.subtitle=e[4].error.message),t.$set(o)},i(e){l||(g(t.$$.fragment,e),l=!0)},o(e){p(t.$$.fragment,e),l=!1},d(e){F(t,e)}}}function We(i){let t,l;return t=new pe({}),{c(){D(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,n){I(t,e,n),l=!0},p:X,i(e){l||(g(t.$$.fragment,e),l=!0)},o(e){p(t.$$.fragment,e),l=!1},d(e){F(t,e)}}}function fe(i){let t,l;return t=new K({props:{value:J(i[25].path)}}),{c(){D(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,n){I(t,e,n),l=!0},p(e,n){const o={};n&8&&(o.value=J(e[25].path)),t.$set(o)},i(e){l||(g(t.$$.fragment,e),l=!0)},o(e){p(t.$$.fragment,e),l=!1},d(e){F(t,e)}}}function Ke(i){let t,l,e=i[3],n=[];for(let r=0;r<e.length;r+=1)n[r]=fe(ae(i,e,r));const o=r=>p(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();t=G()},l(r){for(let a=0;a<n.length;a+=1)n[a].l(r);t=G()},m(r,a){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(r,a);A(r,t,a),l=!0},p(r,a){if(a&8){e=r[3];let s;for(s=0;s<e.length;s+=1){const f=ae(r,e,s);n[s]?(n[s].p(f,a),g(n[s],1)):(n[s]=fe(f),n[s].c(),g(n[s],1),n[s].m(t.parentNode,t))}for(L(),s=e.length;s<n.length;s+=1)o(s);j()}},i(r){if(!l){for(let a=0;a<e.length;a+=1)g(n[a]);l=!0}},o(r){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)p(n[a]);l=!1},d(r){M(n,r),r&&S(t)}}}function ue(i){let t,l,e;function n(r){i[20](r)}let o={size:i[2],labelText:"Embedding",$$slots:{default:[Me]},$$scope:{ctx:i}};return i[0]!==void 0&&(o.selected=i[0]),t=new Y({props:o}),we.push(()=>Ee(t,"selected",n)),{c(){D(t.$$.fragment)},l(r){z(t.$$.fragment,r)},m(r,a){I(t,r,a),e=!0},p(r,a){const s={};a&4&&(s.size=r[2]),a&1073741888&&(s.$$scope={dirty:a,ctx:r}),!l&&a&1&&(l=!0,s.selected=r[0],Se(()=>l=!1)),t.$set(s)},i(r){e||(g(t.$$.fragment,r),e=!0)},o(r){p(t.$$.fragment,r),e=!1},d(r){F(t,r)}}}function _e(i){let t,l;return t=new K({props:{value:i[22]}}),{c(){D(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,n){I(t,e,n),l=!0},p(e,n){const o={};n&64&&(o.value=e[22]),t.$set(o)},i(e){l||(g(t.$$.fragment,e),l=!0)},o(e){p(t.$$.fragment,e),l=!1},d(e){F(t,e)}}}function Me(i){let t,l,e=i[6],n=[];for(let r=0;r<e.length;r+=1)n[r]=_e(ie(i,e,r));const o=r=>p(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();t=G()},l(r){for(let a=0;a<n.length;a+=1)n[a].l(r);t=G()},m(r,a){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(r,a);A(r,t,a),l=!0},p(r,a){if(a&64){e=r[6];let s;for(s=0;s<e.length;s+=1){const f=ie(r,e,s);n[s]?(n[s].p(f,a),g(n[s],1)):(n[s]=_e(f),n[s].c(),g(n[s],1),n[s].m(t.parentNode,t))}for(L(),s=e.length;s<n.length;s+=1)o(s);j()}},i(r){if(!l){for(let a=0;a<e.length;a+=1)g(n[a]);l=!0}},o(r){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)p(n[a]);l=!1},d(r){M(n,r),r&&S(t)}}}function Xe(i){let t,l,e,n,o,r,a,s,f,_,y;const B=[Ge,Ae,je],b=[];function C(c,d){return c[5].isLoading?0:c[5].isError?1:c[5].data.length>0?2:-1}~(e=C(i))&&(n=b[e]=B[e](i));const w=[We,Re,Je],h=[];function $(c,d){var v,k;return(v=c[4])!=null&&v.isLoading?0:(k=c[4])!=null&&k.isError?1:c[3]!=null&&c[3].length>0?2:-1}~(a=$(i))&&(s=h[a]=w[a](i));let u=i[6].length>0&&ue(i);return{c(){t=O("div"),l=O("div"),n&&n.c(),o=R(),r=O("div"),s&&s.c(),f=R(),_=O("div"),u&&u.c(),this.h()},l(c){t=Q(c,"DIV",{class:!0});var d=U(t);l=Q(d,"DIV",{class:!0});var v=U(l);n&&n.l(v),v.forEach(S),o=W(d),r=Q(d,"DIV",{class:!0});var k=U(r);s&&s.l(k),k.forEach(S),f=W(d),_=Q(d,"DIV",{class:!0});var P=U(_);u&&u.l(P),P.forEach(S),d.forEach(S),this.h()},h(){q(l,"class","w-1/3"),q(r,"class","w-1/3"),q(_,"class","w-1/3"),q(t,"class","flex w-full flex-row gap-x-4")},m(c,d){A(c,t,d),N(t,l),~e&&b[e].m(l,null),N(t,o),N(t,r),~a&&h[a].m(r,null),N(t,f),N(t,_),u&&u.m(_,null),y=!0},p(c,[d]){let v=e;e=C(c),e===v?~e&&b[e].p(c,d):(n&&(L(),p(b[v],1,1,()=>{b[v]=null}),j()),~e?(n=b[e],n?n.p(c,d):(n=b[e]=B[e](c),n.c()),g(n,1),n.m(l,null)):n=null);let k=a;a=$(c),a===k?~a&&h[a].p(c,d):(s&&(L(),p(h[k],1,1,()=>{h[k]=null}),j()),~a?(s=h[a],s?s.p(c,d):(s=h[a]=w[a](c),s.c()),g(s,1),s.m(r,null)):s=null),c[6].length>0?u?(u.p(c,d),d&64&&g(u,1)):(u=ue(c),u.c(),g(u,1),u.m(_,null)):u&&(L(),p(u,1,1,()=>{u=null}),j())},i(c){y||(g(n),g(s),g(u),y=!0)},o(c){p(n),p(s),p(u),y=!1},d(c){c&&S(t),~e&&b[e].d(),~a&&h[a].d(),u&&u.d()}}}function Ye(i,t,l){let e,n,o,r,a,s,f,_,y,B=X,b=()=>(B(),B=De(n,m=>l(4,y=m)),n),C,w;i.$$.on_destroy.push(()=>B());let{dataset:h=void 0}=t,{path:$=void 0}=t,{embedding:u=void 0}=t,{inputSize:c=void 0}=t;const d=ye(),v=Pe();ne(i,v,m=>l(19,w=m));let k;const P=Fe();ne(i,P,m=>l(5,C=m));function be(m){const E=m.target.value;if(E==="")l(1,h=null);else{const[V,T]=E.split("/");l(1,h={namespace:V,name:T})}}function $e(m){const E=m.target.value;l(14,$=Ne(E))}function ke(m){u=m,l(0,u),l(16,f),l(14,$),l(15,k),l(3,s),l(4,y),l(18,a)}return i.$$set=m=>{"dataset"in m&&l(1,h=m.dataset),"path"in m&&l(14,$=m.path),"embedding"in m&&l(0,u=m.embedding),"inputSize"in m&&l(2,c=m.inputSize)},i.$$.update=()=>{if(i.$$.dirty&524288&&l(17,e=[w.embedding,"gte-small","gte-base","openai","sbert"]),i.$$.dirty&34&&C.data&&C.data.length>0&&h===void 0&&l(1,h={namespace:C.data[0].namespace,name:C.data[0].dataset_name}),i.$$.dirty&2&&b(l(9,n=h!=null?Ce(h==null?void 0:h.namespace,h==null?void 0:h.name):null)),i.$$.dirty&2&&l(8,o=h?`${h.namespace}/${h.name}`:""),i.$$.dirty&16&&l(15,k=y==null?void 0:y.data),i.$$.dirty&32768&&l(18,a=k?H(k).filter(m=>!Ve(m)&&m.dtype!=null):null),i.$$.dirty&262144&&l(3,s=a!=null?a.filter(m=>H(m).some(E=>E.signal!=null&&H(E).some(V=>{var T;return((T=V.dtype)==null?void 0:T.type)==="embedding"}))):null),i.$$.dirty&16392&&$!=null&&s!=null){const m=J($);s.some(V=>J(V.path)===m)||l(14,$=void 0)}i.$$.dirty&16392&&s!=null&&s.length>0&&$==null&&l(14,$=s[0].path),i.$$.dirty&16384&&l(7,r=$?J($):void 0),i.$$.dirty&49152&&l(16,f=$&&k?H(Be(k,$)).filter(m=>m.signal!=null&&H(m).some(E=>{var V;return((V=E.dtype)==null?void 0:V.type)==="embedding"})):[]),i.$$.dirty&196608&&l(6,_=f.map(m=>m.signal.signal_name).sort((m,E)=>{let V=e.indexOf(m),T=e.indexOf(E);return V===-1&&(V=e.length),T===-1&&(T=e.length),V-T})),i.$$.dirty&65537&&u!=null&&(f.some(E=>E.path.at(-1)===u)||l(0,u=void 0)),i.$$.dirty&16387&&h!=null&&$!=null&&u!=null&&d("change",{dataset:h,path:$,embedding:u})},[u,h,c,s,y,C,_,r,o,n,v,P,be,$e,$,k,f,e,a,w,ke]}class nt extends me{constructor(t){super(),de(this,t,Ye,Xe,ge,{dataset:1,path:14,embedding:0,inputSize:2})}}export{nt as D,lt as E};
